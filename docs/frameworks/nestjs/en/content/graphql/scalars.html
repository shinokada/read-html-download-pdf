<!doctype html><html lang="en"><meta charset="utf-8"><title>Scalars</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><section id="scalars"class="level3"><h3>Scalars</h3><p>A GraphQL object type has a name and fields, but at some point those fields have to resolve to some concrete data. That's where the scalar types come in: they represent the leaves of the query (read more <a href="https://graphql.org/learn/schema/#scalar-types">here</a>). GraphQL includes the following default types: <code>Int</code>, <code>Float</code>, <code>String</code>, <code>Boolean</code> and <code>ID</code>. In addition to these built-in types, you may need to support custom atomic data types (e.g., <code>Date</code>).<section id="code-first"class="level4"><h4>Code first</h4><p>The code-first approach ships with five scalars in which three of them are simple aliases for the existing GraphQL types.<ul><li><code>ID</code> (alias for <code>GraphQLID</code>) - represents a unique identifier, often used to refetch an object or as the key for a cache<li><code>Int</code> (alias for <code>GraphQLInt</code>) - a signed 32‐bit integer<li><code>Float</code> (alias for <code>GraphQLFloat</code>) - a signed double-precision floating-point value<li><code>GraphQLISODateTime</code> - a date-time string at UTC (used by default to represent <code>Date</code> type)<li><code>GraphQLTimestamp</code> - a signed integer which represents date and time as number of milliseconds from start of UNIX epoch</ul><p>The <code>GraphQLISODateTime</code> (e.g. <code>2019-12-03T09:54:33Z</code>) is used by default to represent the <code>Date</code> type. To use the <code>GraphQLTimestamp</code> instead, set the <code>dateScalarMode</code> of the <code>buildSchemaOptions</code> object to <code>'timestamp'</code> as follows:<pre class="language-typescript"><code class="language-typescript"><span class="token maybe-class-name">GraphQLModule</span><span class="token punctuation">.</span><span class="token method function property-access">forRoot</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  buildSchemaOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
    dateScalarMode<span class="token operator">:</span> <span class="token string">'timestamp'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span></code></pre><p>Likewise, the <code>GraphQLFloat</code> is used by default to represent the <code>number</code> type. To use the <code>GraphQLInt</code> instead, set the <code>numberScalarMode</code> of the <code>buildSchemaOptions</code> object to <code>'integer'</code> as follows:<pre class="language-typescript"><code class="language-typescript"><span class="token maybe-class-name">GraphQLModule</span><span class="token punctuation">.</span><span class="token method function property-access">forRoot</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  buildSchemaOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
    numberScalarMode<span class="token operator">:</span> <span class="token string">'integer'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span></code></pre><p>In addition, you can create custom scalars.</section><section id="override-a-default-scalar"class="level4"><h4>Override a default scalar</h4><p>To create a custom implementation for the <code>Date</code> scalar, simply create a new class.<pre class="language-typescript"><code class="language-typescript"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Scalar</span><span class="token punctuation">,</span> <span class="token maybe-class-name">CustomScalar</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'@nestjs/graphql'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Kind</span><span class="token punctuation">,</span> <span class="token maybe-class-name">ValueNode</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'graphql'</span><span class="token punctuation">;</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">Scalar</span></span><span class="token punctuation">(</span><span class="token string">'Date'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token known-class-name class-name">Date</span><span class="token punctuation">)</span>
<span class="token keyword module">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">DateScalar</span></span> <span class="token keyword">implements</span> <span class="token class-name"><span class="token maybe-class-name">CustomScalar</span><span class="token operator">&#x3C;</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token known-class-name class-name">Date</span><span class="token operator">></span></span> <span class="token punctuation">{</span>
  description <span class="token operator">=</span> <span class="token string">'Date custom scalar type'</span><span class="token punctuation">;</span>

  <span class="token function">parseValue</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token known-class-name class-name">Date</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token known-class-name class-name">Date</span></span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// value from the client</span>
  <span class="token punctuation">}</span>

  <span class="token function">serialize</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token known-class-name class-name">Date</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> value<span class="token punctuation">.</span><span class="token method function property-access">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// value sent to the client</span>
  <span class="token punctuation">}</span>

  <span class="token function">parseLiteral</span><span class="token punctuation">(</span>ast<span class="token operator">:</span> <span class="token maybe-class-name">ValueNode</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token known-class-name class-name">Date</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>ast<span class="token punctuation">.</span><span class="token property-access">kind</span> <span class="token operator">===</span> <span class="token maybe-class-name">Kind</span><span class="token punctuation">.</span><span class="token constant">INT</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token known-class-name class-name">Date</span></span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword control-flow">return</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>With this in place, register <code>DateScalar</code> as a provider.<pre class="language-typescript"><code class="language-typescript"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Module</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  providers<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token maybe-class-name">DateScalar</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword module">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">CommonModule</span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre><p>Now we can use the <code>Date</code> type in our classes.<pre class="language-typescript"><code class="language-typescript"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Field</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
creationDate<span class="token operator">:</span> <span class="token known-class-name class-name">Date</span><span class="token punctuation">;</span></code></pre></section><section id="import-a-custom-scalar"class="level4"><h4>Import a custom scalar</h4><p>To use a custom scalar, import and register it as a resolver. We’ll use the <code>graphql-type-json</code> package for demonstration purposes. This npm package defines a <code>JSON</code> GraphQL scalar type.<p>Start by installing the package:<pre class="language-bash"><code class="language-bash">$ <span class="token function">npm</span> i --save graphql-type-json</code></pre><p>Once the package is installed, we pass a custom resolver to the <code>forRoot()</code> method:<pre class="language-typescript"><code class="language-typescript"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">GraphQLJSON</span></span> <span class="token keyword module">from</span> <span class="token string">'graphql-type-json'</span><span class="token punctuation">;</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">Module</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  imports<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token maybe-class-name">GraphQLModule</span><span class="token punctuation">.</span><span class="token method function property-access">forRoot</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      resolvers<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token known-class-name class-name">JSON</span><span class="token operator">:</span> <span class="token maybe-class-name">GraphQLJSON</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword module">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">AppModule</span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre><p>Now we can use the <code>JSON</code> type in our classes.<pre class="language-typescript"><code class="language-typescript"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Field</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token maybe-class-name">GraphQLJSON</span><span class="token punctuation">)</span>
info<span class="token operator">:</span> <span class="token known-class-name class-name">JSON</span><span class="token punctuation">;</span></code></pre><p>For a suite of useful scalars, take a look at the <a href="https://www.npmjs.com/package/graphql-scalars">graphql-scalars</a> package.</section><section id="create-a-custom-scalar"class="level4"><h4>Create a custom scalar</h4><p>To define a custom scalar, create a new <code>GraphQLScalarType</code> instance. We'll create a custom <code>UUID</code> scalar.<pre class="language-typescript"><code class="language-typescript"><span class="token keyword">const</span> regex <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">validate</span><span class="token punctuation">(</span>uuid<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">never</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> uuid <span class="token operator">!==</span> <span class="token string">"string"</span> <span class="token operator">||</span> <span class="token operator">!</span>regex<span class="token punctuation">.</span><span class="token method function property-access">test</span><span class="token punctuation">(</span>uuid<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">throw</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token known-class-name class-name">Error</span></span><span class="token punctuation">(</span><span class="token string">"invalid uuid"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">return</span> uuid<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword">const</span> <span class="token maybe-class-name">CustomUuidScalar</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token maybe-class-name">GraphQLScalarType</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'UUID'</span><span class="token punctuation">,</span>
  description<span class="token operator">:</span> <span class="token string">'A simple UUID parser'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">serialize</span><span class="token operator">:</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">validate</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function-variable function">parseValue</span><span class="token operator">:</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">validate</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function-variable function">parseLiteral</span><span class="token operator">:</span> <span class="token punctuation">(</span>ast<span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">validate</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>We pass a custom resolver to the <code>forRoot()</code> method:<pre class="language-typescript"><code class="language-typescript"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Module</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  imports<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token maybe-class-name">GraphQLModule</span><span class="token punctuation">.</span><span class="token method function property-access">forRoot</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      resolvers<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token constant">UUID</span><span class="token operator">:</span> <span class="token maybe-class-name">CustomUuidScalar</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword module">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">AppModule</span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre><p>Now we can use the <code>UUID</code> type in our classes.<pre class="language-typescript"><code class="language-typescript"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Field</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token maybe-class-name">CustomUuidScalar</span><span class="token punctuation">)</span>
uuid<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span></code></pre></section><section id="schema-first"class="level4"><h4>Schema first</h4><p>To define a custom scalar (read more about scalars <a href="https://www.apollographql.com/docs/graphql-tools/scalars.html">here</a>), create a type definition and a dedicated resolver. Here (as in the official documentation), we’ll use the <code>graphql-type-json</code> package for demonstration purposes. This npm package defines a <code>JSON</code> GraphQL scalar type.<p>Start by installing the package:<pre class="language-bash"><code class="language-bash">$ <span class="token function">npm</span> i --save graphql-type-json</code></pre><p>Once the package is installed, we pass a custom resolver to the <code>forRoot()</code> method:<pre class="language-typescript"><code class="language-typescript"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">GraphQLJSON</span></span> <span class="token keyword module">from</span> <span class="token string">'graphql-type-json'</span><span class="token punctuation">;</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">Module</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  imports<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token maybe-class-name">GraphQLModule</span><span class="token punctuation">.</span><span class="token method function property-access">forRoot</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      typePaths<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'./**/*.graphql'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      resolvers<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token known-class-name class-name">JSON</span><span class="token operator">:</span> <span class="token maybe-class-name">GraphQLJSON</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword module">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">AppModule</span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre><p>Now we can use the <code>JSON</code> scalar in our type definitions:<pre class="language-graphql"><code class="language-graphql"><span class="token keyword">scalar</span> <span class="token constant">JSON</span>

<span class="token keyword">type</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token constant">JSON</span>
<span class="token punctuation">}</span></code></pre><p>Another method to define a scalar type is to create a simple class. Assume we want to enhance our schema with the <code>Date</code> type.<pre class="language-typescript"><code class="language-typescript"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Scalar</span><span class="token punctuation">,</span> <span class="token maybe-class-name">CustomScalar</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'@nestjs/graphql'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Kind</span><span class="token punctuation">,</span> <span class="token maybe-class-name">ValueNode</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'graphql'</span><span class="token punctuation">;</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">Scalar</span></span><span class="token punctuation">(</span><span class="token string">'Date'</span><span class="token punctuation">)</span>
<span class="token keyword module">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">DateScalar</span></span> <span class="token keyword">implements</span> <span class="token class-name"><span class="token maybe-class-name">CustomScalar</span><span class="token operator">&#x3C;</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token known-class-name class-name">Date</span><span class="token operator">></span></span> <span class="token punctuation">{</span>
  description <span class="token operator">=</span> <span class="token string">'Date custom scalar type'</span><span class="token punctuation">;</span>

  <span class="token function">parseValue</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token known-class-name class-name">Date</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token known-class-name class-name">Date</span></span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// value from the client</span>
  <span class="token punctuation">}</span>

  <span class="token function">serialize</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token known-class-name class-name">Date</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> value<span class="token punctuation">.</span><span class="token method function property-access">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// value sent to the client</span>
  <span class="token punctuation">}</span>

  <span class="token function">parseLiteral</span><span class="token punctuation">(</span>ast<span class="token operator">:</span> <span class="token maybe-class-name">ValueNode</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token known-class-name class-name">Date</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>ast<span class="token punctuation">.</span><span class="token property-access">kind</span> <span class="token operator">===</span> <span class="token maybe-class-name">Kind</span><span class="token punctuation">.</span><span class="token constant">INT</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token known-class-name class-name">Date</span></span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword control-flow">return</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>With this in place, register <code>DateScalar</code> as a provider.<pre class="language-typescript"><code class="language-typescript"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Module</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  providers<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token maybe-class-name">DateScalar</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword module">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">CommonModule</span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre><p>Now we can use the <code>Date</code> scalar in type definitions.<pre class="language-graphql"><code class="language-graphql"><span class="token keyword">scalar</span> <span class="token class-name">Date</span></code></pre><p>By default, the generated TypeScript definition for all scalars is <code>any</code> - which isn't particularly typesafe. But, you can configure how Nest generates typings for your custom scalars when you specify how to generate types:<pre class="language-typescript"><code class="language-typescript"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">GraphQLDefinitionsFactory</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'@nestjs/graphql'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> join <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'path'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> definitionsFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token maybe-class-name">GraphQLDefinitionsFactory</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

definitionsFactory<span class="token punctuation">.</span><span class="token method function property-access">generate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  typePaths<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'./src/**/*.graphql'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  path<span class="token operator">:</span> <span class="token function">join</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token method function property-access">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'src/graphql.ts'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  outputAs<span class="token operator">:</span> <span class="token string">'class'</span><span class="token punctuation">,</span>
  defaultScalarType<span class="token operator">:</span> <span class="token string">'unknown'</span><span class="token punctuation">,</span>
  customScalarTypeMapping<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token maybe-class-name">DateTime</span><span class="token operator">:</span> <span class="token string">'Date'</span><span class="token punctuation">,</span>
    <span class="token maybe-class-name">BigNumber</span><span class="token operator">:</span> <span class="token string">'_BigNumber'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  additionalHeader<span class="token operator">:</span> <span class="token string">"import _BigNumber from 'bignumber.js'"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><blockquote><p>info <strong>Hint</strong> Alternatively, you can use a type reference instead, for example: <code>DateTime: Date</code>. In this case, <code>GraphQLDefinitionsFactory</code> will extract the name property of the specified type (<code>Date.name</code>) to generate TS definitions. Note: adding an import statement for non-built-in types (custom types) is required.</blockquote><p>Now, given the following GraphQL custom scalar types:<pre class="language-graphql"><code class="language-graphql"><span class="token keyword">scalar</span> <span class="token class-name">DateTime</span>
<span class="token keyword">scalar</span> <span class="token class-name">BigNumber</span>
<span class="token keyword">scalar</span> <span class="token class-name">Payload</span></code></pre><p>We will now see the following generated TypeScript definitions in <code>src/graphql.ts</code>:<pre class="language-typescript"><code class="language-typescript"><span class="token keyword module">import</span> <span class="token imports">_BigNumber</span> <span class="token keyword module">from</span> <span class="token string">'bignumber.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">DateTime</span></span> <span class="token operator">=</span> <span class="token known-class-name class-name">Date</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">BigNumber</span></span> <span class="token operator">=</span> _BigNumber<span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Payload</span></span> <span class="token operator">=</span> <span class="token builtin">unknown</span><span class="token punctuation">;</span></code></pre><p>Here, we've used the <code>customScalarTypeMapping</code> property to supply a map of the types we wish to declare for our custom scalars. We've also provided an <code>additionalHeader</code> property so that we can add any imports required for these type definitions. Lastly, we've added a <code>defaultScalarType</code> of <code>'unknown'</code>, so that any custom scalars not specified in <code>customScalarTypeMapping</code> will be aliased to <code>unknown</code> instead of <code>any</code> (which <a href="https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-0.html#new-unknown-top-type">TypeScript recommends</a> using since 3.0 for added type safety).<blockquote><p>info <strong>Hint</strong> Note that we've imported <code>_BigNumber</code> from <code>bignumber.js</code>; this is to avoid <a href="https://github.com/Microsoft/TypeScript/issues/12525#issuecomment-263166239">circular type references</a>. <span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></blockquote></section></section>
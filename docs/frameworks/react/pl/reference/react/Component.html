<!doctype html><html lang="pl"><meta charset="utf-8"><title>Component</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="component"><h1 id="component">Component</h1><pitfall><p>We recommend defining components as functions instead of classes. <a href="#alternatives">See how to migrate.</a></p></pitfall><intro><p><code>Component</code> is the base class for the React components defined as <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes">JavaScript classes.</a> Class components are still supported by React, but we don't recommend using them in new code.<pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">Greeting</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Hello</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token operator">!</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></intro><inlinetoc><section class="level2"aria-labelledby="reference-reference"><h2 id="reference-reference">Reference {/<em>reference</em>/}</h2><section class="level3"aria-labelledby="component-component"><h3 id="component-component"><code>Component</code> {/<em>component</em>/}</h3><p>To define a React component as a class, extend the built-in <code>Component</code> class and define a <a href="#render"><code>render</code> method:</a><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Component</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Greeting</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Hello</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token operator">!</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>Only the <code>render</code> method is required, other methods are optional.<p><a href="#usage">See more examples below.</a></section><section class="level3"aria-labelledby="context-context"><h3 id="context-context"><code>context</code> {/<em>context</em>/}</h3><p>The <a href="/learn/passing-data-deeply-with-context">context</a> of a class component is available as <code>this.context</code>. It is only available if you specify <em>which</em> context you want to receive using <a href="#static-contexttype"><code>static contextType</code></a> (modern) or <a href="#static-contexttypes"><code>static contextTypes</code></a> (deprecated).<p>A class component can only read one context at a time.<pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">Button</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> contextType <span class="token operator">=</span> <span class="token maybe-class-name">ThemeContext</span><span class="token punctuation">;</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> theme <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">context</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> className <span class="token operator">=</span> <span class="token string">'button-'</span> <span class="token operator">+</span> theme<span class="token punctuation">;</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&#x3C;</span>button className<span class="token operator">=</span><span class="token punctuation">{</span>className<span class="token punctuation">}</span><span class="token operator">></span>
        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><note><p>Reading <code>this.context</code> in class components is equivalent to <a href="/reference/react/useContext"><code>useContext</code></a> in function components.<p><a href="#migrating-a-component-with-context-from-a-class-to-a-function">See how to migrate.</a></p></note></section><section class="level3"aria-labelledby="props-props"><h3 id="props-props"><code>props</code> {/<em>props</em>/}</h3><p>The props passed to a class component are available as <code>this.props</code>.<pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">Greeting</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Hello</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token operator">!</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token operator">&#x3C;</span><span class="token maybe-class-name">Greeting</span> name<span class="token operator">=</span><span class="token string">"Taylor"</span> <span class="token operator">/</span><span class="token operator">></span></code></pre><note><p>Reading <code>this.props</code> in class components is equivalent to <a href="/learn/passing-props-to-a-component#step-2-read-props-inside-the-child-component">declaring props</a> in function components.<p><a href="#migrating-a-simple-component-from-a-class-to-a-function">See how to migrate.</a></p></note></section><section class="level3"aria-labelledby="refs-refs"><h3 id="refs-refs"><code>refs</code> {/<em>refs</em>/}</h3><deprecated><p>This API will be removed in a future major version of React. <a href="/reference/react/createRef">Use <code>createRef</code> instead.</a></p></deprecated><p>Lets you access <a href="https://reactjs.org/docs/refs-and-the-dom.html#legacy-api-string-refs">legacy string refs</a> for this component.</section><section class="level3"aria-labelledby="state-state"><h3 id="state-state"><code>state</code> {/<em>state</em>/}</h3><p>The state of a class component is available as <code>this.state</code>. The <code>state</code> field must be an object. Do not mutate the state directly. If you wish to change the state, call <code>setState</code> with the new state.<pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">Counter</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function-variable function">handleAgeChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token property-access">age</span> <span class="token operator">+</span> <span class="token number">1</span> 
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&#x3C;</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">handleAgeChange</span><span class="token punctuation">}</span><span class="token operator">></span>
        <span class="token maybe-class-name">Increment</span> age
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token maybe-class-name">You</span> are <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token property-access">age</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><note><p>Defining <code>state</code> in class components is equivalent to calling <a href="/reference/react/useState"><code>useState</code></a> in function components.<p><a href="#migrating-a-component-with-state-from-a-class-to-a-function">See how to migrate.</a></p></note></section><section class="level3"aria-labelledby="constructorprops-constructor"><h3 id="constructorprops-constructor"><code>constructor(props)</code> {/<em>constructor</em>/}</h3><p>The <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/constructor">constructor</a> runs before your class component <em>mounts</em> (gets added to the screen). Typically, a constructor is only used for two purposes in React. It lets you declare state and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_objects/Function/bind">bind</a> your class methods to the class instance:<pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">Counter</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">counter</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">handleClick</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">handleClick</span><span class="token punctuation">.</span><span class="token method function property-access">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span></code></pre><p>If you use modern JavaScript syntax, constructors are rarely needed. Instead, you can rewrite this code above using the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/Public_class_fields">public class field syntax</a> which is supported both by modern browsers and tools like <a href="https://babeljs.io/">Babel:</a><pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">Counter</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">counter</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span></code></pre><p>A constructor should not contain any side effects or subscriptions.<section class="level4"aria-labelledby="parameters-constructor-parameters"><h4 id="parameters-constructor-parameters">Parameters {/<em>constructor-parameters</em>/}</h4><ul><li><code>props</code>: The component's initial props.</ul></section><section class="level4"aria-labelledby="returns-constructor-returns"><h4 id="returns-constructor-returns">Returns {/<em>constructor-returns</em>/}</h4><p><code>constructor</code> should not return anything.</section><section class="level4"aria-labelledby="caveats-constructor-caveats"><h4 id="caveats-constructor-caveats">Caveats {/<em>constructor-caveats</em>/}</h4><ul><li><p>Do not run any side effects or subscriptions in the constructor. Instead, use <a href="#componentdidmount"><code>componentDidMount</code></a> for that.<li><p>Inside a constructor, you need to call <code>super(props)</code> before any other statement. If you don't do that, <code>this.props</code> will be <code>undefined</code> while the constructor runs, which can be confusing and cause bugs.<li><p>Constructor is the only place where you can assign <a href="#state"><code>this.state</code></a> directly. In all other methods, you need to use <a href="#setstate"><code>this.setState()</code></a> instead. Do not call <code>setState</code> in the constructor.<li><p>When you use <a href="/reference/react-dom/server">server rendering,</a> the constructor will run on the server too, followed by the <a href="#render"><code>render</code></a> method. However, lifecycle methods like <code>componentDidMount</code> or <code>componentWillUnmount</code> will not run on the server.<li><p>When <a href="/reference/react/StrictMode">Strict Mode</a> is on, React will call <code>constructor</code> twice in development and then throw away one of the instances. This helps you notice the accidental side effects that need to be moved out of the <code>constructor</code>.</ul><note><p>There is no exact equivalent for <code>constructor</code> in function components. To declare state in a function component, call <a href="/reference/react/useState"><code>useState</code>.</a> To avoid recalculating the initial state, <a href="/reference/react/useState#avoiding-recreating-the-initial-state">pass a function to <code>useState</code>.</a></p></note></section></section><section class="level3"aria-labelledby="componentdidcatcherror-info-componentdidcatch"><h3 id="componentdidcatcherror-info-componentdidcatch"><code>componentDidCatch(error, info)</code> {/<em>componentdidcatch</em>/}</h3><p>If you define <code>componentDidCatch</code>, React will call it when some child component (including distant children) throws an error during rendering. This lets you log that error to an error reporting service in production.<p>Typically, it is used together with <a href="#static-getderivedstatefromerror"><code>static getDerivedStateFromError</code></a> which lets you update state in response to an error and display an error message to the user. A component with these methods is called an <em>error boundary.</em><p><a href="#catching-rendering-errors-with-an-error-boundary">See an example.</a><section class="level4"aria-labelledby="parameters-componentdidcatch-parameters"><h4 id="parameters-componentdidcatch-parameters">Parameters {/<em>componentdidcatch-parameters</em>/}</h4><ul><li><p><code>error</code>: The error that was thrown. In practice, it will usually be an instance of <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error"><code>Error</code></a> but this is not guaranteed because JavaScript allows to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/throw"><code>throw</code></a> any value, including strings or even <code>null</code>.<li><p><code>info</code>: An object containing additional information about the error. Its <code>componentStack</code> field contains a stack trace with the component that threw, as well as the names and source locations of all its parent components. In production, the component names will be minified. If you set up production error reporting, you can decode the component stack using sourcemaps the same way as you would do for regular JavaScript error stacks.</ul></section><section class="level4"aria-labelledby="returns-componentdidcatch-returns"><h4 id="returns-componentdidcatch-returns">Returns {/<em>componentdidcatch-returns</em>/}</h4><p><code>componentDidCatch</code> should not return anything.</section><section class="level4"aria-labelledby="caveats-componentdidcatch-caveats"><h4 id="caveats-componentdidcatch-caveats">Caveats {/<em>componentdidcatch-caveats</em>/}</h4><ul><li><p>In the past, it was common to call <code>setState</code> inside <code>componentDidCatch</code> in order to update the UI and display the fallback error message. This is deprecated in favor of defining <a href="#static-getderivedstatefromerror"><code>static getDerivedStateFromError</code>.</a><li><p>Production and development builds of React slightly differ in the way <code>componentDidCatch</code> handles errors. In development, the errors will bubble up to <code>window</code>, which means that any <code>window.onerror</code> or <code>window.addEventListener('error', callback)</code> will intercept the errors that have been caught by <code>componentDidCatch</code>. In production, instead, the errors will not bubble up, which means any ancestor error handler will only receive errors not explicitly caught by <code>componentDidCatch</code>.</ul><note><p>There is no direct equivalent for <code>componentDidCatch</code> in function components yet. If you'd like to avoid creating class components, write a single <code>ErrorBoundary</code> component like above and use it throughout your app. Alternatively, you can use the <a href="https://github.com/bvaughn/react-error-boundary"><code>react-error-boundary</code></a> package which does that for you.</p></note></section></section><section class="level3"aria-labelledby="componentdidmount-componentdidmount"><h3 id="componentdidmount-componentdidmount"><code>componentDidMount()</code> {/<em>componentdidmount</em>/}</h3><p>If you define the <code>componentDidMount</code> method, React will call it when your component is first added <em>(mounted)</em> to the screen. This is a common place to start data fetching, set up subscriptions, or manipulate the DOM nodes.<p>If you implement <code>componentDidMount</code>, you usually need to implement other lifecycle methods to avoid bugs. For example, if <code>componentDidMount</code> reads some state or props, you also have to implement <a href="#componentdidupdate"><code>componentDidUpdate</code></a> to handle their changes, and <a href="#componentwillunmount"><code>componentWillUnmount</code></a> to clean up whatever <code>componentDidMount</code> was doing.<pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">ChatRoom</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">serverUrl</span><span class="token operator">:</span> <span class="token string">'https://localhost:1234'</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">setupConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token parameter">prevProps<span class="token punctuation">,</span> prevState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">roomId</span> <span class="token operator">!==</span> prevProps<span class="token punctuation">.</span><span class="token property-access">roomId</span> <span class="token operator">||</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token property-access">serverUrl</span> <span class="token operator">!==</span> prevState<span class="token punctuation">.</span><span class="token property-access">serverUrl</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">destroyConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">setupConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">destroyConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre><p><a href="#adding-lifecycle-methods-to-a-class-component">See more examples.</a><section class="level4"aria-labelledby="parameters-componentdidmount-parameters"><h4 id="parameters-componentdidmount-parameters">Parameters {/<em>componentdidmount-parameters</em>/}</h4><p><code>componentDidMount</code> does not take any parameters.</section><section class="level4"aria-labelledby="returns-componentdidmount-returns"><h4 id="returns-componentdidmount-returns">Returns {/<em>componentdidmount-returns</em>/}</h4><p><code>componentDidMount</code> should not return anything.</section><section class="level4"aria-labelledby="caveats-componentdidmount-caveats"><h4 id="caveats-componentdidmount-caveats">Caveats {/<em>componentdidmount-caveats</em>/}</h4><ul><li><p>When <a href="/reference/react/StrictMode">Strict Mode</a> is on, in development React will call <code>componentDidMount</code>, then immediately call <a href="#componentwillunmount"><code>componentWillUnmount</code>,</a> and then call <code>componentDidMount</code> again. This helps you notice if you forgot to implement <code>componentWillUnmount</code> or if its logic doesn't fully "mirror" what <code>componentDidMount</code> does.<li><p>Although you may call <a href="#setstate"><code>setState</code></a> immediately in <code>componentDidMount</code>, it's best to avoid that when you can. It will trigger an extra rendering, but it will happen before the browser updates the screen. This guarantees that even though the <a href="#render"><code>render</code></a> will be called twice in this case, the user won't see the intermediate state. Use this pattern with caution because it often causes performance issues. In most cases, you should be able to assign the initial state in the <a href="#constructor"><code>constructor</code></a> instead. It can, however, be necessary for cases like modals and tooltips when you need to measure a DOM node before rendering something that depends on its size or position.</ul><note><p>For many use cases, defining <code>componentDidMount</code>, <code>componentDidUpdate</code>, and <code>componentWillUnmount</code> together in class components is equivalent to calling <a href="/reference/react/useEffect"><code>useEffect</code></a> in function components. In the rare cases where it's important for the code to run before browser paint, <a href="/reference/react/useLayoutEffect"><code>useLayoutEffect</code></a> is a closer match.<p><a href="#migrating-a-component-with-lifecycle-methods-from-a-class-to-a-function">See how to migrate.</a></p></note></section></section><section class="level3"aria-labelledby="componentdidupdateprevprops-prevstate-snapshot-componentdidupdate"><h3 id="componentdidupdateprevprops-prevstate-snapshot-componentdidupdate"><code>componentDidUpdate(prevProps, prevState, snapshot?)</code> {/<em>componentdidupdate</em>/}</h3><p>If you define the <code>componentDidUpdate</code> method, React will call it immediately after your component has been re-rendered with updated props or state. This method is not called for the initial render.<p>You can use it to manipulate the DOM after an update. This is also a common place to do network requests as long as you compare the current props to previous props (e.g. a network request may not be necessary if the props have not changed). Typically, you'd use it together with <a href="#componentdidmount"><code>componentDidMount</code></a> and <a href="#componentwillunmount"><code>componentWillUnmount</code>:</a><pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">ChatRoom</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">serverUrl</span><span class="token operator">:</span> <span class="token string">'https://localhost:1234'</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">setupConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token parameter">prevProps<span class="token punctuation">,</span> prevState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">roomId</span> <span class="token operator">!==</span> prevProps<span class="token punctuation">.</span><span class="token property-access">roomId</span> <span class="token operator">||</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token property-access">serverUrl</span> <span class="token operator">!==</span> prevState<span class="token punctuation">.</span><span class="token property-access">serverUrl</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">destroyConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">setupConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">destroyConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre><p><a href="#adding-lifecycle-methods-to-a-class-component">See more examples.</a><section class="level4"aria-labelledby="parameters-componentdidupdate-parameters"><h4 id="parameters-componentdidupdate-parameters">Parameters {/<em>componentdidupdate-parameters</em>/}</h4><ul><li><p><code>prevProps</code>: Props before the update. Compare <code>prevProps</code> to <a href="#props"><code>this.props</code></a> to determine what changed.<li><p><code>prevState</code>: State before the update. Compare <code>prevState</code> to <a href="#state"><code>this.state</code></a> to determine what changed.<li><p><code>snapshot</code>: If you implemented <a href="#getsnapshotbeforeupdate"><code>getSnapshotBeforeUpdate</code></a>, <code>snapshot</code> will contain the value you returned from that method. Otherwise, it will be <code>undefined</code>.</ul></section><section class="level4"aria-labelledby="returns-componentdidupdate-returns"><h4 id="returns-componentdidupdate-returns">Returns {/<em>componentdidupdate-returns</em>/}</h4><p><code>componentDidUpdate</code> should not return anything.</section><section class="level4"aria-labelledby="caveats-componentdidupdate-caveats"><h4 id="caveats-componentdidupdate-caveats">Caveats {/<em>componentdidupdate-caveats</em>/}</h4><ul><li><p><code>componentDidUpdate</code> will not get called if <a href="#shouldcomponentupdate"><code>shouldComponentUpdate</code></a> is defined and returns <code>false</code>.<li><p>The logic inside <code>componentDidUpdate</code> should usually be wrapped in conditions comparing <code>this.props</code> with <code>prevProps</code>, and <code>this.state</code> with <code>prevState</code>. Otherwise, there's a risk of creating infinite loops.<li><p>Although you may call <a href="#setstate"><code>setState</code></a> immediately in <code>componentDidUpdate</code>, it's best to avoid that when you can. It will trigger an extra rendering, but it will happen before the browser updates the screen. This guarantees that even though the <a href="#render"><code>render</code></a> will be called twice in this case, the user won't see the intermediate state. This pattern often causes performance issues, but it may be necessary for rare cases like modals and tooltips when you need to measure a DOM node before rendering something that depends on its size or position.</ul><note><p>For many use cases, defining <code>componentDidMount</code>, <code>componentDidUpdate</code>, and <code>componentWillUnmount</code> together in class components is equivalent to calling <a href="/reference/react/useEffect"><code>useEffect</code></a> in function components. In the rare cases where it's important for the code to run before browser paint, <a href="/reference/react/useLayoutEffect"><code>useLayoutEffect</code></a> is a closer match.<p><a href="#migrating-a-component-with-lifecycle-methods-from-a-class-to-a-function">See how to migrate.</a></p></note></section></section><section class="level3"aria-labelledby="componentwillmount-componentwillmount"><h3 id="componentwillmount-componentwillmount"><code>componentWillMount()</code> {/<em>componentwillmount</em>/}</h3><deprecated><p>This API has been renamed from <code>componentWillMount</code> to <a href="#unsafe_componentwillmount"><code>UNSAFE_componentWillMount</code>.</a> The old name has been deprecated. In a future major version of React, only the new name will work.<p>Run the <a href="https://github.com/reactjs/react-codemod#rename-unsafe-lifecycles"><code>rename-unsafe-lifecycles</code> codemod</a> to automatically update your components.</p></deprecated></section><section class="level3"aria-labelledby="componentwillreceivepropsnextprops-componentwillreceiveprops"><h3 id="componentwillreceivepropsnextprops-componentwillreceiveprops"><code>componentWillReceiveProps(nextProps)</code> {/<em>componentwillreceiveprops</em>/}</h3><deprecated><p>This API has been renamed from <code>componentWillReceiveProps</code> to <a href="#unsafe_componentwillreceiveprops"><code>UNSAFE_componentWillReceiveProps</code>.</a> The old name has been deprecated. In a future major version of React, only the new name will work.<p>Run the <a href="https://github.com/reactjs/react-codemod#rename-unsafe-lifecycles"><code>rename-unsafe-lifecycles</code> codemod</a> to automatically update your components.</p></deprecated></section><section class="level3"aria-labelledby="componentwillupdatenextprops-nextstate-componentwillupdate"><h3 id="componentwillupdatenextprops-nextstate-componentwillupdate"><code>componentWillUpdate(nextProps, nextState)</code> {/<em>componentwillupdate</em>/}</h3><deprecated><p>This API has been renamed from <code>componentWillUpdate</code> to <a href="#unsafe_componentwillupdate"><code>UNSAFE_componentWillUpdate</code>.</a> The old name has been deprecated. In a future major version of React, only the new name will work.<p>Run the <a href="https://github.com/reactjs/react-codemod#rename-unsafe-lifecycles"><code>rename-unsafe-lifecycles</code> codemod</a> to automatically update your components.</p></deprecated></section><section class="level3"aria-labelledby="componentwillunmount-componentwillunmount"><h3 id="componentwillunmount-componentwillunmount"><code>componentWillUnmount()</code> {/<em>componentwillunmount</em>/}</h3><p>If you define the <code>componentWillUnmount</code> method, React will call it before your component is removed <em>(unmounted)</em> from the screen. This is a common place to cancel data fetching or remove subscriptions.<p>The logic inside <code>componentWillUnmount</code> should "mirror" the logic inside <a href="#componentdidmount"><code>componentDidMount</code>.</a> For example, if <code>componentDidMount</code> sets up a subscription, <code>componentWillUnmount</code> should clean up that subscription. If the cleanup logic in your <code>componentWillUnmount</code> reads some props or state, you will usually also need to implement <a href="#componentdidupdate"><code>componentDidUpdate</code></a> to clean up resources (such as subscriptions) corresponding to the old props and state.<pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">ChatRoom</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">serverUrl</span><span class="token operator">:</span> <span class="token string">'https://localhost:1234'</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">setupConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token parameter">prevProps<span class="token punctuation">,</span> prevState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">roomId</span> <span class="token operator">!==</span> prevProps<span class="token punctuation">.</span><span class="token property-access">roomId</span> <span class="token operator">||</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token property-access">serverUrl</span> <span class="token operator">!==</span> prevState<span class="token punctuation">.</span><span class="token property-access">serverUrl</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">destroyConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">setupConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">destroyConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre><p><a href="#adding-lifecycle-methods-to-a-class-component">See more examples.</a><section class="level4"aria-labelledby="parameters-componentwillunmount-parameters"><h4 id="parameters-componentwillunmount-parameters">Parameters {/<em>componentwillunmount-parameters</em>/}</h4><p><code>componentWillUnmount</code> does not take any parameters.</section><section class="level4"aria-labelledby="returns-componentwillunmount-returns"><h4 id="returns-componentwillunmount-returns">Returns {/<em>componentwillunmount-returns</em>/}</h4><p><code>componentWillUnmount</code> should not return anything.</section><section class="level4"aria-labelledby="caveats-componentwillunmount-caveats"><h4 id="caveats-componentwillunmount-caveats">Caveats {/<em>componentwillunmount-caveats</em>/}</h4><ul><li>When <a href="/reference/react/StrictMode">Strict Mode</a> is on, in development React will call <a href="#componentdidmount"><code>componentDidMount</code>,</a> then immediately call <code>componentWillUnmount</code>, and then call <code>componentDidMount</code> again. This helps you notice if you forgot to implement <code>componentWillUnmount</code> or if its logic doesn't fully "mirror" what <code>componentDidMount</code> does.</ul><note><p>For many use cases, defining <code>componentDidMount</code>, <code>componentDidUpdate</code>, and <code>componentWillUnmount</code> together in class components is equivalent to calling <a href="/reference/react/useEffect"><code>useEffect</code></a> in function components. In the rare cases where it's important for the code to run before browser paint, <a href="/reference/react/useLayoutEffect"><code>useLayoutEffect</code></a> is a closer match.<p><a href="#migrating-a-component-with-lifecycle-methods-from-a-class-to-a-function">See how to migrate.</a></p></note></section></section><section class="level3"aria-labelledby="forceupdatecallback-forceupdate"><h3 id="forceupdatecallback-forceupdate"><code>forceUpdate(callback?)</code> {/<em>forceupdate</em>/}</h3><p>Forces a component to re-render.<p>Usually, this is not necessary. If your component's <a href="#render"><code>render</code></a> method only reads from <a href="#props"><code>this.props</code></a>, <a href="#state"><code>this.state</code></a>, or <a href="#context"><code>this.context</code>,</a> it will re-render automatically when you call <a href="#setstate"><code>setState</code></a> inside your component or one of its parents. However, if your component's <code>render</code> method reads directly from an external data source, you have to tell React to update the user interface when that data source changes. That's what <code>forceUpdate</code> lets you do.<p>Try to avoid all uses of <code>forceUpdate</code> and only read from <code>this.props</code> and <code>this.state</code> in <code>render</code>.<section class="level4"aria-labelledby="parameters-forceupdate-parameters"><h4 id="parameters-forceupdate-parameters">Parameters {/<em>forceupdate-parameters</em>/}</h4><ul><li><strong>optional</strong> <code>callback</code> If specified, React will call the <code>callback</code> you've provided after the update is committed.</ul></section><section class="level4"aria-labelledby="returns-forceupdate-returns"><h4 id="returns-forceupdate-returns">Returns {/<em>forceupdate-returns</em>/}</h4><p><code>forceUpdate</code> does not return anything.</section><section class="level4"aria-labelledby="caveats-forceupdate-caveats"><h4 id="caveats-forceupdate-caveats">Caveats {/<em>forceupdate-caveats</em>/}</h4><ul><li>If you call <code>forceUpdate</code>, React will re-render without calling <a href="#shouldcomponentupdate"><code>shouldComponentUpdate</code>.</a></ul><note><p>Reading an external data source and forcing class components to re-render in response to its changes with <code>forceUpdate</code> has been superseded by <a href="/reference/react/useSyncExternalStore"><code>useSyncExternalStore</code></a> in function components.</p></note></section></section><section class="level3"aria-labelledby="getchildcontext-getchildcontext"><h3 id="getchildcontext-getchildcontext"><code>getChildContext()</code> {/<em>getchildcontext</em>/}</h3><deprecated><p>This API will be removed in a future major version of React. <a href="/reference/react/createContext#provider">Use <code>Context.Provider</code> instead.</a></p></deprecated><p>Lets you specify the values for the <a href="https://reactjs.org/docs/legacy-context.html">legacy context</a> is provided by this component.</section><section class="level3"aria-labelledby="getsnapshotbeforeupdateprevprops-prevstate-getsnapshotbeforeupdate"><h3 id="getsnapshotbeforeupdateprevprops-prevstate-getsnapshotbeforeupdate"><code>getSnapshotBeforeUpdate(prevProps, prevState)</code> {/<em>getsnapshotbeforeupdate</em>/}</h3><p>If you implement <code>getSnapshotBeforeUpdate</code>, React will call it immediately before React updates the DOM. It enables your component to capture some information from the DOM (e.g. scroll position) before it is potentially changed. Any value returned by this lifecycle method will be passed as a parameter to <a href="#componentdidupdate"><code>componentDidUpdate</code>.</a><p>For example, you can use it in a UI like a chat thread that needs to preserve its scroll position during updates:<pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">ScrollingList</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">listRef</span> <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getSnapshotBeforeUpdate</span><span class="token punctuation">(</span><span class="token parameter">prevProps<span class="token punctuation">,</span> prevState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Are we adding new items to the list?</span>
    <span class="token comment">// Capture the scroll position so we can adjust scroll later.</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>prevProps<span class="token punctuation">.</span><span class="token property-access">list</span><span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">&#x3C;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">list</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">listRef</span><span class="token punctuation">.</span><span class="token property-access">current</span><span class="token punctuation">;</span>
      <span class="token keyword control-flow">return</span> list<span class="token punctuation">.</span><span class="token property-access">scrollHeight</span> <span class="token operator">-</span> list<span class="token punctuation">.</span><span class="token property-access">scrollTop</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword control-flow">return</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token parameter">prevProps<span class="token punctuation">,</span> prevState<span class="token punctuation">,</span> snapshot</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// If we have a snapshot value, we've just added new items.</span>
    <span class="token comment">// Adjust scroll so these new items don't push the old ones out of view.</span>
    <span class="token comment">// (snapshot here is the value returned from getSnapshotBeforeUpdate)</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>snapshot <span class="token operator">!==</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">listRef</span><span class="token punctuation">.</span><span class="token property-access">current</span><span class="token punctuation">;</span>
      list<span class="token punctuation">.</span><span class="token property-access">scrollTop</span> <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token property-access">scrollHeight</span> <span class="token operator">-</span> snapshot<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&#x3C;</span>div ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">listRef</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token comment">/* ...contents... */</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>In the above example, it is important to read the <code>scrollHeight</code> property directly in <code>getSnapshotBeforeUpdate</code>. It is not safe to read it in <a href="#render"><code>render</code></a>, <a href="#unsafe_componentwillreceiveprops"><code>UNSAFE_componentWillReceiveProps</code></a>, or <a href="#unsafe_componentwillupdate"><code>UNSAFE_componentWillUpdate</code></a> because there is a potential time gap between these methods getting called and React updating the DOM.<section class="level4"aria-labelledby="parameters-getsnapshotbeforeupdate-parameters"><h4 id="parameters-getsnapshotbeforeupdate-parameters">Parameters {/<em>getsnapshotbeforeupdate-parameters</em>/}</h4><ul><li><p><code>prevProps</code>: Props before the update. Compare <code>prevProps</code> to <a href="#props"><code>this.props</code></a> to determine what changed.<li><p><code>prevState</code>: State before the update. Compare <code>prevState</code> to <a href="#state"><code>this.state</code></a> to determine what changed.</ul></section><section class="level4"aria-labelledby="returns-getsnapshotbeforeupdate-returns"><h4 id="returns-getsnapshotbeforeupdate-returns">Returns {/<em>getsnapshotbeforeupdate-returns</em>/}</h4><p>You should return a snapshot value of any type that you'd like, or <code>null</code>. The value you returned will be passed as the third argument to <a href="#componentdidupdate"><code>componentDidUpdate</code>.</a></section><section class="level4"aria-labelledby="caveats-getsnapshotbeforeupdate-caveats"><h4 id="caveats-getsnapshotbeforeupdate-caveats">Caveats {/<em>getsnapshotbeforeupdate-caveats</em>/}</h4><ul><li><code>getSnapshotBeforeUpdate</code> will not get called if <a href="#shouldcomponentupdate"><code>shouldComponentUpdate</code></a> is defined and returns <code>false</code>.</ul><note><p>At the moment, there is no equivalent to <code>getSnapshotBeforeUpdate</code> for function components. This use case is very uncommon, but if you have the need for it, for now you'll have to write a class component.</p></note></section></section><section class="level3"aria-labelledby="render-render"><h3 id="render-render"><code>render()</code> {/<em>render</em>/}</h3><p>The <code>render</code> method is the only required method in a class component.<p>The <code>render</code> method should specify what you want to appear on the screen, for example:<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Component</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Greeting</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Hello</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token operator">!</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>React may call <code>render</code> at any moment, so you shouldn't assume that it runs at a particular time. Usually, the <code>render</code> method should return a piece of <a href="/learn/writing-markup-with-jsx">JSX</a>, but a few <a href="#render-returns">other return types</a> (like strings) are supported. To calculate the returned JSX, the <code>render</code> method can read <a href="#props"><code>this.props</code></a>, <a href="#state"><code>this.state</code></a>, and <a href="#context"><code>this.context</code></a>.<p>You should write the <code>render</code> method as a pure function, meaning that it should return the same result if props, state, and context are the same. It also shouldn't contain side effects (like setting up subscriptions) or interact with the browser APIs. Side effects should happen either in event handlers or methods like <a href="#componentdidmount"><code>componentDidMount</code>.</a><section class="level4"aria-labelledby="parameters-render-parameters"><h4 id="parameters-render-parameters">Parameters {/<em>render-parameters</em>/}</h4><ul><li><p><code>prevProps</code>: Props before the update. Compare <code>prevProps</code> to <a href="#props"><code>this.props</code></a> to determine what changed.<li><p><code>prevState</code>: State before the update. Compare <code>prevState</code> to <a href="#state"><code>this.state</code></a> to determine what changed.</ul></section><section class="level4"aria-labelledby="returns-render-returns"><h4 id="returns-render-returns">Returns {/<em>render-returns</em>/}</h4><p><code>render</code> can return any valid React node. This includes React elements such as <code>&#x3C;div /></code>, strings, numbers, <a href="/reference/react-dom/createPortal">portals</a>, empty nodes (<code>null</code>, <code>undefined</code>, <code>true</code>, and <code>false</code>), and arrays of React nodes.</section><section class="level4"aria-labelledby="caveats-render-caveats"><h4 id="caveats-render-caveats">Caveats {/<em>render-caveats</em>/}</h4><ul><li><p><code>render</code> should be written as a pure function of props, state, and context. It should not have side effects.<li><p><code>render</code> will not get called if <a href="#shouldcomponentupdate"><code>shouldComponentUpdate</code></a> is defined and returns <code>false</code>.<li><p>When <a href="/reference/react/StrictMode">Strict Mode</a> is on, React will call <code>render</code> twice in development and then throw away one of the results. This helps you notice the accidental side effects that need to be moved out of the <code>render</code> method.<li><p>There is no one-to-one correspondence between the <code>render</code> call and the subsequent <code>componentDidMount</code> or <code>componentDidUpdate</code> call. Some of the <code>render</code> call results may be discarded by React when it's beneficial.</ul></section></section><section class="level3"aria-labelledby="setstatenextstate-callback-setstate"><h3 id="setstatenextstate-callback-setstate"><code>setState(nextState, callback?)</code> {/<em>setstate</em>/}</h3><p>Call <code>setState</code> to update the state of your React component.<pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">Form</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Taylor'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function-variable function">handleNameChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> newName <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> newName
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&#x3C;</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span>input value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">handleNameChange</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token maybe-class-name">Hello</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token punctuation">.</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p><code>setState</code> enqueues changes to the component state. It tells React that this component and its children need to re-render with the new state. This is the main way you'll update the user interface in response to interactions.</p><pitfall><p>Calling <code>setState</code> <strong>does not</strong> change the current state in the already executing code:<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "Taylor"</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Robin'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Still "Taylor"!</span>
<span class="token punctuation">}</span></code></pre><p>It only affects what <code>this.state</code> will return starting from the <em>next</em> render.</p></pitfall><p>You can also pass a function to <code>setState</code>. It lets you update state based on the previous state:<pre class="language-js"><code class="language-js">  <span class="token function-variable function">handleIncreaseAge</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">setState</span><span class="token punctuation">(</span><span class="token parameter">prevState</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">age</span><span class="token operator">:</span> prevState<span class="token punctuation">.</span><span class="token property-access">age</span> <span class="token operator">+</span> <span class="token number">1</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span></code></pre><p>You don't have to do this, but it's handy if you want to update state multiple times during the same event.<section class="level4"aria-labelledby="parameters-setstate-parameters"><h4 id="parameters-setstate-parameters">Parameters {/<em>setstate-parameters</em>/}</h4><ul><li><p><code>nextState</code>: Either an object or a function.<ul><li>If you pass an object as <code>nextState</code>, it will be shallowly merged into <code>this.state</code>.<li>If you pass a function as <code>nextState</code>, it will be treated as an <em>updater function</em>. It must be pure, should take the pending state and props as arguments, and should return the object to be shallowly merged into <code>this.state</code>. React will put your updater function in a queue and re-render your component. During the next render, React will calculate the next state by applying all of the queued updaters to the previous state.</ul><li><p><strong>optional</strong> <code>callback</code>: If specified, React will call the <code>callback</code> you've provided after the update is committed.</ul></section><section class="level4"aria-labelledby="returns-setstate-returns"><h4 id="returns-setstate-returns">Returns {/<em>setstate-returns</em>/}</h4><p><code>setState</code> does not return anything.</section><section class="level4"aria-labelledby="caveats-setstate-caveats"><h4 id="caveats-setstate-caveats">Caveats {/<em>setstate-caveats</em>/}</h4><ul><li><p>Think of <code>setState</code> as a <em>request</em> rather than an immediate command to update the component. When multiple components update their state in response to an event, React will batch their updates and re-render them together in a single pass at the end of the event. In the rare case that you need to force a particular state update to be applied synchronously, you may wrap it in <a href="/reference/react-dom/flushSync"><code>flushSync</code>,</a> but this may hurt performance.<li><p><code>setState</code> does not update <code>this.state</code> immediately. This makes reading <code>this.state</code> right after calling <code>setState</code> a potential pitfall. Instead, use <a href="#componentdidupdate"><code>componentDidUpdate</code></a> or the setState <code>callback</code> argument, either of which are guaranteed to fire after the update has been applied. If you need to set the state based on the previous state, you can pass a function to <code>nextState</code> as described above.</ul><note><p>Calling <code>setState</code> in class components is similar to calling a <a href="/reference/react/useState#setstate"><code>set</code> function</a> in function components.<p><a href="#migrating-a-component-with-state-from-a-class-to-a-function">See how to migrate.</a></p></note></section></section><section class="level3"aria-labelledby="shouldcomponentupdatenextprops-nextstate-nextcontext-shouldcomponentupdate"><h3 id="shouldcomponentupdatenextprops-nextstate-nextcontext-shouldcomponentupdate"><code>shouldComponentUpdate(nextProps, nextState, nextContext)</code> {/<em>shouldcomponentupdate</em>/}</h3><p>If you define <code>shouldComponentUpdate</code>, React will call it to determine whether a re-render can be skipped.<p>If you are confident you want to write it by hand, you may compare <code>this.props</code> with <code>nextProps</code> and <code>this.state</code> with <code>nextState</code> and return <code>false</code> to tell React the update can be skipped.<pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">Rectangle</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">isHovered</span><span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span><span class="token parameter">nextProps<span class="token punctuation">,</span> nextState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>
      nextProps<span class="token punctuation">.</span><span class="token property-access">position</span><span class="token punctuation">.</span><span class="token property-access">x</span> <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">position</span><span class="token punctuation">.</span><span class="token property-access">x</span> <span class="token operator">&#x26;&#x26;</span>
      nextProps<span class="token punctuation">.</span><span class="token property-access">position</span><span class="token punctuation">.</span><span class="token property-access">y</span> <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">position</span><span class="token punctuation">.</span><span class="token property-access">y</span> <span class="token operator">&#x26;&#x26;</span>
      nextProps<span class="token punctuation">.</span><span class="token property-access">size</span><span class="token punctuation">.</span><span class="token property-access">width</span> <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">size</span><span class="token punctuation">.</span><span class="token property-access">width</span> <span class="token operator">&#x26;&#x26;</span>
      nextProps<span class="token punctuation">.</span><span class="token property-access">size</span><span class="token punctuation">.</span><span class="token property-access">height</span> <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">size</span><span class="token punctuation">.</span><span class="token property-access">height</span> <span class="token operator">&#x26;&#x26;</span>
      nextState<span class="token punctuation">.</span><span class="token property-access">isHovered</span> <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token property-access">isHovered</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Nothing has changed, so a re-render is unnecessary</span>
      <span class="token keyword control-flow">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword control-flow">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><p>React calls <code>shouldComponentUpdate</code> before rendering when new props or state are being received. Defaults to <code>true</code>. This method is not called for the initial render or when <a href="#forceupdate"><code>forceUpdate</code></a> is used.<section class="level4"aria-labelledby="parameters-shouldcomponentupdate-parameters"><h4 id="parameters-shouldcomponentupdate-parameters">Parameters {/<em>shouldcomponentupdate-parameters</em>/}</h4><ul><li><code>nextProps</code>: The next props that the component is about to render with. Compare <code>nextProps</code> to <a href="#props"><code>this.props</code></a> to determine what changed.<li><code>nextState</code>: The next state that the component is about to render with. Compare <code>nextState</code> to <a href="#props"><code>this.state</code></a> to determine what changed.<li><code>nextContext</code>: The next context that the component is about to render with. Compare <code>nextContext</code> to <a href="#context"><code>this.context</code></a> to determine what changed. Only available if you specify <a href="#static-contexttype"><code>static contextType</code></a> (modern) or <a href="#static-contexttypes"><code>static contextTypes</code></a> (legacy).</ul></section><section class="level4"aria-labelledby="returns-shouldcomponentupdate-returns"><h4 id="returns-shouldcomponentupdate-returns">Returns {/<em>shouldcomponentupdate-returns</em>/}</h4><p>Return <code>true</code> if you want the component to re-render. That's the default behavior.<p>Return <code>false</code> to tell React that re-rendering can be skipped.</section><section class="level4"aria-labelledby="caveats-shouldcomponentupdate-caveats"><h4 id="caveats-shouldcomponentupdate-caveats">Caveats {/<em>shouldcomponentupdate-caveats</em>/}</h4><ul><li><p>This method <em>only</em> exists as a performance optimization. If your component breaks without it, fix that first.<li><p>Consider using <a href="/reference/react/PureComponent"><code>PureComponent</code></a> instead of writing <code>shouldComponentUpdate</code> by hand. <code>PureComponent</code> shallowly compares props and state, and reduces the chance that you'll skip a necessary update.<li><p>We do not recommend doing deep equality checks or using <code>JSON.stringify</code> in <code>shouldComponentUpdate</code>. It makes performance unpredictable and dependent on the data structure of every prop and state. In the best case, you risk introducing multi-second stalls to your application, and in the worst case you risk crashing it.<li><p>Returning <code>false</code> does not prevent child components from re-rendering when <em>their</em> state changes.<li><p>Returning <code>false</code> does not <em>guarantee</em> that the component will not re-render. React will use the return value as a hint but it may still choose to re-render your component if it makes sense to do for other reasons.</ul><note><p>Optimizing class components with <code>shouldComponentUpdate</code> is similar to optimizing function components with <a href="/reference/react/memo"><code>memo</code>.</a> Function components also offer more granular optimization with <a href="/reference/react/useMemo"><code>useMemo</code>.</a></p></note></section></section><section class="level3"aria-labelledby="unsafe_componentwillmount-unsafe_componentwillmount"><h3 id="unsafe_componentwillmount-unsafe_componentwillmount"><code>UNSAFE_componentWillMount()</code> {/<em>unsafe_componentwillmount</em>/}</h3><p>If you define <code>UNSAFE_componentWillMount</code>, React will call it immediately after the <a href="#constructor"><code>constructor</code>.</a> It only exists for historical reasons and should not be used in any new code. Instead, use one of the alternatives:<ul><li>To initialize state, declare <a href="#state"><code>state</code></a> as a class field or set <code>this.state</code> inside the <a href="#constructor"><code>constructor</code>.</a><li>If you need to run a side effect or set up a subscription, move that logic to <a href="#componentdidmount"><code>componentDidMount</code></a> instead.</ul><p><a href="https://legacy.reactjs.org/blog/2018/03/27/update-on-async-rendering.html#examples">See examples of migrating away from unsafe lifecycles.</a><section class="level4"aria-labelledby="parameters-unsafe_componentwillmount-parameters"><h4 id="parameters-unsafe_componentwillmount-parameters">Parameters {/<em>unsafe_componentwillmount-parameters</em>/}</h4><p><code>UNSAFE_componentWillMount</code> does not take any parameters.</section><section class="level4"aria-labelledby="returns-unsafe_componentwillmount-returns"><h4 id="returns-unsafe_componentwillmount-returns">Returns {/<em>unsafe_componentwillmount-returns</em>/}</h4><p><code>UNSAFE_componentWillMount</code> should not return anything.</section><section class="level4"aria-labelledby="caveats-unsafe_componentwillmount-caveats"><h4 id="caveats-unsafe_componentwillmount-caveats">Caveats {/<em>unsafe_componentwillmount-caveats</em>/}</h4><ul><li><p><code>UNSAFE_componentWillMount</code> will not get called if the component implements <a href="#static-getderivedstatefromprops"><code>static getDerivedStateFromProps</code></a> or <a href="#getsnapshotbeforeupdate"><code>getSnapshotBeforeUpdate</code>.</a><li><p>Despite its naming, <code>UNSAFE_componentWillMount</code> does not guarantee that the component <em>will</em> get mounted if your app uses modern React features like <a href="/reference/react/Suspense"><code>Suspense</code>.</a> If a render attempt is suspended (for example, because the code for some child component has not loaded yet), React will throw the in-progress tree away and attempt to construct the component from scratch during the next attempt. This is why this method is "unsafe". Code that relies on mounting (like adding a subscription) should go into <a href="#componentdidmount"><code>componentDidMount</code>.</a><li><p><code>UNSAFE_componentWillMount</code> is the only lifecycle method that runs during <a href="/reference/react-dom/server">server rendering.</a> For all practical purposes, it is identical to <a href="#constructor"><code>constructor</code>,</a> so you should use the <code>constructor</code> for this type of logic instead.</ul><note><p>Calling <a href="#setstate"><code>setState</code></a> inside <code>UNSAFE_componentWillMount</code> in a class component to initialize state is equivalent to passing that state as the initial state to <a href="/reference/react/useState"><code>useState</code></a> in a function component.</p></note></section></section><section class="level3"aria-labelledby="unsafe_componentwillreceivepropsnextprops-nextcontext-unsafe_componentwillreceiveprops"><h3 id="unsafe_componentwillreceivepropsnextprops-nextcontext-unsafe_componentwillreceiveprops"><code>UNSAFE_componentWillReceiveProps(nextProps, nextContext)</code> {/<em>unsafe_componentwillreceiveprops</em>/}</h3><p>If you define <code>UNSAFE_componentWillReceiveProps</code>, React will call it when the component receives new props. It only exists for historical reasons and should not be used in any new code. Instead, use one of the alternatives:<ul><li>If you need to <strong>run a side effect</strong> (for example, fetch data, run an animation, or reinitialize a subscription) in response to prop changes, move that logic to <a href="#componentdidupdate"><code>componentDidUpdate</code></a> instead.<li>If you need to <strong>avoid re-computing some data only when a prop changes,</strong> use a <a href="https://legacy.reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html#what-about-memoization">memoization helper</a> instead.<li>If you need to <strong>"reset" some state when a prop changes,</strong> consider either making a component <a href="https://legacy.reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html#recommendation-fully-controlled-component">fully controlled</a> or <a href="https://legacy.reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html#recommendation-fully-uncontrolled-component-with-a-key">fully uncontrolled with a key</a> instead.<li>If you need to <strong>"adjust" some state when a prop changes,</strong> check whether you can compute all the necessary information from props alone during rendering. If you can't, use <a href="/reference/react/Component#static-getderivedstatefromprops"><code>static getDerivedStateFromProps</code></a> instead.</ul><p><a href="https://legacy.reactjs.org/blog/2018/03/27/update-on-async-rendering.html#updating-state-based-on-props">See examples of migrating away from unsafe lifecycles.</a><section class="level4"aria-labelledby="parameters-unsafe_componentwillreceiveprops-parameters"><h4 id="parameters-unsafe_componentwillreceiveprops-parameters">Parameters {/<em>unsafe_componentwillreceiveprops-parameters</em>/}</h4><ul><li><code>nextProps</code>: The next props that the component is about to receive from its parent component. Compare <code>nextProps</code> to <a href="#props"><code>this.props</code></a> to determine what changed.<li><code>nextContext</code>: The next props that the component is about to receive from the closest provider. Compare <code>nextContext</code> to <a href="#context"><code>this.context</code></a> to determine what changed. Only available if you specify <a href="#static-contexttype"><code>static contextType</code></a> (modern) or <a href="#static-contexttypes"><code>static contextTypes</code></a> (legacy).</ul></section><section class="level4"aria-labelledby="returns-unsafe_componentwillreceiveprops-returns"><h4 id="returns-unsafe_componentwillreceiveprops-returns">Returns {/<em>unsafe_componentwillreceiveprops-returns</em>/}</h4><p><code>UNSAFE_componentWillReceiveProps</code> should not return anything.</section><section class="level4"aria-labelledby="caveats-unsafe_componentwillreceiveprops-caveats"><h4 id="caveats-unsafe_componentwillreceiveprops-caveats">Caveats {/<em>unsafe_componentwillreceiveprops-caveats</em>/}</h4><ul><li><p><code>UNSAFE_componentWillReceiveProps</code> will not get called if the component implements <a href="#static-getderivedstatefromprops"><code>static getDerivedStateFromProps</code></a> or <a href="#getsnapshotbeforeupdate"><code>getSnapshotBeforeUpdate</code>.</a><li><p>Despite its naming, <code>UNSAFE_componentWillReceiveProps</code> does not guarantee that the component <em>will</em> receive those props if your app uses modern React features like <a href="/reference/react/Suspense"><code>Suspense</code>.</a> If a render attempt is suspended (for example, because the code for some child component has not loaded yet), React will throw the in-progress tree away and attempt to construct the component from scratch during the next attempt. By the time of the next render attempt, the props might be different. This is why this method is "unsafe". Code that should run only for committed updates (like resetting a subscription) should go into <a href="#componentdidupdate"><code>componentDidUpdate</code>.</a><li><p><code>UNSAFE_componentWillReceiveProps</code> does not mean that the component has received <em>different</em> props than the last time. You need to compare <code>nextProps</code> and <code>this.props</code> yourself to check if something changed.<li><p>React doesn't call <code>UNSAFE_componentWillReceiveProps</code> with initial props during mounting. It only calls this method if some of component's props are going to be updated. For example, calling <a href="#setstate"><code>setState</code></a> doesn't generally trigger <code>UNSAFE_componentWillReceiveProps</code> inside the same component.</ul><note><p>Calling <a href="#setstate"><code>setState</code></a> inside <code>UNSAFE_componentWillReceiveProps</code> in a class component to "adjust" state is equivalent to <a href="/reference/react/useState#storing-information-from-previous-renders">calling the <code>set</code> function from <code>useState</code> during rendering</a> in a function component.</p></note></section></section><section class="level3"aria-labelledby="unsafe_componentwillupdatenextprops-nextstate-unsafe_componentwillupdate"><h3 id="unsafe_componentwillupdatenextprops-nextstate-unsafe_componentwillupdate"><code>UNSAFE_componentWillUpdate(nextProps, nextState)</code> {/<em>unsafe_componentwillupdate</em>/}</h3><p>If you define <code>UNSAFE_componentWillUpdate</code>, React will call it before rendering with the new props or state. It only exists for historical reasons and should not be used in any new code. Instead, use one of the alternatives:<ul><li>If you need to run a side effect (for example, fetch data, run an animation, or reinitialize a subscription) in response to prop or state changes, move that logic to <a href="#componentdidupdate"><code>componentDidUpdate</code></a> instead.<li>If you need to read some information from the DOM (for example, to save the current scroll position) so that you can use it in <a href="#componentdidupdate"><code>componentDidUpdate</code></a> later, read it inside <a href="#getsnapshotbeforeupdate"><code>getSnapshotBeforeUpdate</code></a> instead.</ul><p><a href="https://legacy.reactjs.org/blog/2018/03/27/update-on-async-rendering.html#examples">See examples of migrating away from unsafe lifecycles.</a><section class="level4"aria-labelledby="parameters-unsafe_componentwillupdate-parameters"><h4 id="parameters-unsafe_componentwillupdate-parameters">Parameters {/<em>unsafe_componentwillupdate-parameters</em>/}</h4><ul><li><code>nextProps</code>: The next props that the component is about to render with. Compare <code>nextProps</code> to <a href="#props"><code>this.props</code></a> to determine what changed.<li><code>nextState</code>: The next state that the component is about to render with. Compare <code>nextState</code> to <a href="#state"><code>this.state</code></a> to determine what changed.</ul></section><section class="level4"aria-labelledby="returns-unsafe_componentwillupdate-returns"><h4 id="returns-unsafe_componentwillupdate-returns">Returns {/<em>unsafe_componentwillupdate-returns</em>/}</h4><p><code>UNSAFE_componentWillUpdate</code> should not return anything.</section><section class="level4"aria-labelledby="caveats-unsafe_componentwillupdate-caveats"><h4 id="caveats-unsafe_componentwillupdate-caveats">Caveats {/<em>unsafe_componentwillupdate-caveats</em>/}</h4><ul><li><p><code>UNSAFE_componentWillUpdate</code> will not get called if <a href="#shouldcomponentupdate"><code>shouldComponentUpdate</code></a> is defined and returns <code>false</code>.<li><p><code>UNSAFE_componentWillUpdate</code> will not get called if the component implements <a href="#static-getderivedstatefromprops"><code>static getDerivedStateFromProps</code></a> or <a href="#getsnapshotbeforeupdate"><code>getSnapshotBeforeUpdate</code>.</a><li><p>It's not supported to call <a href="#setstate"><code>setState</code></a> (or any method that leads to <code>setState</code> being called, like dispatching a Redux action) during <code>componentWillUpdate</code>.<li><p>Despite its naming, <code>UNSAFE_componentWillUpdate</code> does not guarantee that the component <em>will</em> update if your app uses modern React features like <a href="/reference/react/Suspense"><code>Suspense</code>.</a> If a render attempt is suspended (for example, because the code for some child component has not loaded yet), React will throw the in-progress tree away and attempt to construct the component from scratch during the next attempt. By the time of the next render attempt, the props and state might be different. This is why this method is "unsafe". Code that should run only for committed updates (like resetting a subscription) should go into <a href="#componentdidupdate"><code>componentDidUpdate</code>.</a><li><p><code>UNSAFE_componentWillUpdate</code> does not mean that the component has received <em>different</em> props or state than the last time. You need to compare <code>nextProps</code> with <code>this.props</code> and <code>nextState</code> with <code>this.state</code> yourself to check if something changed.<li><p>React doesn't call <code>UNSAFE_componentWillUpdate</code> with initial props and state during mounting.</ul><note><p>There is no direct equivalent to <code>UNSAFE_componentWillUpdate</code> in function components.</p></note></section></section><section class="level3"aria-labelledby="static-childcontexttypes-static-childcontexttypes"><h3 id="static-childcontexttypes-static-childcontexttypes"><code>static childContextTypes</code> {/<em>static-childcontexttypes</em>/}</h3><deprecated><p>This API will be removed in a future major version of React. <a href="#static-contexttype">Use <code>static contextType</code> instead.</a></p></deprecated><p>Lets you specify which <a href="https://reactjs.org/docs/legacy-context.html">legacy context</a> is provided by this component.</section><section class="level3"aria-labelledby="static-contexttypes-static-contexttypes"><h3 id="static-contexttypes-static-contexttypes"><code>static contextTypes</code> {/<em>static-contexttypes</em>/}</h3><deprecated><p>This API will be removed in a future major version of React. <a href="#static-contexttype">Use <code>static contextType</code> instead.</a></p></deprecated><p>Lets you specify which <a href="https://reactjs.org/docs/legacy-context.html">legacy context</a> is consumed by this component.</section><section class="level3"aria-labelledby="static-contexttype-static-contexttype"><h3 id="static-contexttype-static-contexttype"><code>static contextType</code> {/<em>static-contexttype</em>/}</h3><p>If you want to read <a href="#context-instance-field"><code>this.context</code></a> from your class component, you must specify which context it needs to read. The context you specify as the <code>static contextType</code> must be a value previously created by <a href="/reference/react/createContext"><code>createContext</code>.</a><pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">Button</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> contextType <span class="token operator">=</span> <span class="token maybe-class-name">ThemeContext</span><span class="token punctuation">;</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> theme <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">context</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> className <span class="token operator">=</span> <span class="token string">'button-'</span> <span class="token operator">+</span> theme<span class="token punctuation">;</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&#x3C;</span>button className<span class="token operator">=</span><span class="token punctuation">{</span>className<span class="token punctuation">}</span><span class="token operator">></span>
        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><note><p>Reading <code>this.context</code> in class components is equivalent to <a href="/reference/react/useContext"><code>useContext</code></a> in function components.<p><a href="#migrating-a-component-with-context-from-a-class-to-a-function">See how to migrate.</a></p></note></section><section class="level3"aria-labelledby="static-defaultprops-static-defaultprops"><h3 id="static-defaultprops-static-defaultprops"><code>static defaultProps</code> {/<em>static-defaultprops</em>/}</h3><p>You can define <code>static defaultProps</code> to set the default props for the class. They will be used for <code>undefined</code> and missing props, but not for <code>null</code> props.<p>For example, here is how you define that the <code>color</code> prop should default to <code>'blue'</code>:<pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">Button</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'blue'</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>button className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">color</span><span class="token punctuation">}</span><span class="token operator">></span>click me<span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>If the <code>color</code> prop is not provided or is <code>undefined</code>, it will be set by default to <code>'blue'</code>:<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span><span class="token operator">></span>
  <span class="token punctuation">{</span><span class="token comment">/* this.props.color is "blue" */</span><span class="token punctuation">}</span>
  <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Button</span> <span class="token operator">/</span><span class="token operator">></span>

  <span class="token punctuation">{</span><span class="token comment">/* this.props.color is "blue" */</span><span class="token punctuation">}</span>
  <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Button</span> color<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword nil">undefined</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>

  <span class="token punctuation">{</span><span class="token comment">/* this.props.color is null */</span><span class="token punctuation">}</span>
  <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Button</span> color<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword null nil">null</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>

  <span class="token punctuation">{</span><span class="token comment">/* this.props.color is "red" */</span><span class="token punctuation">}</span>
  <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Button</span> color<span class="token operator">=</span><span class="token string">"red"</span> <span class="token operator">/</span><span class="token operator">></span>
<span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span></code></pre><note><p>Defining <code>defaultProps</code> in class components is similar to using <a href="/learn/passing-props-to-a-component#specifying-a-default-value-for-a-prop">default values</a> in function components.</p></note></section><section class="level3"aria-labelledby="static-getderivedstatefromerrorerror-static-getderivedstatefromerror"><h3 id="static-getderivedstatefromerrorerror-static-getderivedstatefromerror"><code>static getDerivedStateFromError(error)</code> {/<em>static-getderivedstatefromerror</em>/}</h3><p>If you define <code>static getDerivedStateFromError</code>, React will call it when a child component (including distant children) throws an error during rendering. This lets you display an error message instead of clearing the UI.<p>Typically, it is used together with <a href="#componentDidCatch"><code>componentDidCatch</code></a> which lets you send the error report to some analytics service. A component with these methods is called an <em>error boundary.</em><p><a href="#catching-rendering-errors-with-an-error-boundary">See an example.</a><section class="level4"aria-labelledby="parameters-static-getderivedstatefromerror-parameters"><h4 id="parameters-static-getderivedstatefromerror-parameters">Parameters {/<em>static-getderivedstatefromerror-parameters</em>/}</h4><ul><li><code>error</code>: The error that was thrown. In practice, it will usually be an instance of <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error"><code>Error</code></a> but this is not guaranteed because JavaScript allows to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/throw"><code>throw</code></a> any value, including strings or even <code>null</code>.</ul></section><section class="level4"aria-labelledby="returns-static-getderivedstatefromerror-returns"><h4 id="returns-static-getderivedstatefromerror-returns">Returns {/<em>static-getderivedstatefromerror-returns</em>/}</h4><p><code>static getDerivedStateFromError</code> should return the state telling the component to display the error message.</section><section class="level4"aria-labelledby="caveats-static-getderivedstatefromerror-caveats"><h4 id="caveats-static-getderivedstatefromerror-caveats">Caveats {/<em>static-getderivedstatefromerror-caveats</em>/}</h4><ul><li><code>static getDerivedStateFromError</code> should be a pure function. If you want to perform a side effect (for example, to call an analytics service), you need to also implement <a href="#componentdidcatch"><code>componentDidCatch</code>.</a></ul><note><p>There is no direct equivalent for <code>static getDerivedStateFromError</code> in function components yet. If you'd like to avoid creating class components, write a single <code>ErrorBoundary</code> component like above and use it throughout your app. Alternatively, use the <a href="https://github.com/bvaughn/react-error-boundary"><code>react-error-boundary</code></a> package which does that.</p></note></section></section><section class="level3"aria-labelledby="static-getderivedstatefrompropsprops-state-static-getderivedstatefromprops"><h3 id="static-getderivedstatefrompropsprops-state-static-getderivedstatefromprops"><code>static getDerivedStateFromProps(props, state)</code> {/<em>static-getderivedstatefromprops</em>/}</h3><p>If you define <code>static getDerivedStateFromProps</code>, React will call it right before calling <a href="#render"><code>render</code>,</a> both on the initial mount and on subsequent updates. It should return an object to update the state, or <code>null</code> to update nothing.<p>This method exists for <a href="https://legacy.reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html#when-to-use-derived-state">rare use cases</a> where the state depends on changes in props over time. For example, this <code>Form</code> component resets the <code>email</code> state when the <code>userID</code> prop changes:<pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">Form</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">defaultEmail</span><span class="token punctuation">,</span>
    <span class="token literal-property property">prevUserID</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">userID</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">static</span> <span class="token function">getDerivedStateFromProps</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Any time the current user changes,</span>
    <span class="token comment">// Reset any parts of state that are tied to that user.</span>
    <span class="token comment">// In this simple example, that's just the email.</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>props<span class="token punctuation">.</span><span class="token property-access">userID</span> <span class="token operator">!==</span> state<span class="token punctuation">.</span><span class="token property-access">prevUserID</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">prevUserID</span><span class="token operator">:</span> props<span class="token punctuation">.</span><span class="token property-access">userID</span><span class="token punctuation">,</span>
        <span class="token literal-property property">email</span><span class="token operator">:</span> props<span class="token punctuation">.</span><span class="token property-access">defaultEmail</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword control-flow">return</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre><p>Note that this pattern requires you to keep a previous value of the prop (like <code>userID</code>) in state (like <code>prevUserID</code>).</p><pitfall><p>Deriving state leads to verbose code and makes your components difficult to think about. <a href="https://legacy.reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html">Make sure you're familiar with simpler alternatives:</a><ul><li>If you need to <strong>perform a side effect</strong> (for example, data fetching or an animation) in response to a change in props, use <a href="#componentdidupdate"><code>componentDidUpdate</code></a> method instead.<li>If you want to <strong>re-compute some data only when a prop changes,</strong> <a href="https://legacy.reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html#what-about-memoization">use a memoization helper instead.</a><li>If you want to <strong>"reset" some state when a prop changes,</strong> consider either making a component <a href="https://legacy.reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html#recommendation-fully-controlled-component">fully controlled</a> or <a href="https://legacy.reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html#recommendation-fully-uncontrolled-component-with-a-key">fully uncontrolled with a key</a> instead.</ul></pitfall><section class="level4"aria-labelledby="parameters-static-getderivedstatefromprops-parameters"><h4 id="parameters-static-getderivedstatefromprops-parameters">Parameters {/<em>static-getderivedstatefromprops-parameters</em>/}</h4><ul><li><code>props</code>: The next props that the component is about to render with.<li><code>state</code>: The next state that the component is about to render with.</ul></section><section class="level4"aria-labelledby="returns-static-getderivedstatefromprops-returns"><h4 id="returns-static-getderivedstatefromprops-returns">Returns {/<em>static-getderivedstatefromprops-returns</em>/}</h4><p><code>static getDerivedStateFromProps</code> return an object to update the state, or <code>null</code> to update nothing.</section><section class="level4"aria-labelledby="caveats-static-getderivedstatefromprops-caveats"><h4 id="caveats-static-getderivedstatefromprops-caveats">Caveats {/<em>static-getderivedstatefromprops-caveats</em>/}</h4><ul><li><p>This method is fired on <em>every</em> render, regardless of the cause. This is different from <a href="#unsafe_cmoponentwillreceiveprops"><code>UNSAFE_componentWillReceiveProps</code></a>, which only fires when the parent causes a re-render and not as a result of a local <code>setState</code>.<li><p>This method doesn't have access to the component instance. If you'd like, you can reuse some code between <code>static getDerivedStateFromProps</code> and the other class methods by extracting pure functions of the component props and state outside the class definition.</ul><note><p>Implementing <code>static getDerivedStateFromProps</code> in a class component is equivalent to <a href="/reference/react/useState#storing-information-from-previous-renders">calling the <code>set</code> function from <code>useState</code> during rendering</a> in a function component.</p></note></section></section></section><section class="level2"aria-labelledby="usage-usage"><h2 id="usage-usage">Usage {/<em>usage</em>/}</h2><section class="level3"aria-labelledby="defining-a-class-component-defining-a-class-component"><h3 id="defining-a-class-component-defining-a-class-component">Defining a class component {/<em>defining-a-class-component</em>/}</h3><p>To define a React component as a class, extend the built-in <code>Component</code> class and define a <a href="#render"><code>render</code> method:</a><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Component</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Greeting</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Hello</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token operator">!</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>React will call your <a href="#render"><code>render</code></a> method whenever it needs to figure out what to display on the screen. Usually, you will return some <a href="/learn/writing-markup-with-jsx">JSX</a> from it. Your <code>render</code> method should be a <a href="https://en.wikipedia.org/wiki/Pure_function">pure function:</a> it should only calculate the JSX.<p>Similarly to <a href="/learn/your-first-component#defining-a-component">function components,</a> a class component can <a href="/learn/your-first-component#defining-a-component">receive information by props</a> from its parent component. However, the syntax for reading props is different. For example, if the parent component renders <code>&#x3C;Greeting name="Taylor" /></code>, then you can read the <code>name</code> prop from <a href="#props"><code>this.props</code></a>, like <code>this.props.name</code>:</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Component</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Greeting</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Hello</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token operator">!</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Greeting</span> name<span class="token operator">=</span><span class="token string">"Sara"</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Greeting</span> name<span class="token operator">=</span><span class="token string">"Cahal"</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Greeting</span> name<span class="token operator">=</span><span class="token string">"Edite"</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p>Note that Hooks (functions starting with <code>use</code>, like <a href="/reference/react/useState"><code>useState</code></a>) are not supported inside class components.</p><pitfall><p>We recommend defining components as functions instead of classes. <a href="#migrating-a-simple-component-from-a-class-to-a-function">See how to migrate.</a></p></pitfall></section><section class="level3"aria-labelledby="adding-state-to-a-class-component-adding-state-to-a-class-component"><h3 id="adding-state-to-a-class-component-adding-state-to-a-class-component">Adding state to a class component {/<em>adding-state-to-a-class-component</em>/}</h3><p>To add <a href="/learn/state-a-components-memory">state</a> to a class, assign an object to a property called <a href="#state"><code>state</code></a>. To update state, call <a href="#setstate"><code>this.setState</code></a>.</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Component</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">class</span> <span class="token class-name">Counter</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Taylor'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function-variable function">handleNameChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function-variable function">handleAgeChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token property-access">age</span> <span class="token operator">+</span> <span class="token number">1</span> 
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&#x3C;</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span>input
          value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span>
          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">handleNameChange</span><span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">handleAgeChange</span><span class="token punctuation">}</span><span class="token operator">></span>
          <span class="token maybe-class-name">Increment</span> age
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token maybe-class-name">Hello</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token punctuation">.</span> <span class="token property-access"><span class="token maybe-class-name">You</span></span> are <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token property-access">age</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">button</span> <span class="token punctuation">{</span> <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span> <span class="token property">margin-top</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack><pitfall><p>We recommend defining components as functions instead of classes. <a href="#migrating-a-component-with-state-from-a-class-to-a-function">See how to migrate.</a></p></pitfall></section><section class="level3"aria-labelledby="adding-lifecycle-methods-to-a-class-component-adding-lifecycle-methods-to-a-class-component"><h3 id="adding-lifecycle-methods-to-a-class-component-adding-lifecycle-methods-to-a-class-component">Adding lifecycle methods to a class component {/<em>adding-lifecycle-methods-to-a-class-component</em>/}</h3><p>There are a few special methods you can define on your class.<p>If you define the <a href="#componentdidmount"><code>componentDidMount</code></a> method, React will call it when your component is first added <em>(mounted)</em> to the screen. React will call <a href="#componentdidupdate"><code>componentDidUpdate</code></a> after your component re-renders due to changed props or state. React will call <a href="#componentwillunmount"><code>componentWillUnmount</code></a> after your component has been removed <em>(unmounted)</em> from the screen.<p>If you implement <code>componentDidMount</code>, you usually need to implement all three lifecycles to avoid bugs. For example, if <code>componentDidMount</code> reads some state or props, you also have to implement <code>componentDidUpdate</code> to handle their changes, and <code>componentWillUnmount</code> to clean up whatever <code>componentDidMount</code> was doing.<p>For example, this <code>ChatRoom</code> component keeps a chat connection synchronized with props and state:</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">ChatRoom</span></span> <span class="token keyword module">from</span> <span class="token string">'./ChatRoom.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>roomId<span class="token punctuation">,</span> setRoomId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'general'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>show<span class="token punctuation">,</span> setShow<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
        <span class="token maybe-class-name">Choose</span> the chat room<span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">' '</span><span class="token punctuation">}</span>
        <span class="token operator">&#x3C;</span>select
          value<span class="token operator">=</span><span class="token punctuation">{</span>roomId<span class="token punctuation">}</span>
          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token arrow operator">=></span> <span class="token function">setRoomId</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">></span>
          <span class="token operator">&#x3C;</span>option value<span class="token operator">=</span><span class="token string">"general"</span><span class="token operator">></span>general<span class="token operator">&#x3C;</span><span class="token operator">/</span>option<span class="token operator">></span>
          <span class="token operator">&#x3C;</span>option value<span class="token operator">=</span><span class="token string">"travel"</span><span class="token operator">></span>travel<span class="token operator">&#x3C;</span><span class="token operator">/</span>option<span class="token operator">></span>
          <span class="token operator">&#x3C;</span>option value<span class="token operator">=</span><span class="token string">"music"</span><span class="token operator">></span>music<span class="token operator">&#x3C;</span><span class="token operator">/</span>option<span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>select<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">setShow</span><span class="token punctuation">(</span><span class="token operator">!</span>show<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>
        <span class="token punctuation">{</span>show <span class="token operator">?</span> <span class="token string">'Close chat'</span> <span class="token operator">:</span> <span class="token string">'Open chat'</span><span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
      <span class="token punctuation">{</span>show <span class="token operator">&#x26;&#x26;</span> <span class="token operator">&#x3C;</span>hr <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">}</span>
      <span class="token punctuation">{</span>show <span class="token operator">&#x26;&#x26;</span> <span class="token operator">&#x3C;</span><span class="token maybe-class-name">ChatRoom</span> roomId<span class="token operator">=</span><span class="token punctuation">{</span>roomId<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Component</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> createConnection <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./chat.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">class</span> <span class="token class-name">ChatRoom</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">serverUrl</span><span class="token operator">:</span> <span class="token string">'https://localhost:1234'</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">setupConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token parameter">prevProps<span class="token punctuation">,</span> prevState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">roomId</span> <span class="token operator">!==</span> prevProps<span class="token punctuation">.</span><span class="token property-access">roomId</span> <span class="token operator">||</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token property-access">serverUrl</span> <span class="token operator">!==</span> prevState<span class="token punctuation">.</span><span class="token property-access">serverUrl</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">destroyConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">setupConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">destroyConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">setupConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">connection</span> <span class="token operator">=</span> <span class="token function">createConnection</span><span class="token punctuation">(</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token property-access">serverUrl</span><span class="token punctuation">,</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">roomId</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">connection</span><span class="token punctuation">.</span><span class="token method function property-access">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
  <span class="token punctuation">}</span>

  <span class="token function">destroyConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">connection</span><span class="token punctuation">.</span><span class="token method function property-access">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">connection</span> <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&#x3C;</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
          <span class="token maybe-class-name">Server</span> <span class="token constant">URL</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">' '</span><span class="token punctuation">}</span>
          <span class="token operator">&#x3C;</span>input
            value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token property-access">serverUrl</span><span class="token punctuation">}</span>
            onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
              <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">serverUrl</span><span class="token operator">:</span> e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span>
              <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Welcome</span> to the <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">roomId</span><span class="token punctuation">}</span> room<span class="token operator">!</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">createConnection</span><span class="token punctuation">(</span><span class="token parameter">serverUrl<span class="token punctuation">,</span> roomId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// A real implementation would actually connect to the server</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
    <span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">' Connecting to "'</span> <span class="token operator">+</span> roomId <span class="token operator">+</span> <span class="token string">'" room at '</span> <span class="token operator">+</span> serverUrl <span class="token operator">+</span> <span class="token string">'...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">' Disconnected from "'</span> <span class="token operator">+</span> roomId <span class="token operator">+</span> <span class="token string">'" room at '</span> <span class="token operator">+</span> serverUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">input</span> <span class="token punctuation">{</span> <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span> <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">button</span> <span class="token punctuation">{</span> <span class="token property">margin-left</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack><p>Note that in development when <a href="/reference/react/StrictMode">Strict Mode</a> is on, React will call <code>componentDidMount</code>, immediately call <code>componentWillUnmount</code>, and then call <code>componentDidMount</code> again. This helps you notice if you forgot to implement <code>componentWillUnmount</code> or if its logic doesn't fully "mirror" what <code>componentDidMount</code> does.</p><pitfall><p>We recommend defining components as functions instead of classes. <a href="#migrating-a-component-with-lifecycle-methods-from-a-class-to-a-function">See how to migrate.</a></p></pitfall></section><section class="level3"aria-labelledby="catching-rendering-errors-with-an-error-boundary-catching-rendering-errors-with-an-error-boundary"><h3 id="catching-rendering-errors-with-an-error-boundary-catching-rendering-errors-with-an-error-boundary">Catching rendering errors with an error boundary {/<em>catching-rendering-errors-with-an-error-boundary</em>/}</h3><p>By default, if your application throws an error during rendering, React will remove its UI from the screen. To prevent this, you can wrap a part of your UI into an <em>error boundary</em>. An error boundary is a special component that lets you display some fallback UI instead of the part that crashed--for example, an error message.<p>To implement an error boundary component, you need to provide <a href="#static-getderivedstatefromerror"><code>static getDerivedStateFromError</code></a> which lets you update state in response to an error and display an error message to the user. You can also optionally implement <a href="#componentdidcatch"><code>componentDidCatch</code></a> to add some extra logic, for example, to log the error to an analytics service.<pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">ErrorBoundary</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">hasError</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token function">getDerivedStateFromError</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Update state so the next render will show the fallback UI.</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">hasError</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentDidCatch</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> info</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Example "componentStack":</span>
    <span class="token comment">//   in ComponentThatThrows (created by App)</span>
    <span class="token comment">//   in ErrorBoundary (created by App)</span>
    <span class="token comment">//   in div (created by App)</span>
    <span class="token comment">//   in App</span>
    <span class="token function">logErrorToMyService</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span> info<span class="token punctuation">.</span><span class="token property-access">componentStack</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token property-access">hasError</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// You can render any custom fallback UI</span>
      <span class="token keyword control-flow">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">fallback</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword control-flow">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>Then you can wrap a part of your component tree with it:<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">ErrorBoundary</span> fallback<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token maybe-class-name">Something</span> went wrong<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span><span class="token punctuation">}</span><span class="token operator">></span>
  <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Profile</span> <span class="token operator">/</span><span class="token operator">></span>
<span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">ErrorBoundary</span><span class="token operator">></span></code></pre><p>If <code>Profile</code> or its child component throws an error, <code>ErrorBoundary</code> will "catch" that error, display a fallback UI with the error message you've provided, and send a production error report to your error reporting service.<p>You don't need to wrap every component into a separate error boundary. When you think about the <a href="https://aweary.dev/fault-tolerance-react/">granularity of error boundaries,</a> consider where it makes sense to display an error message. For example, in a messaging app, it makes sense to place an error boundary around the list of conversations. It also makes sense to place one around every individual message. However, it wouldn't make sense to place a boundary around every avatar.</p><note><p>There is currently no way to write an error boundary as a function component. However, you don't have to write the error boundary class yourself. For example, you can use <a href="https://github.com/bvaughn/react-error-boundary"><code>react-error-boundary</code></a> instead.</p></note></section></section><section class="level2"aria-labelledby="alternatives-alternatives"><h2 id="alternatives-alternatives">Alternatives {/<em>alternatives</em>/}</h2><section class="level3"aria-labelledby="migrating-a-simple-component-from-a-class-to-a-function-migrating-a-simple-component-from-a-class-to-a-function"><h3 id="migrating-a-simple-component-from-a-class-to-a-function-migrating-a-simple-component-from-a-class-to-a-function">Migrating a simple component from a class to a function {/<em>migrating-a-simple-component-from-a-class-to-a-function</em>/}</h3><p>Typically, you will <a href="/learn/your-first-component#defining-a-component">define components as functions</a> instead.<p>For example, suppose you're converting this <code>Greeting</code> class component to a function:</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Component</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Greeting</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Hello</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token operator">!</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Greeting</span> name<span class="token operator">=</span><span class="token string">"Sara"</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Greeting</span> name<span class="token operator">=</span><span class="token string">"Cahal"</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Greeting</span> name<span class="token operator">=</span><span class="token string">"Edite"</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p>Define a function called <code>Greeting</code>. This is where you will move the body of your <code>render</code> function.<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Greeting</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ... move the code from the render method here ...</span>
<span class="token punctuation">}</span></code></pre><p>Instead of <code>this.props.name</code>, define the <code>name</code> prop <a href="/learn/passing-props-to-a-component">using the destructuring syntax</a> and read it directly:<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Greeting</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> name <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Hello</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">!</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>Here is a complete example:</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Greeting</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> name <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Hello</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">!</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Greeting</span> name<span class="token operator">=</span><span class="token string">"Sara"</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Greeting</span> name<span class="token operator">=</span><span class="token string">"Cahal"</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Greeting</span> name<span class="token operator">=</span><span class="token string">"Edite"</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack></section><section class="level3"aria-labelledby="migrating-a-component-with-state-from-a-class-to-a-function-migrating-a-component-with-state-from-a-class-to-a-function"><h3 id="migrating-a-component-with-state-from-a-class-to-a-function-migrating-a-component-with-state-from-a-class-to-a-function">Migrating a component with state from a class to a function {/<em>migrating-a-component-with-state-from-a-class-to-a-function</em>/}</h3><p>Suppose you're converting this <code>Counter</code> class component to a function:</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Component</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">class</span> <span class="token class-name">Counter</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Taylor'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function-variable function">handleNameChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function-variable function">handleAgeChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token property-access">age</span> <span class="token operator">+</span> <span class="token number">1</span> 
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&#x3C;</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span>input
          value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span>
          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">handleNameChange</span><span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">handleAgeChange</span><span class="token punctuation">}</span><span class="token operator">></span>
          <span class="token maybe-class-name">Increment</span> age
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token maybe-class-name">Hello</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token punctuation">.</span> <span class="token property-access"><span class="token maybe-class-name">You</span></span> are <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token property-access">age</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">button</span> <span class="token punctuation">{</span> <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span> <span class="token property">margin-top</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack><p>Start by declaring a function with the necessary <a href="/reference/react/useState#adding-state-to-a-component">state variables:</a><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Counter</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>name<span class="token punctuation">,</span> setName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'Taylor'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>age<span class="token punctuation">,</span> setAge<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span></code></pre><p>Next, convert the event handlers:<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Counter</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>name<span class="token punctuation">,</span> setName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'Taylor'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>age<span class="token punctuation">,</span> setAge<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">handleNameChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setName</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">handleAgeChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setAge</span><span class="token punctuation">(</span>age <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span></code></pre><p>Finally, replace all references starting with <code>this</code> with the variables and functions you defined in your component. For example, replace <code>this.state.age</code> with <code>age</code>, and replace <code>this.handleNameChange</code> with <code>handleNameChange</code>.<p>Here is a fully converted component:</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Counter</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>name<span class="token punctuation">,</span> setName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'Taylor'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>age<span class="token punctuation">,</span> setAge<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">handleNameChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setName</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">handleAgeChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setAge</span><span class="token punctuation">(</span>age <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>input
        value<span class="token operator">=</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span>
        onChange<span class="token operator">=</span><span class="token punctuation">{</span>handleNameChange<span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleAgeChange<span class="token punctuation">}</span><span class="token operator">></span>
        <span class="token maybe-class-name">Increment</span> age
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token maybe-class-name">Hello</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">.</span> <span class="token property-access"><span class="token maybe-class-name">You</span></span> are <span class="token punctuation">{</span>age<span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">button</span> <span class="token punctuation">{</span> <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span> <span class="token property">margin-top</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack></section><section class="level3"aria-labelledby="migrating-a-component-with-lifecycle-methods-from-a-class-to-a-function-migrating-a-component-with-lifecycle-methods-from-a-class-to-a-function"><h3 id="migrating-a-component-with-lifecycle-methods-from-a-class-to-a-function-migrating-a-component-with-lifecycle-methods-from-a-class-to-a-function">Migrating a component with lifecycle methods from a class to a function {/<em>migrating-a-component-with-lifecycle-methods-from-a-class-to-a-function</em>/}</h3><p>Suppose you're converting this <code>ChatRoom</code> class component with lifecycle methods to a function:</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">ChatRoom</span></span> <span class="token keyword module">from</span> <span class="token string">'./ChatRoom.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>roomId<span class="token punctuation">,</span> setRoomId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'general'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>show<span class="token punctuation">,</span> setShow<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
        <span class="token maybe-class-name">Choose</span> the chat room<span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">' '</span><span class="token punctuation">}</span>
        <span class="token operator">&#x3C;</span>select
          value<span class="token operator">=</span><span class="token punctuation">{</span>roomId<span class="token punctuation">}</span>
          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token arrow operator">=></span> <span class="token function">setRoomId</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">></span>
          <span class="token operator">&#x3C;</span>option value<span class="token operator">=</span><span class="token string">"general"</span><span class="token operator">></span>general<span class="token operator">&#x3C;</span><span class="token operator">/</span>option<span class="token operator">></span>
          <span class="token operator">&#x3C;</span>option value<span class="token operator">=</span><span class="token string">"travel"</span><span class="token operator">></span>travel<span class="token operator">&#x3C;</span><span class="token operator">/</span>option<span class="token operator">></span>
          <span class="token operator">&#x3C;</span>option value<span class="token operator">=</span><span class="token string">"music"</span><span class="token operator">></span>music<span class="token operator">&#x3C;</span><span class="token operator">/</span>option<span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>select<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">setShow</span><span class="token punctuation">(</span><span class="token operator">!</span>show<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>
        <span class="token punctuation">{</span>show <span class="token operator">?</span> <span class="token string">'Close chat'</span> <span class="token operator">:</span> <span class="token string">'Open chat'</span><span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
      <span class="token punctuation">{</span>show <span class="token operator">&#x26;&#x26;</span> <span class="token operator">&#x3C;</span>hr <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">}</span>
      <span class="token punctuation">{</span>show <span class="token operator">&#x26;&#x26;</span> <span class="token operator">&#x3C;</span><span class="token maybe-class-name">ChatRoom</span> roomId<span class="token operator">=</span><span class="token punctuation">{</span>roomId<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Component</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> createConnection <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./chat.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">class</span> <span class="token class-name">ChatRoom</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">serverUrl</span><span class="token operator">:</span> <span class="token string">'https://localhost:1234'</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">setupConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token parameter">prevProps<span class="token punctuation">,</span> prevState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">roomId</span> <span class="token operator">!==</span> prevProps<span class="token punctuation">.</span><span class="token property-access">roomId</span> <span class="token operator">||</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token property-access">serverUrl</span> <span class="token operator">!==</span> prevState<span class="token punctuation">.</span><span class="token property-access">serverUrl</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">destroyConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">setupConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">destroyConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">setupConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">connection</span> <span class="token operator">=</span> <span class="token function">createConnection</span><span class="token punctuation">(</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token property-access">serverUrl</span><span class="token punctuation">,</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">roomId</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">connection</span><span class="token punctuation">.</span><span class="token method function property-access">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
  <span class="token punctuation">}</span>

  <span class="token function">destroyConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">connection</span><span class="token punctuation">.</span><span class="token method function property-access">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">connection</span> <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&#x3C;</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
          <span class="token maybe-class-name">Server</span> <span class="token constant">URL</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">' '</span><span class="token punctuation">}</span>
          <span class="token operator">&#x3C;</span>input
            value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token property-access">serverUrl</span><span class="token punctuation">}</span>
            onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
              <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">serverUrl</span><span class="token operator">:</span> e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span>
              <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Welcome</span> to the <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">roomId</span><span class="token punctuation">}</span> room<span class="token operator">!</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">createConnection</span><span class="token punctuation">(</span><span class="token parameter">serverUrl<span class="token punctuation">,</span> roomId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// A real implementation would actually connect to the server</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
    <span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">' Connecting to "'</span> <span class="token operator">+</span> roomId <span class="token operator">+</span> <span class="token string">'" room at '</span> <span class="token operator">+</span> serverUrl <span class="token operator">+</span> <span class="token string">'...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">' Disconnected from "'</span> <span class="token operator">+</span> roomId <span class="token operator">+</span> <span class="token string">'" room at '</span> <span class="token operator">+</span> serverUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">input</span> <span class="token punctuation">{</span> <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span> <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">button</span> <span class="token punctuation">{</span> <span class="token property">margin-left</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack><p>First, verify that your <a href="#componentwillunmount"><code>componentWillUnmount</code></a> does the opposite of <a href="#componentdidmount"><code>componentDidMount</code>.</a> In the above example, that's true: it disconnects the connection that <code>componentDidMount</code> sets up. If such logic is missing, add it first.<p>Next, verify that your <a href="#componentdidupdate"><code>componentDidUpdate</code></a> method handles changes to any props and state you're using in <code>componentDidMount</code>. In the above example, <code>componentDidMount</code> calls <code>setupConnection</code> which reads <code>this.state.serverUrl</code> and <code>this.props.roomId</code>. This is why <code>componentDidUpdate</code> checks whether <code>this.state.serverUrl</code> and <code>this.props.roomId</code> have changed, and resets the connection if they did. If your <code>componentDidUpdate</code> logic is missing or doesn't handle changes to all relevant props and state, fix that first.<p>In the above example, the logic inside the lifecycle methods connects the component to a system outside of React (a chat server). To connect a component to an external system, <a href="/reference/react/useEffect#connecting-to-an-external-system">describe this logic as a single Effect:</a><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">ChatRoom</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> roomId <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>serverUrl<span class="token punctuation">,</span> setServerUrl<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'https://localhost:1234'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> connection <span class="token operator">=</span> <span class="token function">createConnection</span><span class="token punctuation">(</span>serverUrl<span class="token punctuation">,</span> roomId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    connection<span class="token punctuation">.</span><span class="token method function property-access">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
      connection<span class="token punctuation">.</span><span class="token method function property-access">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>serverUrl<span class="token punctuation">,</span> roomId<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre><p>This <a href="/reference/react/useEffect"><code>useEffect</code></a> call is equivalent to the logic in the lifecycle methods above. If your lifecycle methods do multiple unrelated things, <a href="/learn/removing-effect-dependencies#is-your-effect-doing-several-unrelated-things">split them into multiple independent Effects.</a> Here is a complete example you can play with:</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">ChatRoom</span></span> <span class="token keyword module">from</span> <span class="token string">'./ChatRoom.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>roomId<span class="token punctuation">,</span> setRoomId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'general'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>show<span class="token punctuation">,</span> setShow<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
        <span class="token maybe-class-name">Choose</span> the chat room<span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">' '</span><span class="token punctuation">}</span>
        <span class="token operator">&#x3C;</span>select
          value<span class="token operator">=</span><span class="token punctuation">{</span>roomId<span class="token punctuation">}</span>
          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token arrow operator">=></span> <span class="token function">setRoomId</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">></span>
          <span class="token operator">&#x3C;</span>option value<span class="token operator">=</span><span class="token string">"general"</span><span class="token operator">></span>general<span class="token operator">&#x3C;</span><span class="token operator">/</span>option<span class="token operator">></span>
          <span class="token operator">&#x3C;</span>option value<span class="token operator">=</span><span class="token string">"travel"</span><span class="token operator">></span>travel<span class="token operator">&#x3C;</span><span class="token operator">/</span>option<span class="token operator">></span>
          <span class="token operator">&#x3C;</span>option value<span class="token operator">=</span><span class="token string">"music"</span><span class="token operator">></span>music<span class="token operator">&#x3C;</span><span class="token operator">/</span>option<span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>select<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">setShow</span><span class="token punctuation">(</span><span class="token operator">!</span>show<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>
        <span class="token punctuation">{</span>show <span class="token operator">?</span> <span class="token string">'Close chat'</span> <span class="token operator">:</span> <span class="token string">'Open chat'</span><span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
      <span class="token punctuation">{</span>show <span class="token operator">&#x26;&#x26;</span> <span class="token operator">&#x3C;</span>hr <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">}</span>
      <span class="token punctuation">{</span>show <span class="token operator">&#x26;&#x26;</span> <span class="token operator">&#x3C;</span><span class="token maybe-class-name">ChatRoom</span> roomId<span class="token operator">=</span><span class="token punctuation">{</span>roomId<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> createConnection <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./chat.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">ChatRoom</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> roomId <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>serverUrl<span class="token punctuation">,</span> setServerUrl<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'https://localhost:1234'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> connection <span class="token operator">=</span> <span class="token function">createConnection</span><span class="token punctuation">(</span>serverUrl<span class="token punctuation">,</span> roomId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    connection<span class="token punctuation">.</span><span class="token method function property-access">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
      connection<span class="token punctuation">.</span><span class="token method function property-access">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>roomId<span class="token punctuation">,</span> serverUrl<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
        <span class="token maybe-class-name">Server</span> <span class="token constant">URL</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">' '</span><span class="token punctuation">}</span>
        <span class="token operator">&#x3C;</span>input
          value<span class="token operator">=</span><span class="token punctuation">{</span>serverUrl<span class="token punctuation">}</span>
          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token arrow operator">=></span> <span class="token function">setServerUrl</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Welcome</span> to the <span class="token punctuation">{</span>roomId<span class="token punctuation">}</span> room<span class="token operator">!</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">createConnection</span><span class="token punctuation">(</span><span class="token parameter">serverUrl<span class="token punctuation">,</span> roomId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// A real implementation would actually connect to the server</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
    <span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">' Connecting to "'</span> <span class="token operator">+</span> roomId <span class="token operator">+</span> <span class="token string">'" room at '</span> <span class="token operator">+</span> serverUrl <span class="token operator">+</span> <span class="token string">'...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">' Disconnected from "'</span> <span class="token operator">+</span> roomId <span class="token operator">+</span> <span class="token string">'" room at '</span> <span class="token operator">+</span> serverUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">input</span> <span class="token punctuation">{</span> <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span> <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">button</span> <span class="token punctuation">{</span> <span class="token property">margin-left</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack><note><p>If your component does not synchronize with any external systems, <a href="/learn/you-might-not-need-an-effect">you might not need an Effect.</a></p></note></section><section class="level3"aria-labelledby="migrating-a-component-with-context-from-a-class-to-a-function-migrating-a-component-with-context-from-a-class-to-a-function"><h3 id="migrating-a-component-with-context-from-a-class-to-a-function-migrating-a-component-with-context-from-a-class-to-a-function">Migrating a component with context from a class to a function {/<em>migrating-a-component-with-context-from-a-class-to-a-function</em>/}</h3><p>In this example, the <code>Panel</code> and <code>Button</code> class components read <a href="/learn/passing-data-deeply-with-context">context</a> from <a href="#context"><code>this.context</code>:</a></p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> createContext<span class="token punctuation">,</span> <span class="token maybe-class-name">Component</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token maybe-class-name">ThemeContext</span> <span class="token operator">=</span> <span class="token function">createContext</span><span class="token punctuation">(</span><span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Panel</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> contextType <span class="token operator">=</span> <span class="token maybe-class-name">ThemeContext</span><span class="token punctuation">;</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> theme <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">context</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> className <span class="token operator">=</span> <span class="token string">'panel-'</span> <span class="token operator">+</span> theme<span class="token punctuation">;</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&#x3C;</span>section className<span class="token operator">=</span><span class="token punctuation">{</span>className<span class="token punctuation">}</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">title</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>section<span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>    
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Button</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> contextType <span class="token operator">=</span> <span class="token maybe-class-name">ThemeContext</span><span class="token punctuation">;</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> theme <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">context</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> className <span class="token operator">=</span> <span class="token string">'button-'</span> <span class="token operator">+</span> theme<span class="token punctuation">;</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&#x3C;</span>button className<span class="token operator">=</span><span class="token punctuation">{</span>className<span class="token punctuation">}</span><span class="token operator">></span>
        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Form</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Panel</span> title<span class="token operator">=</span><span class="token string">"Welcome"</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Button</span><span class="token operator">></span><span class="token maybe-class-name">Sign</span> up<span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Button</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Button</span><span class="token operator">></span><span class="token maybe-class-name">Log</span> <span class="token keyword">in</span><span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Button</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Panel</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyApp</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token maybe-class-name">ThemeContext</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Provider</span></span> value<span class="token operator">=</span><span class="token string">"dark"</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Form</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">ThemeContext</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Provider</span></span><span class="token operator">></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector"><span class="token class">.panel-light</span><span class="token punctuation">,</span>
<span class="token class">.panel-dark</span></span> <span class="token punctuation">{</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token unit">px</span> solid <span class="token color">black</span><span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token number">4</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token unit">px</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.panel-light</span></span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token hexcode color">#222</span><span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token hexcode color">#fff</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">.panel-dark</span></span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token hexcode color">#fff</span><span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token color"><span class="token function">rgb</span><span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">.button-light</span><span class="token punctuation">,</span>
<span class="token class">.button-dark</span></span> <span class="token punctuation">{</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token unit">px</span> solid <span class="token hexcode color">#777</span><span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">margin-right</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">margin-top</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">.button-dark</span></span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token hexcode color">#222</span><span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token hexcode color">#fff</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">.button-light</span></span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token hexcode color">#fff</span><span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token hexcode color">#222</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p>When you convert them to function components, replace <code>this.context</code> with <a href="/reference/react/useContext"><code>useContext</code></a> calls:</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> createContext<span class="token punctuation">,</span> useContext <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token maybe-class-name">ThemeContext</span> <span class="token operator">=</span> <span class="token function">createContext</span><span class="token punctuation">(</span><span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Panel</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> title<span class="token punctuation">,</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> theme <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span><span class="token maybe-class-name">ThemeContext</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> className <span class="token operator">=</span> <span class="token string">'panel-'</span> <span class="token operator">+</span> theme<span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>section className<span class="token operator">=</span><span class="token punctuation">{</span>className<span class="token punctuation">}</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token punctuation">{</span>children<span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>section<span class="token operator">></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Button</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> theme <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span><span class="token maybe-class-name">ThemeContext</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> className <span class="token operator">=</span> <span class="token string">'button-'</span> <span class="token operator">+</span> theme<span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>button className<span class="token operator">=</span><span class="token punctuation">{</span>className<span class="token punctuation">}</span><span class="token operator">></span>
      <span class="token punctuation">{</span>children<span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Form</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Panel</span> title<span class="token operator">=</span><span class="token string">"Welcome"</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Button</span><span class="token operator">></span><span class="token maybe-class-name">Sign</span> up<span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Button</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Button</span><span class="token operator">></span><span class="token maybe-class-name">Log</span> <span class="token keyword">in</span><span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Button</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Panel</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyApp</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token maybe-class-name">ThemeContext</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Provider</span></span> value<span class="token operator">=</span><span class="token string">"dark"</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Form</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">ThemeContext</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Provider</span></span><span class="token operator">></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector"><span class="token class">.panel-light</span><span class="token punctuation">,</span>
<span class="token class">.panel-dark</span></span> <span class="token punctuation">{</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token unit">px</span> solid <span class="token color">black</span><span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token number">4</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token unit">px</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.panel-light</span></span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token hexcode color">#222</span><span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token hexcode color">#fff</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">.panel-dark</span></span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token hexcode color">#fff</span><span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token color"><span class="token function">rgb</span><span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">.button-light</span><span class="token punctuation">,</span>
<span class="token class">.button-dark</span></span> <span class="token punctuation">{</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token unit">px</span> solid <span class="token hexcode color">#777</span><span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">margin-right</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">margin-top</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">.button-dark</span></span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token hexcode color">#222</span><span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token hexcode color">#fff</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">.button-light</span></span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token hexcode color">#fff</span><span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token hexcode color">#222</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><span style="float:footnote"><a href="../../index.html#toc">Go to TOC</a></span></section></section></inlinetoc></section>
<!doctype html><html lang="zh-hans"><meta charset="utf-8"><title>"&#x3C;textarea>"</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="textarea"><h1 id="textarea">"<textarea>"</textarea><intro><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/textarea">æµè§ˆå™¨å†…ç½®çš„ <code>&#x3C;textarea></code> ç»„ä»¶</a> å…è®¸ä½ æ¸²æŸ“ä¸€ä¸ªå¤šè¡Œæ–‡æœ¬è¾“å…¥æ¡†ã€‚<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span>textarea <span class="token operator">/</span><span class="token operator">></span></code></pre></intro><inlinetoc><section class="level2"aria-labelledby="å‚è€ƒ-reference"><h2 id="å‚è€ƒ-reference">å‚è€ƒ {/<em>reference</em>/}</h2><section class="level3"aria-labelledby="textarea-textarea"><h3 id="textarea-textarea"><code>&#x3C;textarea></code> {/<em>textarea</em>/}</h3><p>ä½¿ç”¨ <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/textarea">æµè§ˆå™¨å†…ç½®çš„ <code>&#x3C;textarea></code> ç»„ä»¶</a> æ¸²æŸ“ä¸€ä¸ªå¤šè¡Œæ–‡æœ¬è¾“å…¥æ¡†ã€‚<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span>textarea name<span class="token operator">=</span><span class="token string">"postContent"</span> <span class="token operator">/</span><span class="token operator">></span></code></pre><p><a href="#usage">å‚è§ä¸‹é¢æ›´å¤šç¤ºä¾‹</a>ã€‚<section class="level4"aria-labelledby="å±æ€§-props"><h4 id="å±æ€§-props">å±æ€§ {/<em>props</em>/}</h4><p><code>&#x3C;textarea></code> æ”¯æŒæ‰€æœ‰ <a href="/reference/react-dom/components/common#props">å¸¸è§çš„å…ƒç´ å±æ€§</a>ã€‚<p>ä½ å¯ä»¥é€šè¿‡ä¼ é€’ <code>value</code> å±æ€§ <a href="#controlling-a-text-area-with-a-state-variable">ä»¥æ§åˆ¶æ–‡æœ¬æ¡†</a>ã€‚<ul><li><code>value</code>ï¼šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç”¨äºæ§åˆ¶æ–‡æœ¬æ¡†å†…çš„æ–‡æœ¬ã€‚</ul><p>å½“ä½ ä¼ é€’ <code>value</code> æ—¶ï¼Œä½ å¿…é¡»åŒæ—¶ä¼ é€’ä¸€ä¸ª <code>onChange</code> å¤„ç†å‡½æ•°ï¼Œç”¨äºæ›´æ–°ä¼ é€’çš„å€¼ã€‚<p>å¦‚æœ <code>&#x3C;textarea></code> æ˜¯éå—æ§ç»„ä»¶ï¼Œé‚£ä¹ˆä½ åº”è¯¥ä¼ é€’ <code>defaultValue</code> å‚æ•°ï¼š<ul><li><code>defaultValue</code>ï¼šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæ–‡æœ¬æ¡†çš„ <a href="#providing-an-initial-value-for-a-text-area">åˆå§‹å€¼</a>ã€‚</ul><p>ä»¥ä¸‹ <code>&#x3C;textarea></code> å±æ€§å‡å¯ç”¨äºå—æ§ä¸éå—æ§ç»„ä»¶ï¼š<ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/textarea#autocomplete"><code>autoComplete</code></a>ï¼šå¯ä»¥ä¸º <code>'on'</code> æˆ– <code>'off'</code>ï¼Œè¡¨ç¤ºè‡ªåŠ¨å®Œæˆçš„è¡Œä¸ºã€‚<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/textarea#autofocus"><code>autoFocus</code></a>ï¼šå¸ƒå°”å€¼ã€‚å¦‚æœä¸º <code>true</code>ï¼ŒReact å°†åœ¨æŒ‚è½½æ—¶èšç„¦è¯¥å…ƒç´ ã€‚<li><code>children</code>ï¼š<code>&#x3C;textarea></code> ä¸æ¥å—å­å…ƒç´ ï¼Œå¦‚æœè¦è®¾ç½®åˆå§‹å€¼ï¼Œè¯·ä½¿ç”¨ <code>defaultValue</code>ã€‚<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/textarea#cols"><code>cols</code></a>ï¼šæ•°å­—ï¼Œè¡¨ç¤ºé»˜è®¤å®½åº¦ï¼Œä»¥å¹³å‡å­—ç¬¦å®½åº¦è®¡ç®—ã€‚é»˜è®¤ä¸º <code>20</code>ã€‚<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/textarea#disabled"><code>disabled</code></a>ï¼šå¸ƒå°”å€¼ã€‚å¦‚æœä¸º <code>true</code>ï¼Œåˆ™è¾“å…¥æ¡†å°†ä¸å¯äº¤äº’ä¸”æ˜¾ç¤ºä¸ºç¦ç”¨çŠ¶æ€ï¼ˆdimmedï¼‰ã€‚<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/textarea#form"><code>form</code></a>ï¼šå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæ­¤æ–‡æœ¬æ¡†æ‰€å±çš„ <code>&#x3C;form></code> çš„ <code>id</code>ã€‚å¦‚æœæœªæŒ‡å®šï¼Œåˆ™ä¸ºæœ€è¿‘çš„çˆ¶è¡¨å•ã€‚<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/textarea#maxlength"><code>maxLength</code></a>ï¼šæ•°å­—ï¼Œè¡¨ç¤ºæ–‡æœ¬çš„æœ€å¤§é•¿åº¦ã€‚<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/textarea#minlength"><code>minLength</code></a>ï¼šæ•°å­—ï¼Œè¡¨ç¤ºæ–‡æœ¬çš„æœ€å°é•¿åº¦ã€‚<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/input#name"><code>name</code></a>ï¼šå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºåœ¨è¡¨å•æäº¤æ—¶ä¸æ­¤è¾“å…¥æ¡†å…³è”çš„åç§°ã€‚<li><code>onChange</code>ï¼šä¸€ä¸ª <a href="/reference/react-dom/components/common#event-handler"><code>Event</code> å¤„ç†å‡½æ•°</a>ã€‚å¯¹äº <a href="#controlling-a-text-area-with-a-state-variable">å—æ§æ–‡æœ¬æ¡†</a>ï¼Œåœ¨ç”¨æˆ·æ›´æ”¹è¾“å…¥å€¼æ—¶ç«‹å³è§¦å‘ï¼ˆä¾‹å¦‚ï¼Œå¯¹äºæ¯ä¸ªæŒ‰é”®ï¼‰ã€‚æ­¤è¡Œä¸ºç±»ä¼¼äºæµè§ˆå™¨ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/input_event"><code>input</code> äº‹ä»¶</a>ã€‚<li><code>onChangeCapture</code>ï¼šä¸ <code>onChange</code> ç±»ä¼¼ï¼Œä½†æ˜¯æ˜¯åœ¨ <a href="/learn/responding-to-events#capture-phase-events">æ•è·é˜¶æ®µ</a> è§¦å‘ã€‚<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/input_event"><code>onInput</code></a>ï¼šä¸€ä¸ª <a href="/reference/react-dom/components/common#event-handler"><code>Event</code> å¤„ç†å‡½æ•°</a>ã€‚åœ¨ç”¨æˆ·æ›´æ”¹å€¼æ—¶ç«‹å³è§¦å‘ã€‚ç”±äºå†å²åŸå› ï¼Œåœ¨ React ä¹ æƒ¯äºä½¿ç”¨å·¥ä½œæ–¹å¼ç±»ä¼¼çš„ <code>onChange</code>ã€‚<li><code>onInputCapture</code>ï¼šä¸ <code>onInput</code> ç±»ä¼¼ï¼Œä½†æ˜¯æ˜¯åœ¨ <a href="/learn/responding-to-events#capture-phase-events">æ•è·é˜¶æ®µ</a> è§¦å‘ã€‚<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLInputElement/invalid_event"><code>onInvalid</code></a>ï¼šä¸€ä¸ª <a href="/reference/react-dom/components/common#event-handler"><code>Event</code> å¤„ç†å‡½æ•°</a>ã€‚å¦‚æœè¾“å…¥çš„å†…å®¹åœ¨è¡¨å•æäº¤æ—¶æœªé€šè¿‡éªŒè¯ï¼Œåˆ™ä¼šè§¦å‘æ­¤äº‹ä»¶ã€‚ä¸å†…ç½®çš„ <code>invalid</code> äº‹ä»¶ä¸åŒï¼ŒReact çš„ <code>onInvalid</code> äº‹ä»¶å¯ä»¥è¿›è¡Œå†’æ³¡ã€‚<li><code>onInvalidCapture</code>ï¼šä¸ <code>onInvalid</code> ç±»ä¼¼ï¼Œä½†æ˜¯æ˜¯åœ¨ <a href="/learn/responding-to-events#capture-phase-events">æ•è·é˜¶æ®µ</a> è§¦å‘ã€‚<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLTextAreaElement/select_event"><code>onSelect</code></a>ï¼šä¸€ä¸ª <a href="/reference/react-dom/components/common#event-handler"><code>Event</code> å¤„ç†å‡½æ•°</a>ã€‚å½“ <code>&#x3C;textarea></code> çš„é€‰æ‹©å†…å®¹å‘ç”Ÿå˜åŒ–åè§¦å‘ã€‚React æ‰©å±•äº† <code>onSelect</code> äº‹ä»¶ï¼Œè¿˜ä¼šåœ¨ç©ºé€‰æ‹©å’Œç¼–è¾‘ï¼ˆå¯èƒ½ä¼šå½±å“é€‰æ‹©ï¼‰æ—¶è§¦å‘ã€‚<li><code>onSelectCapture</code>: ä¸ <code>onSelect</code> ç±»ä¼¼ï¼Œä½†æ˜¯æ˜¯åœ¨ <a href="/learn/responding-to-events#capture-phase-events">æ•è·é˜¶æ®µ</a> è§¦å‘ã€‚<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/textarea#placeholder"><code>placeholder</code></a>ï¼šå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºå½“æ–‡æœ¬æ¡†çš„å€¼ä¸ºç©ºæ—¶ï¼Œä»¥æ·¡è‰²æ˜¾ç¤ºçš„å ä½ç¬¦ã€‚<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/textarea#readonly"><code>readOnly</code></a>ï¼šå¸ƒå°”å€¼ï¼Œå¦‚æœä¸º <code>true</code>ï¼Œæ–‡æœ¬æ¡†å°†æ— æ³•è¢«ç”¨æˆ·ç¼–è¾‘ã€‚<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/textarea#required"><code>required</code></a>ï¼šå¸ƒå°”å€¼ï¼Œå¦‚æœä¸º <code>true</code>ï¼Œåˆ™å¿…é¡»æä¾›å€¼æ‰èƒ½åœ¨è¡¨å•ä¸­æäº¤ã€‚<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/textarea#rows"><code>rows</code></a>ï¼šæ•°å­—ï¼Œè¡¨ç¤ºé»˜è®¤é«˜åº¦ï¼Œä»¥å¹³å‡å­—ç¬¦é«˜åº¦è®¡ç®—ã€‚é»˜è®¤ä¸º <code>2</code>ã€‚<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/textarea#wrap"><code>wrap</code></a>ï¼šå¯ä»¥æ˜¯ <code>'hard'</code>ã€<code>'soft'</code> æˆ– <code>'off'</code> ä¸­çš„ä¸€ä¸ªå€¼ï¼Œè¡¨ç¤ºæäº¤è¡¨å•æ—¶æ–‡æœ¬åº”å¦‚ä½•æ¢è¡Œã€‚</ul></section><section class="level4"aria-labelledby="æ³¨æ„-caveats"><h4 id="æ³¨æ„-caveats">æ³¨æ„ {/<em>caveats</em>/}</h4><ul><li>ä¸å…è®¸ä¼ é€’åƒ <code>&#x3C;textarea>something&#x3C;/textarea></code> è¿™æ ·çš„å­å…ƒç´ ï¼Œä½ åº”è¯¥ <a href="#providing-an-initial-value-for-a-text-area">ä½¿ç”¨ <code>defaultValue</code> æä¾›åˆå§‹å€¼</a>ã€‚<li>å¦‚æœä¸€ä¸ªæ–‡æœ¬æ¡†æ¥æ”¶å­—ç¬¦ä¸²ç±»å‹çš„ <code>value</code> å±æ€§ï¼Œé‚£ä¹ˆå®ƒå°†è¢«è§†ä¸º <a href="#controlling-a-text-area-with-a-state-variable">å—æ§ç»„ä»¶</a>ã€‚<li>ä¸€ä¸ªæ–‡æœ¬æ¡†ä¸èƒ½åŒæ—¶æ—¢æ˜¯å—æ§ç»„ä»¶åˆæ˜¯éå—æ§ç»„ä»¶ã€‚<li>ä¸€ä¸ªæ–‡æœ¬æ¡†åœ¨å…¶ç”Ÿå‘½å‘¨æœŸå†…æ— æ³•åœ¨å—æ§å’Œéå—æ§ä¹‹é—´åˆ‡æ¢ã€‚<li>æ¯ä¸ªå—æ§æ–‡æœ¬æ¡†éƒ½éœ€è¦ä¸€ä¸ª <code>onChange</code> äº‹ä»¶å¤„ç†ç¨‹åºï¼Œä»¥åŒæ­¥æ›´æ–°å…¶åé¢çš„æ–°å€¼ã€‚</ul></section></section></section><section class="level2"aria-labelledby="ç”¨æ³•-usage"><h2 id="ç”¨æ³•-usage">ç”¨æ³• {/<em>usage</em>/}</h2><section class="level3"aria-labelledby="å±•ç¤ºä¸€ä¸ªæ–‡æœ¬æ¡†-displaying-a-text-area"><h3 id="å±•ç¤ºä¸€ä¸ªæ–‡æœ¬æ¡†-displaying-a-text-area">å±•ç¤ºä¸€ä¸ªæ–‡æœ¬æ¡† {/<em>displaying-a-text-area</em>/}</h3><p>ä½¿ç”¨ <code>&#x3C;textarea></code> æ¸²æŸ“æ–‡æœ¬æ¡†ã€‚ä½ å¯ä»¥ä½¿ç”¨ <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/textarea#rows"><code>rows</code></a> å’Œ <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/textarea#cols"><code>cols</code></a> å±æ€§æŒ‡å®šå…¶é»˜è®¤å¤§å°ï¼Œä½†é»˜è®¤æƒ…å†µä¸‹ç”¨æˆ·å¯ä»¥è°ƒæ•´å¤§å°ã€‚å¦‚æœè¦ç¦ç”¨è°ƒæ•´å¤§å°åŠŸèƒ½ï¼Œå¯ä»¥åœ¨ CSS ä¸­æŒ‡å®š <code>resize: none</code>ã€‚</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">NewPost</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
      å†™ä¸‹ä½ çš„è´´å­ï¼š
      <span class="token operator">&#x3C;</span>textarea name<span class="token operator">=</span><span class="token string">"postContent"</span> rows<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">}</span> cols<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">40</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">input</span> <span class="token punctuation">{</span> <span class="token property">margin-left</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">textarea</span> <span class="token punctuation">{</span> <span class="token property">margin-top</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">label</span> <span class="token punctuation">{</span> <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">label<span class="token punctuation">,</span> textarea</span> <span class="token punctuation">{</span> <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack></section><section class="level3"aria-labelledby="ä¸ºæ–‡æœ¬æ¡†æä¾›-label-å±æ€§-providing-a-label-for-a-text-area"><h3 id="ä¸ºæ–‡æœ¬æ¡†æä¾›-label-å±æ€§-providing-a-label-for-a-text-area">ä¸ºæ–‡æœ¬æ¡†æä¾› label å±æ€§ {/<em>providing-a-label-for-a-text-area</em>/}</h3><p>ä¸€èˆ¬è€Œè¨€ï¼Œåº”è¯¥å°†æ¯ä¸ª <code>&#x3C;textarea></code> éƒ½æ”¾ç½®åœ¨ <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/label"><code>&#x3C;label></code></a> å†…ï¼Œè¡¨ç¤ºæ­¤æ ‡ç­¾ä¸è¯¥é€‰æ‹©æ¡†ç›¸å…³è”ã€‚å½“ç”¨æˆ·å•å‡»æ ‡ç­¾æ—¶ï¼Œæµè§ˆå™¨å°†è‡ªåŠ¨èšç„¦é€‰æ‹©æ¡†ã€‚è¿™å¯¹äºå¯è®¿é—®æ€§ä¹Ÿéå¸¸é‡è¦ï¼šå½“ç”¨æˆ·èšç„¦é€‰æ‹©æ¡†æ—¶ï¼Œå±å¹•é˜…è¯»å™¨å°†å®£å¸ƒæ ‡ç­¾æ ‡é¢˜ã€‚<p>å¦‚æœæ— æ³•å°† <code>&#x3C;textarea></code> æ”¾ç½®åœ¨ <code>&#x3C;label></code> å†…ï¼Œè¯·é€šè¿‡å°†ç›¸åŒçš„ ID ä¼ é€’ç»™ <code>&#x3C;textareaid></code> ä¸ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLLabelElement/htmlFor"><code>&#x3C;label htmlFor></code></a> æ¥å°†å®ƒä»¬å…³è”èµ·æ¥ã€‚ä¸ºäº†é¿å…ç»„ä»¶åœ¨å¤šä¸ªå®ä¾‹ä¹‹é—´äº§ç”Ÿå†²çªï¼Œä½¿ç”¨ <a href="/reference/react/useId"><code>useId</code></a> ç”Ÿæˆè¿™æ ·çš„ IDã€‚</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useId <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Form</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> postTextAreaId <span class="token operator">=</span> <span class="token function">useId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>label htmlFor<span class="token operator">=</span><span class="token punctuation">{</span>postTextAreaId<span class="token punctuation">}</span><span class="token operator">></span>
        å†™ä¸‹ä½ çš„è´´å­ï¼š
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>textarea
        id<span class="token operator">=</span><span class="token punctuation">{</span>postTextAreaId<span class="token punctuation">}</span>
        name<span class="token operator">=</span><span class="token string">"postContent"</span>
        rows<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">}</span>
        cols<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">40</span><span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">input</span> <span class="token punctuation">{</span> <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack></section><section class="level3"aria-labelledby="æä¾›åˆå§‹å€¼-providing-an-initial-value-for-a-text-area"><h3 id="æä¾›åˆå§‹å€¼-providing-an-initial-value-for-a-text-area">æä¾›åˆå§‹å€¼ {/<em>providing-an-initial-value-for-a-text-area</em>/}</h3><p>ä½¿ç”¨ <code>defaultValue</code> å±æ€§ä¼ é€’å­—ç¬¦ä¸²ï¼ŒæŒ‡å®šæ–‡æœ¬æ¡†åˆå§‹å€¼ã€‚</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">EditPost</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
      ç¼–è¾‘ä½ çš„è´´å­ï¼š
      <span class="token operator">&#x3C;</span>textarea
        name<span class="token operator">=</span><span class="token string">"postContent"</span>
        defaultValue<span class="token operator">=</span><span class="token string">"I really enjoyed biking yesterday!"</span>
        rows<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">}</span>
        cols<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">40</span><span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">input</span> <span class="token punctuation">{</span> <span class="token property">margin-left</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">textarea</span> <span class="token punctuation">{</span> <span class="token property">margin-top</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">label</span> <span class="token punctuation">{</span> <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">label<span class="token punctuation">,</span> textarea</span> <span class="token punctuation">{</span> <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack><pitfall><p>ä¸ HTML ä¸åŒï¼Œåƒè¿™æ ·ä¼ é€’åˆå§‹å€¼ <code>&#x3C;textarea>Some content&#x3C;/textarea></code> å°†ä¸å—æ”¯æŒã€‚</p></pitfall></section><section class="level3"aria-labelledby="æäº¤è¡¨å•æ—¶è¯»å–æ–‡æœ¬æ¡†çš„å€¼-reading-the-text-area-value-when-submitting-a-form"><h3 id="æäº¤è¡¨å•æ—¶è¯»å–æ–‡æœ¬æ¡†çš„å€¼-reading-the-text-area-value-when-submitting-a-form">æäº¤è¡¨å•æ—¶è¯»å–æ–‡æœ¬æ¡†çš„å€¼ {/<em>reading-the-text-area-value-when-submitting-a-form</em>/}</h3><p>åœ¨æ–‡æœ¬æ¡†å‘¨å›´æ·»åŠ ä¸€ä¸ªåŒ…å« <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/button"><code>&#x3C;button type="submit"></code></a> æŒ‰é’®çš„ <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/form"><code>&#x3C;form></code></a> ç»„ä»¶ã€‚è¿™å°†è°ƒç”¨ <code>&#x3C;form onSubmit></code> äº‹ä»¶å¤„ç†ç¨‹åºã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨å°†å‘å½“å‰ URL å‘é€è¡¨å•æ•°æ®å¹¶åˆ·æ–°é¡µé¢ã€‚ä½ å¯ä»¥é€šè¿‡è°ƒç”¨ <code>e.preventDefault()</code> å–æ¶ˆæ­¤é»˜è®¤è¡Œä¸ºï¼Œå¹¶ä½¿ç”¨ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/FormData"><code>new FormData(e.target)</code></a> è¯»å–è¡¨å•æ•°æ®ã€‚<sandpack></sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">EditPost</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">handleSubmit</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// é˜»æ­¢æµè§ˆå™¨é‡æ–°åŠ è½½é¡µé¢</span>
    e<span class="token punctuation">.</span><span class="token method function property-access">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// è¯»å–è¡¨å•æ•°æ®</span>
    <span class="token keyword">const</span> form <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span>form<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ä½ å¯ä»¥ç›´æ¥å°† formData ä½œä¸º fetch è¯·æ±‚çš„ bodyï¼š</span>
    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/some-api'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">method</span><span class="token operator">:</span> form<span class="token punctuation">.</span><span class="token property-access">method</span><span class="token punctuation">,</span> <span class="token literal-property property">body</span><span class="token operator">:</span> formData <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ä¹Ÿå¯ä»¥ä½¿ç”¨æ™®é€šçš„å¯¹è±¡ï¼š</span>
    <span class="token keyword">const</span> formJson <span class="token operator">=</span> <span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">fromEntries</span><span class="token punctuation">(</span>formData<span class="token punctuation">.</span><span class="token method function property-access">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>formJson<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>form method<span class="token operator">=</span><span class="token string">"post"</span> onSubmit<span class="token operator">=</span><span class="token punctuation">{</span>handleSubmit<span class="token punctuation">}</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
        è´´å­æ ‡é¢˜ï¼š<span class="token operator">&#x3C;</span>input name<span class="token operator">=</span><span class="token string">"postTitle"</span> defaultValue<span class="token operator">=</span><span class="token string">"éª‘è½¦"</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
        ç¼–è¾‘ä½ çš„è´´å­ï¼š
        <span class="token operator">&#x3C;</span>textarea
          name<span class="token operator">=</span><span class="token string">"postContent"</span>
          defaultValue<span class="token operator">=</span><span class="token string">"æˆ‘æ˜¨å¤©éª‘è½¦å¾ˆé«˜å…´ï¼"</span>
          rows<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">}</span>
          cols<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">40</span><span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>hr <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>button type<span class="token operator">=</span><span class="token string">"reset"</span><span class="token operator">></span>é‡æ–°ç¼–è¾‘<span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>button type<span class="token operator">=</span><span class="token string">"submit"</span><span class="token operator">></span>ä¿å­˜è´´å­<span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>form<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">label</span> <span class="token punctuation">{</span> <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">input</span> <span class="token punctuation">{</span> <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre><note><p>ç»™ <code>&#x3C;textarea></code> æ·»åŠ  <code>name</code> å±æ€§ï¼Œä¾‹å¦‚ <code>&#x3C;textarea name="postContent" /></code>ã€‚æŒ‡å®šçš„ <code>name</code> å°†ä½œä¸ºè¡¨å•æ•°æ®ä¸­çš„ä¸€ä¸ªé”®ï¼Œä¾‹å¦‚ <code>{ postContent: "Your post" }</code>ã€‚</p></note><pitfall><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>&#x3C;form></code> å†…çš„ä»»ä½• <code>&#x3C;button></code> éƒ½å¯ä»¥æäº¤è¡¨å•ã€‚è¿™å¯èƒ½ä¼šè®©äººæ„Ÿåˆ°æƒŠè®¶ï¼å¦‚æœä½ æœ‰è‡ªå®šä¹‰ <code>Button</code> ç»„ä»¶ï¼Œè¯·è€ƒè™‘ä½¿ç”¨ <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/input/button"><code>&#x3C;button type="button"></code></a> è€Œä¸æ˜¯ <code>&#x3C;button></code>ã€‚å¦‚æœä½ æƒ³è¦æ˜ç¡®æŒ‡å®šæäº¤è¡¨å•çš„æŒ‰é’®ï¼Œè¯·ä½¿ç”¨ <code>&#x3C;button type="submit"></code>ã€‚</p></pitfall></section><section class="level3"aria-labelledby="ä½¿ç”¨-state-æ§åˆ¶æ–‡æœ¬æ¡†-controlling-a-text-area-with-a-state-variable"><h3 id="ä½¿ç”¨-state-æ§åˆ¶æ–‡æœ¬æ¡†-controlling-a-text-area-with-a-state-variable">ä½¿ç”¨ state æ§åˆ¶æ–‡æœ¬æ¡† {/<em>controlling-a-text-area-with-a-state-variable</em>/}</h3><p>åƒ <code>&#x3C;textarea /></code> è¿™æ ·çš„é€‰æ‹©æ¡†æ˜¯éå—æ§çš„ã€‚å³ä½¿ä½  <a href="#providing-an-initial-value-for-a-text-area">ä¼ é€’äº†åˆå§‹å€¼</a>ï¼Œæ¯”å¦‚ <code>&#x3C;textarea defaultValue="Initial text" /></code>ï¼Œä½ çš„ JSX ä¹Ÿåªæ˜¯æŒ‡å®šäº†åˆå§‹å€¼ï¼Œè€Œéå½“å‰æ—¶åˆ»çš„å€¼ã€‚<p><strong>å¦‚æœè¦æ¸²æŸ“ä¸€ä¸ªå—æ§é€‰æ‹©æ¡†ï¼Œè¯·ä¼ é€’ <code>value</code> å±æ€§</strong>ã€‚React å°†å¼ºåˆ¶ä¼ é€’ <code>value</code> å±æ€§ç»™æ–‡æœ¬æ¡†ã€‚é€šå¸¸ï¼Œä½ å¯ä»¥é€šè¿‡å£°æ˜ä¸€ä¸ª <a href="/reference/react/useState">state</a> æ¥æ§åˆ¶æ–‡æœ¬æ¡†ï¼š<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">NewPost</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>postContent<span class="token punctuation">,</span> setPostContent<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å£°æ˜ä¸€ä¸ª state å˜é‡...</span>
  <span class="token comment">// ...</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>textarea
      value<span class="token operator">=</span><span class="token punctuation">{</span>postContent<span class="token punctuation">}</span> <span class="token comment">// ...å¼ºåˆ¶æ–‡æœ¬æ¡†çš„å€¼ä¸ state ç›¸åŒ¹é…...</span>
      onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token arrow operator">=></span> <span class="token function">setPostContent</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token comment">// ...å¹¶åœ¨æ¯æ¬¡æ”¹å˜ï¼ˆchangeï¼‰æ—¶æ›´æ–° stateï¼</span>
    <span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>è¿™å°†å¸®åŠ©ä½ åœ¨æ¯æ¬¡æŒ‰é”®æ—¶éƒ½è§¦å‘é‡æ–°æ¸²æŸ“ã€‚</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">MarkdownPreview</span></span> <span class="token keyword module">from</span> <span class="token string">'./MarkdownPreview.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MarkdownEditor</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>postContent<span class="token punctuation">,</span> setPostContent<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'_Hello,_ **Markdown**!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
      	è¾“å…¥ä¸€äº› markdown è¯­è¨€ï¼š
        <span class="token operator">&#x3C;</span>textarea
          value<span class="token operator">=</span><span class="token punctuation">{</span>postContent<span class="token punctuation">}</span>
          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token arrow operator">=></span> <span class="token function">setPostContent</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>hr <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">MarkdownPreview</span> markdown<span class="token operator">=</span><span class="token punctuation">{</span>postContent<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Remarkable</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'remarkable'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> md <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Remarkable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MarkdownPreview</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> markdown <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> renderedHTML <span class="token operator">=</span> md<span class="token punctuation">.</span><span class="token method function property-access">render</span><span class="token punctuation">(</span>markdown<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>div dangerouslySetInnerHTML<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token literal-property property">__html</span><span class="token operator">:</span> renderedHTML<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"react"</span><span class="token operator">:</span> <span class="token string">"latest"</span><span class="token punctuation">,</span>
    <span class="token property">"react-dom"</span><span class="token operator">:</span> <span class="token string">"latest"</span><span class="token punctuation">,</span>
    <span class="token property">"react-scripts"</span><span class="token operator">:</span> <span class="token string">"latest"</span><span class="token punctuation">,</span>
    <span class="token property">"remarkable"</span><span class="token operator">:</span> <span class="token string">"2.0.1"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"react-scripts start"</span><span class="token punctuation">,</span>
    <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"react-scripts build"</span><span class="token punctuation">,</span>
    <span class="token property">"test"</span><span class="token operator">:</span> <span class="token string">"react-scripts test --env=jsdom"</span><span class="token punctuation">,</span>
    <span class="token property">"eject"</span><span class="token operator">:</span> <span class="token string">"react-scripts eject"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">textarea</span> <span class="token punctuation">{</span> <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span> <span class="token property">margin-top</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack><pitfall><p><strong>å¦‚æœä¼ é€’äº† <code>value</code> ä½†æ²¡æœ‰ä¼ é€’ <code>onChange</code>ï¼Œé‚£ä¹ˆå°†æ— æ³•åœ¨æ–‡æœ¬æ¡†è¾“å…¥ä»»ä½•å†…å®¹</strong>ã€‚å½“ä½ é€šè¿‡ä¼ é€’ <code>value</code> æ¥æ§åˆ¶æ–‡æœ¬æ¡†æ—¶ï¼Œä½ éœ€è¦ä¿è¯æ–‡æœ¬æ¡†å§‹ç»ˆå…·æœ‰ä½ ä¼ é€’çš„å€¼ã€‚å› æ­¤ï¼Œå¦‚æœä½ å°†ä¸€ä¸ª state ä½œä¸º <code>value</code> ä¼ é€’ï¼Œä½†åœ¨ <code>onChange</code> äº‹ä»¶å¤„ç†ç¨‹åºä¸­å¿˜è®°åŒæ­¥æ›´æ–°è¯¥çŠ¶æ€å˜é‡ï¼ŒReact å°†åœ¨æ¯æ¬¡æ’å…¥å­—ç¬¦åå°†é€‰æ‹©æ¡†æ¢å¤åˆ°ä½ æŒ‡å®šçš„ <code>value</code>ã€‚</p></pitfall></section></section><section class="level2"aria-labelledby="æ•…éšœæ’é™¤-troubleshooting"><h2 id="æ•…éšœæ’é™¤-troubleshooting">æ•…éšœæ’é™¤ {/<em>troubleshooting</em>/}</h2><section class="level3"aria-labelledby="è¾“å…¥æ—¶æ–‡æœ¬æ¡†æ²¡æœ‰æ›´æ–°-my-text-area-doesnt-update-when-i-type-into-it"><h3 id="è¾“å…¥æ—¶æ–‡æœ¬æ¡†æ²¡æœ‰æ›´æ–°-my-text-area-doesnt-update-when-i-type-into-it">è¾“å…¥æ—¶æ–‡æœ¬æ¡†æ²¡æœ‰æ›´æ–° {/<em>my-text-area-doesnt-update-when-i-type-into-it</em>/}</h3><p>å¦‚æœä¼ é€’äº† <code>value</code> ä½†æ²¡æœ‰ä¼ é€’ <code>onChange</code>ï¼Œä½ å°†åœ¨æ§åˆ¶å°ä¸­çœ‹åˆ°ä¸€ä¸ªé”™è¯¯ï¼š<pre class="language-js"><code class="language-js"><span class="token comment">// ğŸ”´ Bug: controlled text area with no onChange handler</span>
<span class="token operator">&#x3C;</span>textarea value<span class="token operator">=</span><span class="token punctuation">{</span>something<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></code></pre><consoleblock level="error"><p>å¦‚æœåœ¨æ²¡æœ‰æä¾› <code>onChange</code> å¤„ç†ç¨‹åºçš„æƒ…å†µä¸‹å‘è¡¨å•å­—æ®µæä¾›äº† <code>value</code> å±æ€§ï¼Œè¿™å°†å¯¼è‡´æ–‡æœ¬æ¡†åªè¯»ã€‚å¦‚æœæ–‡æœ¬æ¡†çš„å†…å®¹æ˜¯å¯å˜çš„ï¼Œè¯·ä½¿ç”¨ <code>defaultValue</code>ï¼›å¦åˆ™ï¼Œè¯·æŒ‡å®š <code>onChange</code> æˆ– <code>readOnly</code>ã€‚</p></consoleblock><p>æ­£å¦‚é”™è¯¯æ¶ˆæ¯æ‰€æç¤ºçš„é‚£æ ·ï¼Œå¦‚æœä½ åªæƒ³ <a href="#providing-an-initial-value-for-a-text-area">æŒ‡å®šåˆå§‹å€¼</a>ï¼Œè¯·æ”¹ä¸ºä½¿ç”¨ <code>defaultValue</code>ï¼š<pre class="language-js"><code class="language-js"><span class="token comment">// âœ… Good: uncontrolled text area with an initial value</span>
<span class="token operator">&#x3C;</span>textarea defaultValue<span class="token operator">=</span><span class="token punctuation">{</span>something<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></code></pre><p>å¦‚æœä½ æƒ³ <a href="#controlling-a-text-area-with-a-state-variable">ä½¿ç”¨ state æ§åˆ¶æ–‡æœ¬æ¡†</a>ï¼Œè¯·æŒ‡å®š <code>onChange</code> å¤„ç†ç¨‹åºï¼š<pre class="language-js"><code class="language-js"><span class="token comment">// âœ… Good: controlled text area with onChange</span>
<span class="token operator">&#x3C;</span>textarea value<span class="token operator">=</span><span class="token punctuation">{</span>something<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token arrow operator">=></span> <span class="token function">setSomething</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></code></pre><p>å¦‚æœæ–‡æœ¬æ¡†çš„å†…å®¹æ˜¯åªè¯»çš„ï¼Œè¯·æŒ‡å®š <code>readOnly</code> å±æ€§ï¼š<pre class="language-js"><code class="language-js"><span class="token comment">// âœ… Good: readonly controlled text area without on change</span>
<span class="token operator">&#x3C;</span>textarea value<span class="token operator">=</span><span class="token punctuation">{</span>something<span class="token punctuation">}</span> readOnly<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></code></pre></section><section class="level3"aria-labelledby="å½“æˆ‘è¾“å…¥æ—¶æ–‡æœ¬æ¡†å…‰æ ‡ä¼šè·³åˆ°å¼€å¤´-my-text-area-caret-jumps-to-the-beginning-on-every-keystroke"><h3 id="å½“æˆ‘è¾“å…¥æ—¶æ–‡æœ¬æ¡†å…‰æ ‡ä¼šè·³åˆ°å¼€å¤´-my-text-area-caret-jumps-to-the-beginning-on-every-keystroke">å½“æˆ‘è¾“å…¥æ—¶ï¼Œæ–‡æœ¬æ¡†å…‰æ ‡ä¼šè·³åˆ°å¼€å¤´ {/<em>my-text-area-caret-jumps-to-the-beginning-on-every-keystroke</em>/}</h3><p>å¦‚æœä½ æƒ³è¦ <a href="#controlling-a-text-area-with-a-state-variable">æ§åˆ¶æ–‡æœ¬æ¡†</a>ï¼Œä½ åº”è¯¥åœ¨ <code>onChange</code> æœŸé—´å°†å¯¹åº”çš„ state å˜é‡æ›´æ–°ä¸ºæ¥è‡ª DOM çš„æ–‡æœ¬æ¡†çš„å€¼ã€‚<p>ä½ ä¸åº”è¯¥å°†å®ƒæ›´æ–°ä¸º <code>e.target.value</code> ä»¥å¤–çš„å€¼ï¼š<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">handleChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ğŸ”´ Bug: updating an input to something other than e.target.value</span>
  <span class="token function">setFirstName</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">.</span><span class="token method function property-access">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>ä½ ä¹Ÿä¸åº”è¯¥å¼‚æ­¥æ›´æ–°ï¼š<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">handleChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ğŸ”´ Bug: updating an input asynchronously</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">setFirstName</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>å°† state åŒæ­¥æ›´æ–° <code>e.target.value</code> ä»¥è§£å†³æ­¤é—®é¢˜ï¼š<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">handleChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// âœ… Updating a controlled input to e.target.value synchronously</span>
  <span class="token function">setFirstName</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>å¦‚æœè¿™ä¸èƒ½è§£å†³é—®é¢˜ï¼Œæœ‰å¯èƒ½æ˜¯å› ä¸ºæ¯æ¬¡è¾“å…¥æ—¶æ–‡æœ¬æ¡†éƒ½ä» DOM ä¸­åˆ é™¤å¹¶é‡æ–°æ·»åŠ ã€‚åŒæ ·ï¼Œå¦‚æœåœ¨æ¯æ¬¡é‡æ–°æ¸²æŸ“æ—¶ä¸å°å¿ƒ <a href="/learn/preserving-and-resetting-state">é‡ç½®äº† state</a>ï¼Œå°±ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ–‡æœ¬æ¡†æˆ–å…¶ç¥–å…ˆç»„ä»¶æ€»æ˜¯æ¥æ”¶ä¸åŒçš„ <code>key</code>ï¼Œæˆ–è€…åµŒå¥—ä½¿ç”¨ç»„ä»¶ï¼ˆè¿™åœ¨ React ä¸­æ˜¯ä¸å…è®¸çš„ï¼Œå¹¶ä¸”ä¼šå¯¼è‡´â€œå†…éƒ¨â€ç»„ä»¶åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶é‡æ–°æŒ‚è½½ï¼‰ï¼Œå°±ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚</section><section class="level3"aria-labelledby="æ”¶åˆ°é”™è¯¯a-component-is-changing-an-uncontrolled-input-to-be-controlled-im-getting-an-error-a-component-is-changing-an-uncontrolled-input-to-be-controlled"><h3 id="æ”¶åˆ°é”™è¯¯a-component-is-changing-an-uncontrolled-input-to-be-controlled-im-getting-an-error-a-component-is-changing-an-uncontrolled-input-to-be-controlled">æ”¶åˆ°é”™è¯¯ï¼šâ€œA component is changing an uncontrolled input to be controlledâ€ {/<em>im-getting-an-error-a-component-is-changing-an-uncontrolled-input-to-be-controlled</em>/}</h3><p>æä¾›çš„ <code>value</code> å±æ€§å¿…é¡»åœ¨æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­éƒ½ä¸ºå­—ç¬¦ä¸²ã€‚<p>ä½ ä¸èƒ½ä¸€ä¼šä¼ é€’ <code>value={undefined}</code> ä¸€ä¼šä¼ é€’ <code>value="some string"</code>ï¼Œè¿™ä¼šå¯¼è‡´ React ä¸æ¸…æ¥šä½ æ˜¯æƒ³æŒ‡å®šå—æ§ç»„ä»¶è¿˜æ˜¯éå—æ§ç»„ä»¶ã€‚å—æ§ç»„ä»¶çš„ <code>value</code> å±æ€§åº”è¯¥å§‹ç»ˆæ¥æ”¶å­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯ <code>null</code> æˆ– <code>undefined</code>ã€‚<p>å¦‚æœ <code>value</code> æ¥è‡ª API æˆ– stateï¼Œå®ƒå¯èƒ½ä¼šè¢«åˆå§‹åŒ–ä¸º <code>null</code> æˆ– <code>undefined</code>ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¦ä¹ˆæœ€åˆå°†å…¶è®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸²ï¼ˆ<code>''</code>ï¼‰ï¼Œè¦ä¹ˆä¼ é€’ <code>value={someValue ?? ''}</code> ä»¥ç¡®ä¿ <code>value</code> æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ <span style="float:footnote"><a href="../../../index.html#toc">Go to TOC</a></span></section></section></inlinetoc></h1></section>
<!doctype html><html lang="zh-hans"><meta charset="utf-8"><title>lazy</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="lazy"><h1 id="lazy">lazy</h1><p>translators:<ul><li>Davont</ul><intro><p><code>lazy</code> èƒ½å¤Ÿè®©ä½ åœ¨ç»„ä»¶ç¬¬ä¸€æ¬¡è¢«æ¸²æŸ“ä¹‹å‰å»¶è¿ŸåŠ è½½ç»„ä»¶çš„ä»£ç ã€‚<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token maybe-class-name">SomeComponent</span> <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span>load<span class="token punctuation">)</span></code></pre></intro><inlinetoc><section class="level2"aria-labelledby="å‚è€ƒ-reference"><h2 id="å‚è€ƒ-reference">å‚è€ƒ {/<em>reference</em>/}</h2><section class="level3"aria-labelledby="lazyload-lazy"><h3 id="lazyload-lazy"><code>lazy(load)</code> {/<em>lazy</em>/}</h3><p>åœ¨ç»„ä»¶å¤–éƒ¨è°ƒç”¨ <code>lazy</code>ï¼Œä»¥å£°æ˜ä¸€ä¸ªæ‡’åŠ è½½çš„ React ç»„ä»¶:<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> lazy <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token maybe-class-name">MarkdownPreview</span> <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'./MarkdownPreview.js'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><a href="#usage">è¯·çœ‹ä¸‹é¢çš„æ›´å¤šä¾‹å­</a>ã€‚<section class="level4"aria-labelledby="å‚æ•°-parameters"><h4 id="å‚æ•°-parameters">å‚æ•° {/<em>parameters</em>/}</h4><ul><li><code>load</code>: ä¸€ä¸ªè¿”å› <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a> æˆ–å¦ä¸€ä¸ª <strong>thenable</strong>ï¼ˆå…·æœ‰ <code>then</code> æ–¹æ³•çš„ç±» Promise å¯¹è±¡ï¼‰çš„å‡½æ•°ã€‚React ä¸ä¼šåœ¨ä½ å°è¯•é¦–æ¬¡æ¸²æŸ“è¿”å›çš„ç»„ä»¶ä¹‹å‰è°ƒç”¨ <code>load</code> å‡½æ•°ã€‚åœ¨ React é¦–æ¬¡è°ƒç”¨ <code>load</code> åï¼Œå®ƒå°†ç­‰å¾…å…¶è§£æï¼Œç„¶åå°†è§£æå€¼çš„ <code>.default</code> æ¸²æŸ“ä¸º React ç»„ä»¶ã€‚è¿”å›çš„ Promise å’Œ Promise çš„è§£æå€¼éƒ½å°†è¢«ç¼“å­˜ï¼Œå› æ­¤ React ä¸ä¼šå¤šæ¬¡è°ƒç”¨ <code>load</code> å‡½æ•°ã€‚å¦‚æœ Promise è¢«æ‹’ç»ï¼Œåˆ™ React å°†æŠ›å‡ºæ‹’ç»åŸå› ç»™æœ€è¿‘çš„é”™è¯¯è¾¹ç•Œå¤„ç†ã€‚</ul></section><section class="level4"aria-labelledby="è¿”å›å€¼-returns"><h4 id="è¿”å›å€¼-returns">è¿”å›å€¼ {/<em>returns</em>/}</h4><p><code>lazy</code> è¿”å›ä¸€ä¸ª React ç»„ä»¶ï¼Œä½ å¯ä»¥åœ¨ fiber æ ‘ä¸­æ¸²æŸ“ã€‚å½“æ‡’åŠ è½½ç»„ä»¶çš„ä»£ç ä»åœ¨åŠ è½½æ—¶ï¼Œå°è¯•æ¸²æŸ“å®ƒå°†ä¼šå¤„äº <em>æš‚åœ</em> çŠ¶æ€ã€‚ä½¿ç”¨ <a href="/reference/react/Suspense"><code>&#x3C;Suspense></code></a> å¯ä»¥åœ¨å…¶åŠ è½½æ—¶æ˜¾ç¤ºä¸€ä¸ªæ­£åœ¨åŠ è½½çš„æç¤ºã€‚</section></section><section class="level3"aria-labelledby="load-å‡½æ•°-load"><h3 id="load-å‡½æ•°-load"><code>load</code> å‡½æ•° {/<em>load</em>/}</h3><section class="level4"aria-labelledby="å‚æ•°-load-parameters"><h4 id="å‚æ•°-load-parameters">å‚æ•° {/<em>load-parameters</em>/}</h4><p><code>load</code> ä¸æ¥æ”¶ä»»ä½•å‚æ•°ã€‚</section><section class="level4"aria-labelledby="è¿”å›å€¼-load-returns"><h4 id="è¿”å›å€¼-load-returns">è¿”å›å€¼ {/<em>load-returns</em>/}</h4><p>ä½ éœ€è¦è¿”å›ä¸€ä¸ª <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a> æˆ–å…¶ä»– <strong>thenable</strong>ï¼ˆå…·æœ‰ <code>then</code> æ–¹æ³•çš„ç±» Promise å¯¹è±¡ï¼‰ã€‚å®ƒæœ€ç»ˆéœ€è¦è§£æä¸ºæœ‰æ•ˆçš„ React ç»„ä»¶ç±»å‹ï¼Œä¾‹å¦‚å‡½æ•°ã€<a href="/reference/react/memo"><code>memo</code></a> æˆ– <a href="/reference/react/forwardRef"><code>forwardRef</code></a> ç»„ä»¶ã€‚</section></section></section><section class="level2"aria-labelledby="ä½¿ç”¨æ–¹æ³•-usage"><h2 id="ä½¿ç”¨æ–¹æ³•-usage">ä½¿ç”¨æ–¹æ³• {/<em>usage</em>/}</h2><section class="level3"aria-labelledby="ä½¿ç”¨-suspense-å®ç°æ‡’åŠ è½½ç»„ä»¶-suspense-for-code-splitting"><h3 id="ä½¿ç”¨-suspense-å®ç°æ‡’åŠ è½½ç»„ä»¶-suspense-for-code-splitting">ä½¿ç”¨ Suspense å®ç°æ‡’åŠ è½½ç»„ä»¶ {/<em>suspense-for-code-splitting</em>/}</h3><p>é€šå¸¸ï¼Œä½ å¯ä»¥ä½¿ç”¨é™æ€ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/import"><code>import</code></a> å£°æ˜æ¥å¯¼å…¥ç»„ä»¶ï¼š<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">MarkdownPreview</span></span> <span class="token keyword module">from</span> <span class="token string">'./MarkdownPreview.js'</span><span class="token punctuation">;</span></code></pre><p>å¦‚æœæƒ³åœ¨ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“å‰å»¶è¿ŸåŠ è½½è¿™ä¸ªç»„ä»¶çš„ä»£ç ï¼Œè¯·æ›¿æ¢æˆä»¥ä¸‹å¯¼å…¥æ–¹å¼ï¼š<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> lazy <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token maybe-class-name">MarkdownPreview</span> <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'./MarkdownPreview.js'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>æ­¤ä»£ç ä¾èµ–äº <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/import">åŠ¨æ€ <code>import()</code></a>ï¼Œå› æ­¤å¯èƒ½éœ€è¦ä½ çš„æ‰“åŒ…å·¥å…·æˆ–æ¡†æ¶æä¾›æ”¯æŒã€‚ä½¿ç”¨è¿™ç§æ¨¡å¼è¦æ±‚å¯¼å…¥çš„æ‡’åŠ è½½ç»„ä»¶å¿…é¡»ä½œä¸º <code>default</code> å¯¼å‡ºã€‚<p>ç°åœ¨ä½ çš„ç»„ä»¶ä»£ç å¯ä»¥æŒ‰éœ€åŠ è½½ï¼ŒåŒæ—¶ä½ éœ€è¦æŒ‡å®šåœ¨å®ƒæ­£åœ¨åŠ è½½æ—¶åº”è¯¥æ˜¾ç¤ºä»€ä¹ˆã€‚ä½ å¯ä»¥é€šè¿‡å°†æ‡’åŠ è½½ç»„ä»¶æˆ–å…¶ä»»ä½•çˆ¶çº§åŒ…è£…åˆ° <a href="/reference/react/Suspense"><code>&#x3C;Suspense></code></a> è¾¹ç•Œä¸­æ¥å®ç°ï¼š<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">Suspense</span> fallback<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">Loading</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">}</span><span class="token operator">></span>
  <span class="token operator">&#x3C;</span>h2<span class="token operator">></span><span class="token maybe-class-name">Preview</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h2<span class="token operator">></span>
  <span class="token operator">&#x3C;</span><span class="token maybe-class-name">MarkdownPreview</span> <span class="token operator">/</span><span class="token operator">></span>
 <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Suspense</span><span class="token operator">></span></code></pre><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>MarkdownPreview</code> çš„ä»£ç åªæœ‰åœ¨ä½ å°è¯•æ¸²æŸ“å®ƒæ—¶æ‰ä¼šè¢«åŠ è½½ã€‚å¦‚æœ <code>MarkdownPreview</code> è¿˜æ²¡æœ‰åŠ è½½å®Œæˆï¼Œå°†æ˜¾ç¤º <code>Loading</code>ã€‚è¯·å°è¯•å‹¾é€‰å¤é€‰æ¡†ï¼š</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState<span class="token punctuation">,</span> <span class="token maybe-class-name">Suspense</span><span class="token punctuation">,</span> lazy <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">Loading</span></span> <span class="token keyword module">from</span> <span class="token string">'./Loading.js'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token maybe-class-name">MarkdownPreview</span> <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">delayForDemo</span><span class="token punctuation">(</span><span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'./MarkdownPreview.js'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MarkdownEditor</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>showPreview<span class="token punctuation">,</span> setShowPreview<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>markdown<span class="token punctuation">,</span> setMarkdown<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'Hello, **world**!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>textarea value<span class="token operator">=</span><span class="token punctuation">{</span>markdown<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token arrow operator">=></span> <span class="token function">setMarkdown</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>input type<span class="token operator">=</span><span class="token string">"checkbox"</span> checked<span class="token operator">=</span><span class="token punctuation">{</span>showPreview<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token arrow operator">=></span> <span class="token function">setShowPreview</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">checked</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
        <span class="token maybe-class-name">Show</span> preview
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>hr <span class="token operator">/</span><span class="token operator">></span>
      <span class="token punctuation">{</span>showPreview <span class="token operator">&#x26;&#x26;</span> <span class="token punctuation">(</span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Suspense</span> fallback<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">Loading</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">}</span><span class="token operator">></span>
          <span class="token operator">&#x3C;</span>h2<span class="token operator">></span><span class="token maybe-class-name">Preview</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h2<span class="token operator">></span>
          <span class="token operator">&#x3C;</span><span class="token maybe-class-name">MarkdownPreview</span> markdown<span class="token operator">=</span><span class="token punctuation">{</span>markdown<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Suspense</span><span class="token operator">></span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// æ·»åŠ ä¸€ä¸ªå›ºå®šçš„å»¶è¿Ÿæ—¶é—´ï¼Œä»¥ä¾¿ä½ å¯ä»¥çœ‹åˆ°åŠ è½½çŠ¶æ€</span>
<span class="token keyword">function</span> <span class="token function">delayForDemo</span><span class="token punctuation">(</span><span class="token parameter">promise</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> promise<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Loading</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token operator">&#x3C;</span>i<span class="token operator">></span><span class="token maybe-class-name">Loading</span><span class="token spread operator">...</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>i<span class="token operator">></span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Remarkable</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'remarkable'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> md <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Remarkable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MarkdownPreview</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> markdown <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div
      className<span class="token operator">=</span><span class="token string">"content"</span>
      dangerouslySetInnerHTML<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token literal-property property">__html</span><span class="token operator">:</span> md<span class="token punctuation">.</span><span class="token method function property-access">render</span><span class="token punctuation">(</span>markdown<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"immer"</span><span class="token operator">:</span> <span class="token string">"1.7.3"</span><span class="token punctuation">,</span>
    <span class="token property">"react"</span><span class="token operator">:</span> <span class="token string">"latest"</span><span class="token punctuation">,</span>
    <span class="token property">"react-dom"</span><span class="token operator">:</span> <span class="token string">"latest"</span><span class="token punctuation">,</span>
    <span class="token property">"react-scripts"</span><span class="token operator">:</span> <span class="token string">"latest"</span><span class="token punctuation">,</span>
    <span class="token property">"remarkable"</span><span class="token operator">:</span> <span class="token string">"2.0.1"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"react-scripts start"</span><span class="token punctuation">,</span>
    <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"react-scripts build"</span><span class="token punctuation">,</span>
    <span class="token property">"test"</span><span class="token operator">:</span> <span class="token string">"react-scripts test --env=jsdom"</span><span class="token punctuation">,</span>
    <span class="token property">"eject"</span><span class="token operator">:</span> <span class="token string">"react-scripts eject"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">label</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">input<span class="token punctuation">,</span> textarea</span> <span class="token punctuation">{</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">min-height</span><span class="token punctuation">:</span> <span class="token number">200</span><span class="token unit">px</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p>è¿™ä¸ªç¤ºä¾‹ä»£ç äººä¸ºåœ°å»¶è¿Ÿäº†åŠ è½½ã€‚åœ¨ä½ ä¸‹æ¬¡å–æ¶ˆé€‰ä¸­å¹¶é‡æ–°é€‰ä¸­å¤é€‰æ¡†æ—¶ï¼Œ<code>Preview</code> å°†è¢«ç¼“å­˜ï¼Œå› æ­¤ä¸ä¼šå‡ºç°åŠ è½½çŠ¶æ€ã€‚è¦å†æ¬¡æŸ¥çœ‹åŠ è½½çŠ¶æ€ï¼Œè¯·åœ¨ç¤ºä¾‹ä¸­å•å‡»â€œResetâ€ã€‚<p><a href="/reference/react/Suspense">äº†è§£å¦‚ä½•ä½¿ç”¨ Suspense ç®¡ç†åŠ è½½çŠ¶æ€ã€‚</a></section></section><section class="level2"aria-labelledby="ç–‘éš¾è§£ç­”-troubleshooting"><h2 id="ç–‘éš¾è§£ç­”-troubleshooting">ç–‘éš¾è§£ç­” {/<em>troubleshooting</em>/}</h2><section class="level3"aria-labelledby="æˆ‘çš„-lazy-ç»„ä»¶çŠ¶æ€æ„å¤–é‡ç½®-my-lazy-components-state-gets-reset-unexpectedly"><h3 id="æˆ‘çš„-lazy-ç»„ä»¶çŠ¶æ€æ„å¤–é‡ç½®-my-lazy-components-state-gets-reset-unexpectedly">æˆ‘çš„ <code>lazy</code> ç»„ä»¶çŠ¶æ€æ„å¤–é‡ç½® {/<em>my-lazy-components-state-gets-reset-unexpectedly</em>/}</h3><p>ä¸è¦åœ¨å…¶ä»–ç»„ä»¶ <em>å†…éƒ¨</em> å£°æ˜ <code>lazy</code> ç»„ä»¶ï¼š<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> lazy <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Editor</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ğŸ”´ Bad: è¿™å°†å¯¼è‡´åœ¨é‡æ–°æ¸²æŸ“æ—¶é‡ç½®æ‰€æœ‰çŠ¶æ€</span>
  <span class="token keyword">const</span> <span class="token maybe-class-name">MarkdownPreview</span> <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'./MarkdownPreview.js'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre><p>ç›¸åï¼Œæ€»æ˜¯åœ¨æ¨¡å—çš„é¡¶å±‚å£°æ˜å®ƒä»¬ï¼š<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> lazy <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token comment">// âœ… Good: å°† lazy ç»„ä»¶å£°æ˜åœ¨ç»„ä»¶å¤–éƒ¨</span>
<span class="token keyword">const</span> <span class="token maybe-class-name">MarkdownPreview</span> <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'./MarkdownPreview.js'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Editor</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre><p><span style="float:footnote"><a href="../../index.html#toc">Go to TOC</a></span></section></section></inlinetoc></section>
<!doctype html><html lang="fr"><meta charset="utf-8"><title>React Compiler</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"type="text/css"href="../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="react-compiler"><h1 id="react-compiler">React Compiler</h1><p>{/<em> FIXME:L10N </em>/}</p><intro>This page will give you an introduction to the new experimental React Compiler and how to try it out successfully.</intro><wip>These docs are still a work in progress. More documentation is available in the [React Compiler Working Group repo](https://github.com/reactwg/react-compiler/discussions), and will be upstreamed into these docs when they are more stable.</wip><youwilllearn><ul><li>Getting started with the compiler<li>Installing the compiler and eslint plugin<li>Troubleshooting</ul></youwilllearn><note>React Compiler is a new experimental compiler that we've open sourced to get early feedback from the community. It still has rough edges and is not yet fully ready for production.<p>React Compiler requires React 19 RC. If you are unable to upgrade to React 19, you may try a userspace implementation of the cache function as described in the <a href="https://github.com/reactwg/react-compiler/discussions/6">Working Group</a>. However, please note that this is not recommended and you should upgrade to React 19 when possible.<p>React Compiler is a new experimental compiler that we've open sourced to get early feedback from the community. It is a build-time only tool that automatically optimizes your React app. It works with plain JavaScript, and understands the <a href="/reference/rules">Rules of React</a>, so you don't need to rewrite any code to use it.<p>The compiler also includes an <a href="#installing-eslint-plugin-react-compiler">eslint plugin</a> that surfaces the analysis from the compiler right in your editor. The plugin runs independently of the compiler and can be used even if you aren't using the compiler in your app. We recommend all React developers to use this eslint plugin to help improve the quality of your codebase.<section class="level3"aria-labelledby="what-does-the-compiler-do-what-does-the-compiler-do"><h3 id="what-does-the-compiler-do-what-does-the-compiler-do">What does the compiler do? {/<em>what-does-the-compiler-do</em>/}</h3><p>In order to optimize applications, React Compiler automatically memoizes your code. You may be familiar today with memoization through APIs such as <code>useMemo</code>, <code>useCallback</code>, and <code>React.memo</code>. With these APIs you can tell React that certain parts of your application don't need to recompute if their inputs haven't changed, reducing work on updates. While powerful, it's easy to forget to apply memoization or apply them incorrectly. This can lead to inefficient updates as React has to check parts of your UI that don't have any <em>meaningful</em> changes.<p>The compiler uses its knowledge of JavaScript and React's rules to automatically memoize values or groups of values within your components and hooks. If it detects breakages of the rules, it will automatically skip over just those components or hooks, and continue safely compiling other code.<p>If your codebase is already very well-memoized, you might not expect to see major performance improvements with the compiler. However, in practice memoizing the correct dependencies that cause performance issues is tricky to get right by hand.</p><deepdive>#### What kind of memoization does React Compiler add? {/*what-kind-of-memoization-does-react-compiler-add*/}<p>The initial release of React Compiler is primarily focused on <strong>improving update performance</strong> (re-rendering existing components), so it focuses on these two use cases:<ol><li><strong>Skipping cascading re-rendering of components</strong><ul><li>Re-rendering <code>&#x3C;Parent /></code> causes many components in its component tree to re-render, even though only <code>&#x3C;Parent /></code> has changed</ul><li><strong>Skipping expensive calculations from outside of React</strong><ul><li>For example, calling <code>expensivelyProcessAReallyLargeArrayOfObjects()</code> inside of your component or hook that needs that data</ul></ol><section class="level4"aria-labelledby="optimizing-re-renders-optimizing-re-renders"><h4 id="optimizing-re-renders-optimizing-re-renders">Optimizing Re-renders {/<em>optimizing-re-renders</em>/}</h4><p>React lets you express your UI as a function of their current state (more concretely: their props, state, and context). In its current implementation, when a component's state changes, React will re-render that component <em>and all of its children</em> — unless you have applied some form of manual memoization with <code>useMemo()</code>, <code>useCallback()</code>, or <code>React.memo()</code>. For example, in the following example, <code>&#x3C;MessageButton></code> will re-render whenever <code>&#x3C;FriendList></code>'s state changes:<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">FriendList</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> friends <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> onlineCount <span class="token operator">=</span> <span class="token function">useFriendOnlineCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>friends<span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span><span class="token maybe-class-name">NoFriends</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>span<span class="token operator">></span><span class="token punctuation">{</span>onlineCount<span class="token punctuation">}</span> online<span class="token operator">&#x3C;</span><span class="token operator">/</span>span<span class="token operator">></span>
      <span class="token punctuation">{</span>friends<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">friend</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">FriendListCard</span> key<span class="token operator">=</span><span class="token punctuation">{</span>friend<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span> friend<span class="token operator">=</span><span class="token punctuation">{</span>friend<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">MessageButton</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p><a href="https://playground.react.dev/#N4Igzg9grgTgxgUxALhAMygOzgFwJYSYAEAYjHgpgCYAyeYOAFMEWuZVWEQL4CURwADrEicQgyKEANnkwIAwtEw4iAXiJQwCMhWoB5TDLmKsTXgG5hRInjRFGbXZwB0UygHMcACzWr1ABn4hEWsYBBxYYgAeADkIHQ4uAHoAPksRbisiMIiYYkYs6yiqPAA3FMLrIiiwAAcAQ0wU4GlZBSUcbklDNqikusaKkKrgR0TnAFt62sYHdmp+VRT7SqrqhOo6Bnl6mCoiAGsEAE9VUfmqZzwqLrHqM7ubolTVol5eTOGigFkEMDB6u4EAAhKA4HCEZ5DNZ9ErlLIWYTcEDcIA"><em>See this example in the React Compiler Playground</em></a><p>React Compiler automatically applies the equivalent of manual memoization, ensuring that only the relevant parts of an app re-render as state changes, which is sometimes referred to as "fine-grained reactivity". In the above example, React Compiler determines that the return value of <code>&#x3C;FriendListCard /></code> can be reused even as <code>friends</code> changes, and can avoid recreating this JSX <em>and</em> avoid re-rendering <code>&#x3C;MessageButton></code> as the count changes.</section><section class="level4"aria-labelledby="expensive-calculations-also-get-memoized-expensive-calculations-also-get-memoized"><h4 id="expensive-calculations-also-get-memoized-expensive-calculations-also-get-memoized">Expensive calculations also get memoized {/<em>expensive-calculations-also-get-memoized</em>/}</h4><p>The compiler can also automatically memoize for expensive calculations used during rendering:<pre class="language-js"><code class="language-js"><span class="token comment">// **Not** memoized by React Compiler, since this is not a component or hook</span>
<span class="token keyword">function</span> <span class="token function">expensivelyProcessAReallyLargeArrayOfObjects</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>

<span class="token comment">// Memoized by React Compiler since this is a component</span>
<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">TableContainer</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> items <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// This function call would be memoized:</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">expensivelyProcessAReallyLargeArrayOfObjects</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre><p><a href="https://playground.react.dev/#N4Igzg9grgTgxgUxALhAejQAgFTYHIQAuumAtgqRAJYBeCAJpgEYCemASggIZyGYDCEUgAcqAGwQwANJjBUAdokyEAFlTCZ1meUUxdMcIcIjyE8vhBiYVECAGsAOvIBmURYSonMCAB7CzcgBuCGIsAAowEIhgYACCnFxioQAyXDAA5gixMDBcLADyzvlMAFYIvGAAFACUmMCYaNiYAHStOFgAvk5OGJgAshTUdIysHNy8AkbikrIKSqpaWvqGIiZmhE6u7p7ymAAqXEwSguZcCpKV9VSEFBodtcBOmAYmYHz0XIT6ALzefgFUYKhCJRBAxeLcJIsVIZLI5PKFYplCqVa63aoAbm6u0wMAQhFguwAPPRAQA+YAfL4dIloUmBMlODogDpAA"><em>See this example in the React Compiler Playground</em></a><p>However, if <code>expensivelyProcessAReallyLargeArrayOfObjects</code> is truly an expensive function, you may want to consider implementing its own memoization outside of React, because:<ul><li>React Compiler only memoizes React components and hooks, not every function<li>React Compiler's memoization is not shared across multiple components or hooks</ul><p>So if <code>expensivelyProcessAReallyLargeArrayOfObjects</code> was used in many different components, even if the same exact items were passed down, that expensive calculation would be run repeatedly. We recommend <a href="https://react.dev/reference/react/useMemo#how-to-tell-if-a-calculation-is-expensive">profiling</a> first to see if it really is that expensive before making code more complicated.</section></deepdive></section><section class="level3"aria-labelledby="what-does-the-compiler-assume-what-does-the-compiler-assume"><h3 id="what-does-the-compiler-assume-what-does-the-compiler-assume">What does the compiler assume? {/<em>what-does-the-compiler-assume</em>/}</h3><p>React Compiler assumes that your code:<ol><li>Is valid, semantic JavaScript<li>Tests that nullable/optional values and properties are defined before accessing them (for example, by enabling <a href="https://www.typescriptlang.org/tsconfig/#strictNullChecks"><code>strictNullChecks</code></a> if using TypeScript), i.e., <code>if (object.nullableProperty) { object.nullableProperty.foo }</code> or with optional-chaining <code>object.nullableProperty?.foo</code><li>Follows the <a href="https://react.dev/reference/rules">Rules of React</a></ol><p>React Compiler can verify many of the Rules of React statically, and will safely skip compilation when it detects an error. To see the errors we recommend also installing <a href="https://www.npmjs.com/package/eslint-plugin-react-compiler">eslint-plugin-react-compiler</a>.</section><section class="level3"aria-labelledby="should-i-try-out-the-compiler-should-i-try-out-the-compiler"><h3 id="should-i-try-out-the-compiler-should-i-try-out-the-compiler">Should I try out the compiler? {/<em>should-i-try-out-the-compiler</em>/}</h3><p>Please note that the compiler is still experimental and has many rough edges. While it has been used in production at companies like Meta, rolling out the compiler to production for your app will depend on the health of your codebase and how well you've followed the <a href="/reference/rules">Rules of React</a>.<p><strong>You don't have to rush into using the compiler now. It's okay to wait until it reaches a stable release before adopting it.</strong> However, we do appreciate trying it out in small experiments in your apps so that you can <a href="#reporting-issues">provide feedback</a> to us to help make the compiler better.</section><section class="level2"aria-labelledby="getting-started-getting-started"><h2 id="getting-started-getting-started">Getting Started {/<em>getting-started</em>/}</h2><p>In addition to these docs, we recommend checking the <a href="https://github.com/reactwg/react-compiler">React Compiler Working Group</a> for additional information and discussion about the compiler.<section class="level3"aria-labelledby="checking-compatibility-checking-compatibility"><h3 id="checking-compatibility-checking-compatibility">Checking compatibility {/<em>checking-compatibility</em>/}</h3><p>Prior to installing the compiler, you can first check to see if your codebase is compatible:</p><terminalblock>npx react-compiler-healthcheck@latest</terminalblock><p>This script will:<ul><li>Check how many components can be successfully optimized: higher is better<li>Check for <code>&#x3C;StrictMode></code> usage: having this enabled and followed means a higher chance that the <a href="/reference/rules">Rules of React</a> are followed<li>Check for incompatible library usage: known libraries that are incompatible with the compiler</ul><p>As an example:</p><terminalblock>Successfully compiled 8 out of 9 components. StrictMode usage not found. Found no usage of incompatible libraries.</terminalblock></section><section class="level3"aria-labelledby="installing-eslint-plugin-react-compiler-installing-eslint-plugin-react-compiler"><h3 id="installing-eslint-plugin-react-compiler-installing-eslint-plugin-react-compiler">Installing eslint-plugin-react-compiler {/<em>installing-eslint-plugin-react-compiler</em>/}</h3><p>React Compiler also powers an eslint plugin. The eslint plugin can be used <strong>independently</strong> of the compiler, meaning you can use the eslint plugin even if you don't use the compiler.</p><terminalblock>npm install eslint-plugin-react-compiler</terminalblock><p>Then, add it to your eslint config:<pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'eslint-plugin-react-compiler'</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">'react-compiler/react-compiler'</span><span class="token operator">:</span> <span class="token string">"error"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre><p>The eslint plugin will display any violations of the rules of React in your editor. When it does this, it means that the compiler has skipped over optimizing that component or hook. This is perfectly okay, and the compiler can recover and continue optimizing other components in your codebase.<p><strong>You don't have to fix all eslint violations straight away.</strong> You can address them at your own pace to increase the amount of components and hooks being optimized, but it is not required to fix everything before you can use the compiler.</section><section class="level3"aria-labelledby="rolling-out-the-compiler-to-your-codebase-using-the-compiler-effectively"><h3 id="rolling-out-the-compiler-to-your-codebase-using-the-compiler-effectively">Rolling out the compiler to your codebase {/<em>using-the-compiler-effectively</em>/}</h3><section class="level4"aria-labelledby="existing-projects-existing-projects"><h4 id="existing-projects-existing-projects">Existing projects {/<em>existing-projects</em>/}</h4><p>The compiler is designed to compile functional components and hooks that follow the <a href="/reference/rules">Rules of React</a>. It can also handle code that breaks those rules by bailing out (skipping over) those components or hooks. However, due to the flexible nature of JavaScript, the compiler cannot catch every possible violation and may compile with false negatives: that is, the compiler may accidentally compile a component/hook that breaks the Rules of React which can lead to undefined behavior.<p>For this reason, to adopt the compiler successfully on existing projects, we recommend running it on a small directory in your product code first. You can do this by configuring the compiler to only run on a specific set of directories:<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token maybe-class-name">ReactCompilerConfig</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">sources</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">filename</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> filename<span class="token punctuation">.</span><span class="token method function property-access">indexOf</span><span class="token punctuation">(</span><span class="token string">'src/path/to/dir'</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>In rare cases, you can also configure the compiler to run in "opt-in" mode using the <code>compilationMode: "annotation"</code> option. This makes it so the compiler will only compile components and hooks annotated with a <code>"use memo"</code> directive. Please note that the <code>annotation</code> mode is a temporary one to aid early adopters, and that we don't intend for the <code>"use memo"</code> directive to be used for the long term.<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token maybe-class-name">ReactCompilerConfig</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">compilationMode</span><span class="token operator">:</span> <span class="token string">"annotation"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// src/app.jsx</span>
<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token string">"use memo"</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre><p>When you have more confidence with rolling out the compiler, you can expand coverage to other directories as well and slowly roll it out to your whole app.</section><section class="level4"aria-labelledby="new-projects-new-projects"><h4 id="new-projects-new-projects">New projects {/<em>new-projects</em>/}</h4><p>If you're starting a new project, you can enable the compiler on your entire codebase, which is the default behavior.</section></section></section><section class="level2"aria-labelledby="usage-installation"><h2 id="usage-installation">Usage {/<em>installation</em>/}</h2><section class="level3"aria-labelledby="babel-usage-with-babel"><h3 id="babel-usage-with-babel">Babel {/<em>usage-with-babel</em>/}</h3><terminalblock>npm install babel-plugin-react-compiler</terminalblock><p>The compiler includes a Babel plugin which you can use in your build pipeline to run the compiler.<p>After installing, add it to your Babel config. Please note that it's critical that the compiler run <strong>first</strong> in the pipeline:<pre class="language-js"><code class="language-js"><span class="token comment">// babel.config.js</span>
<span class="token keyword">const</span> <span class="token maybe-class-name">ReactCompilerConfig</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">[</span><span class="token string">'babel-plugin-react-compiler'</span><span class="token punctuation">,</span> <span class="token maybe-class-name">ReactCompilerConfig</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// must run first!</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p><code>babel-plugin-react-compiler</code> should run first before other Babel plugins as the compiler requires the input source information for sound analysis.</section><section class="level3"aria-labelledby="vite-usage-with-vite"><h3 id="vite-usage-with-vite">Vite {/<em>usage-with-vite</em>/}</h3><p>If you use Vite, you can add the plugin to vite-plugin-react:<pre class="language-js"><code class="language-js"><span class="token comment">// vite.config.js</span>
<span class="token keyword">const</span> <span class="token maybe-class-name">ReactCompilerConfig</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token function">react</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">babel</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">[</span><span class="token string">"babel-plugin-react-compiler"</span><span class="token punctuation">,</span> <span class="token maybe-class-name">ReactCompilerConfig</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section class="level3"aria-labelledby="nextjs-usage-with-nextjs"><h3 id="nextjs-usage-with-nextjs">Next.js {/<em>usage-with-nextjs</em>/}</h3><p>Next.js has an experimental configuration to enable the React Compiler. It automatically ensures Babel is set up with <code>babel-plugin-react-compiler</code>.<ul><li>Install Next.js canary, which uses React 19 Release Candidate<li>Install <code>babel-plugin-react-compiler</code></ul><terminalblock>npm install next@canary babel-plugin-react-compiler</terminalblock><p>Then configure the experimental option in <code>next.config.js</code>:<pre class="language-js"><code class="language-js"><span class="token comment">// next.config.js</span>
<span class="token doc-comment comment">/** <span class="token keyword">@type</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'next'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>NextConfig<span class="token punctuation">}</span></span> */</span>
<span class="token keyword">const</span> nextConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">experimental</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">reactCompiler</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> nextConfig<span class="token punctuation">;</span></code></pre><p>Using the experimental option ensures support for the React Compiler in:<ul><li>App Router<li>Pages Router<li>Webpack (default)<li>Turbopack (opt-in through <code>--turbo</code>)</ul></section><section class="level3"aria-labelledby="remix-usage-with-remix"><h3 id="remix-usage-with-remix">Remix {/<em>usage-with-remix</em>/}</h3><p>Install <code>vite-plugin-babel</code>, and add the compiler's Babel plugin to it:</p><terminalblock>npm install vite-plugin-babel</terminalblock><pre class="language-js"><code class="language-js"><span class="token comment">// vite.config.js</span>
<span class="token keyword module">import</span> <span class="token imports">babel</span> <span class="token keyword module">from</span> <span class="token string">"vite-plugin-babel"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token maybe-class-name">ReactCompilerConfig</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">remix</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">/* ... */</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">babel</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">filter</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.[jt]sx?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">babelConfig</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"@babel/preset-typescript"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// if you use TypeScript</span>
        <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">[</span><span class="token string">"babel-plugin-react-compiler"</span><span class="token punctuation">,</span> <span class="token maybe-class-name">ReactCompilerConfig</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section class="level3"aria-labelledby="webpack-usage-with-webpack"><h3 id="webpack-usage-with-webpack">Webpack {/<em>usage-with-webpack</em>/}</h3><p>You can create your own loader for React Compiler, like so:<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token maybe-class-name">ReactCompilerConfig</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token maybe-class-name">BabelPluginReactCompiler</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'babel-plugin-react-compiler'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">reactCompilerLoader</span><span class="token punctuation">(</span><span class="token parameter">sourceCode<span class="token punctuation">,</span> sourceMap</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">transformSync</span><span class="token punctuation">(</span>sourceCode<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">[</span><span class="token maybe-class-name">BabelPluginReactCompiler</span><span class="token punctuation">,</span> <span class="token maybe-class-name">ReactCompilerConfig</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>result <span class="token operator">===</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">callback</span><span class="token punctuation">(</span>
      <span class="token known-class-name class-name">Error</span><span class="token punctuation">(</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Failed to transform "</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>options<span class="token punctuation">.</span><span class="token property-access">filename</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"</span><span class="token template-punctuation string">`</span></span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">callback</span><span class="token punctuation">(</span>
    <span class="token keyword null nil">null</span><span class="token punctuation">,</span>
    result<span class="token punctuation">.</span><span class="token property-access">code</span><span class="token punctuation">,</span>
    result<span class="token punctuation">.</span><span class="token property-access">map</span> <span class="token operator">===</span> <span class="token keyword null nil">null</span> <span class="token operator">?</span> <span class="token keyword nil">undefined</span> <span class="token operator">:</span> result<span class="token punctuation">.</span><span class="token property-access">map</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> reactCompilerLoader<span class="token punctuation">;</span></code></pre></section><section class="level3"aria-labelledby="expo-usage-with-expo"><h3 id="expo-usage-with-expo">Expo {/<em>usage-with-expo</em>/}</h3><p>Please refer to <a href="https://docs.expo.dev/preview/react-compiler/">Expo's docs</a> to enable and use the React Compiler in Expo apps.</section><section class="level3"aria-labelledby="metro-react-native-usage-with-react-native-metro"><h3 id="metro-react-native-usage-with-react-native-metro">Metro (React Native) {/<em>usage-with-react-native-metro</em>/}</h3><p>React Native uses Babel via Metro, so refer to the <a href="#usage-with-babel">Usage with Babel</a> section for installation instructions.</section><section class="level3"aria-labelledby="rspack-usage-with-rspack"><h3 id="rspack-usage-with-rspack">Rspack {/<em>usage-with-rspack</em>/}</h3><p>Please refer to <a href="https://rspack.dev/guide/tech/react#react-compiler">Rspack's docs</a> to enable and use the React Compiler in Rspack apps.</section><section class="level3"aria-labelledby="rsbuild-usage-with-rsbuild"><h3 id="rsbuild-usage-with-rsbuild">Rsbuild {/<em>usage-with-rsbuild</em>/}</h3><p>Please refer to <a href="https://rsbuild.dev/guide/framework/react#react-compiler">Rsbuild's docs</a> to enable and use the React Compiler in Rsbuild apps.</section></section><section class="level2"aria-labelledby="troubleshooting-troubleshooting"><h2 id="troubleshooting-troubleshooting">Troubleshooting {/<em>troubleshooting</em>/}</h2><p>To report issues, please first create a minimal repro on the <a href="https://playground.react.dev/">React Compiler Playground</a> and include it in your bug report. You can open issues in the <a href="https://github.com/facebook/react/issues">facebook/react</a> repo.<p>You can also provide feedback in the React Compiler Working Group by applying to be a member. Please see <a href="https://github.com/reactwg/react-compiler">the README for more details on joining</a>.<section class="level3"aria-labelledby="0--_c-is-not-a-function-error-0--_c-is-not-a-function-error"><h3 id="0--_c-is-not-a-function-error-0--_c-is-not-a-function-error"><code>(0 , _c) is not a function</code> error {/<em>0--_c-is-not-a-function-error</em>/}</h3><p>This occurs if you are not using React 19 RC and up. To fix this, <a href="https://react.dev/blog/2024/04/25/react-19-upgrade-guide">upgrade your app to React 19 RC</a> first.<p>If you are unable to upgrade to React 19, you may try a userspace implementation of the cache function as described in the <a href="https://github.com/reactwg/react-compiler/discussions/6">Working Group</a>. However, please note that this is not recommended and you should upgrade to React 19 when possible.</section><section class="level3"aria-labelledby="how-do-i-know-my-components-have-been-optimized-how-do-i-know-my-components-have-been-optimized"><h3 id="how-do-i-know-my-components-have-been-optimized-how-do-i-know-my-components-have-been-optimized">How do I know my components have been optimized? {/<em>how-do-i-know-my-components-have-been-optimized</em>/}</h3><p><a href="/learn/react-developer-tools">React Devtools</a> (v5.0+) has built-in support for React Compiler and will display a "Memo ✨" badge next to components that have been optimized by the compiler.</section><section class="level3"aria-labelledby="something-is-not-working-after-compilation-something-is-not-working-after-compilation"><h3 id="something-is-not-working-after-compilation-something-is-not-working-after-compilation">Something is not working after compilation {/<em>something-is-not-working-after-compilation</em>/}</h3><p>If you have eslint-plugin-react-compiler installed, the compiler will display any violations of the rules of React in your editor. When it does this, it means that the compiler has skipped over optimizing that component or hook. This is perfectly okay, and the compiler can recover and continue optimizing other components in your codebase. <strong>You don't have to fix all eslint violations straight away.</strong> You can address them at your own pace to increase the amount of components and hooks being optimized.<p>Due to the flexible and dynamic nature of JavaScript however, it's not possible to comprehensively detect all cases. Bugs and undefined behavior such as infinite loops may occur in those cases.<p>If your app doesn't work properly after compilation and you aren't seeing any eslint errors, the compiler may be incorrectly compiling your code. To confirm this, try to make the issue go away by aggressively opting out any component or hook you think might be related via the <a href="#opt-out-of-the-compiler-for-a-component"><code>"use no memo"</code> directive</a>.<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">SuspiciousComponent</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token string">"use no memo"</span><span class="token punctuation">;</span> <span class="token comment">// opts out this component from being compiled by React Compiler</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre><note>#### `"use no memo"` {/*use-no-memo*/}<p><code>"use no memo"</code> is a <em>temporary</em> escape hatch that lets you opt-out components and hooks from being compiled by the React Compiler. This directive is not meant to be long lived the same way as eg <a href="/reference/rsc/use-client"><code>"use client"</code></a> is.<p>It is not recommended to reach for this directive unless it's strictly necessary. Once you opt-out a component or hook, it is opted-out forever until the directive is removed. This means that even if you fix the code, the compiler will still skip over compiling it unless you remove the directive.<p>When you make the error go away, confirm that removing the opt out directive makes the issue come back. Then share a bug report with us (you can try to reduce it to a small repro, or if it's open source code you can also just paste the entire source) using the <a href="https://playground.react.dev">React Compiler Playground</a> so we can identify and help fix the issue.</p></note></section><section class="level3"aria-labelledby="other-issues-other-issues"><h3 id="other-issues-other-issues">Other issues {/<em>other-issues</em>/}</h3><p>Please see <a href="https://github.com/reactwg/react-compiler/discussions/7">https://github.com/reactwg/react-compiler/discussions/7</a>. <span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></section></note></section>
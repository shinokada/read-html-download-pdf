<!doctype html><html lang="ja"><meta charset="utf-8"><title>lazy</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"type="text/css"href="../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="lazy"><h1 id="lazy">lazy</h1><intro><p><code>lazy</code> ã‚’ä½¿ã†ã“ã¨ã§ã€ã‚ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒåˆã‚ã¦ãƒ¬ãƒ³ãƒ€ãƒ¼ã•ã‚Œã‚‹ã¾ã§ã€ãã®ã‚³ãƒ¼ãƒ‰ã®èª­ã¿è¾¼ã¿ã‚’é…å»¶ã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token maybe-class-name">SomeComponent</span> <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span>load<span class="token punctuation">)</span></code></pre></intro><inlinetoc><section class="level2"aria-labelledby="ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹-reference"><h2 id="ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹-reference">ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ {/<em>reference</em>/}</h2><section class="level3"aria-labelledby="lazyload-lazy"><h3 id="lazyload-lazy"><code>lazy(load)</code> {/<em>lazy</em>/}</h3><p><code>lazy</code> ã‚’ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å¤–éƒ¨ã§å‘¼ã³å‡ºã—ã€é…å»¶èª­ã¿è¾¼ã¿ã•ã‚Œã‚‹ React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å®£è¨€ã—ã¾ã™ã€‚<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> lazy <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token maybe-class-name">MarkdownPreview</span> <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'./MarkdownPreview.js'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><a href="#usage">ã•ã‚‰ã«ä¾‹ã‚’è¦‹ã‚‹</a><section class="level4"aria-labelledby="å¼•æ•°-parameters"><h4 id="å¼•æ•°-parameters">å¼•æ•° {/<em>parameters</em>/}</h4><ul><li><code>load</code>: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a> ã¾ãŸã¯ <em>thenable</em>ï¼ˆ<code>then</code> ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æŒã¤ Promise ã®ã‚ˆã†ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰ã‚’è¿”ã™é–¢æ•°ã€‚è¿”ã•ã‚ŒãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’åˆã‚ã¦ãƒ¬ãƒ³ãƒ€ãƒ¼ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ãã¾ã§ React ã¯ <code>load</code> ã‚’å‘¼ã³å‡ºã—ã¾ã›ã‚“ã€‚React ãŒåˆã‚ã¦ <code>load</code> ã‚’å‘¼ã³å‡ºã—ãŸå¾Œã€ãã‚ŒãŒè§£æ±º (resolve) ã™ã‚‹ã®ã‚’å¾…ã¡ã€è§£æ±ºã—ãŸå€¤ã® <code>.default</code> ã‚’ React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã—ã¦ãƒ¬ãƒ³ãƒ€ãƒ¼ã—ã¾ã™ã€‚è¿”ã•ã‚ŒãŸ Promise ã¨è§£æ±ºæ¸ˆã¿ã®å€¤ã¯ä¸¡æ–¹ã¨ã‚‚ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã‚‹ãŸã‚ã€React ã¯ <code>load</code> ã‚’ 2 åº¦ä»¥ä¸Šå‘¼ã³å‡ºã—ã¾ã›ã‚“ã€‚Promise ãŒ reject ã•ã‚ŒãŸå ´åˆã€React ã¯ãã®ç†ç”±ã‚’ <code>throw</code> ã—ã€æœ€ã‚‚è¿‘ã„ã‚¨ãƒ©ãƒ¼ãƒã‚¦ãƒ³ãƒ€ãƒªã§å‡¦ç†ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚</ul></section><section class="level4"aria-labelledby="è¿”ã‚Šå€¤-returns"><h4 id="è¿”ã‚Šå€¤-returns">è¿”ã‚Šå€¤ {/<em>returns</em>/}</h4><p><code>lazy</code> ã¯ã€ãƒ„ãƒªãƒ¼å†…ã§ãƒ¬ãƒ³ãƒ€ãƒ¼ã§ãã‚‹ React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’è¿”ã—ã¾ã™ã€‚é…å»¶ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚³ãƒ¼ãƒ‰ãŒã¾ã èª­ã¿è¾¼ã¾ã‚Œã¦ã„ãªã„é–“ã€ãƒ¬ãƒ³ãƒ€ãƒ¼ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã‚µã‚¹ãƒšãƒ³ãƒ‰ (suspend) ã—ã¾ã™ã€‚<a href="/reference/react/Suspense"><code>&#x3C;Suspense></code></a> ã‚’ä½¿ç”¨ã—ã¦ã€èª­ã¿è¾¼ã¿ä¸­ã«ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚</section></section><section class="level3"aria-labelledby="load-é–¢æ•°-load"><h3 id="load-é–¢æ•°-load"><code>load</code> é–¢æ•° {/<em>load</em>/}</h3><section class="level4"aria-labelledby="å¼•æ•°-load-parameters"><h4 id="å¼•æ•°-load-parameters">å¼•æ•° {/<em>load-parameters</em>/}</h4><p><code>load</code> ã¯å¼•æ•°ã‚’å—ã‘å–ã‚Šã¾ã›ã‚“ã€‚</section><section class="level4"aria-labelledby="è¿”ã‚Šå€¤-load-returns"><h4 id="è¿”ã‚Šå€¤-load-returns">è¿”ã‚Šå€¤ {/<em>load-returns</em>/}</h4><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a> ã¾ãŸã¯ä½•ã‚‰ã‹ã® <em>thenable</em>ï¼ˆ<code>then</code> ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æŒã¤ Promise ã®ã‚ˆã†ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰ã‚’è¿”ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚æœ€çµ‚çš„ã«ã€æœ‰åŠ¹ãª React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå‹ã€ã¤ã¾ã‚Šä¾‹ãˆã°é–¢æ•°ã€<a href="/reference/react/memo"><code>memo</code></a>ã€ã¾ãŸã¯ <a href="/reference/react/forwardRef"><code>forwardRef</code></a> ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚ˆã†ãªã‚‚ã®ã‚’ <code>.default</code> ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¨ã—ã¦æŒã¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«è§£æ±ºã•ã‚Œã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</section></section></section><section class="level2"aria-labelledby="ä½¿ç”¨æ³•-usage"><h2 id="ä½¿ç”¨æ³•-usage">ä½¿ç”¨æ³• {/<em>usage</em>/}</h2><section class="level3"aria-labelledby="ã‚µã‚¹ãƒšãƒ³ã‚¹ã‚’ä½¿ã£ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®é…å»¶èª­ã¿è¾¼ã¿-suspense-for-code-splitting"><h3 id="ã‚µã‚¹ãƒšãƒ³ã‚¹ã‚’ä½¿ã£ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®é…å»¶èª­ã¿è¾¼ã¿-suspense-for-code-splitting">ã‚µã‚¹ãƒšãƒ³ã‚¹ã‚’ä½¿ã£ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®é…å»¶èª­ã¿è¾¼ã¿ {/<em>suspense-for-code-splitting</em>/}</h3><p>é€šå¸¸ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯é™çš„ãª <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import"><code>import</code></a> å®£è¨€ã‚’ä½¿ã£ã¦ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã™ã€‚<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">MarkdownPreview</span></span> <span class="token keyword module">from</span> <span class="token string">'./MarkdownPreview.js'</span><span class="token punctuation">;</span></code></pre><p>ã“ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚³ãƒ¼ãƒ‰ã®èª­ã¿è¾¼ã¿ã‚’ã€åˆã‚ã¦ãƒ¬ãƒ³ãƒ€ãƒ¼ã•ã‚Œã‚‹ã¨ãã¾ã§é…å»¶ã•ã›ã‚‹ã«ã¯ã€ã“ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ç½®ãæ›ãˆã¾ã™ã€‚<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> lazy <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token maybe-class-name">MarkdownPreview</span> <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'./MarkdownPreview.js'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ã“ã®ã‚³ãƒ¼ãƒ‰ã¯<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/import">ãƒ€ã‚¤ãƒŠãƒŸãƒƒã‚¯ <code>import()</code></a> ã‚’ç”¨ã„ã¦ãŠã‚Šã€ã‚ãªãŸã®ãƒãƒ³ãƒ‰ãƒ©ã‚„ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‹ã‚‰ã®ã‚µãƒãƒ¼ãƒˆãŒå¿…è¦ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã“ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ç”¨ã„ã‚‹å ´åˆã¯ã€é…å»¶ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã‚ˆã†ã¨ã—ã¦ã„ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒ <code>default</code> ã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚<p>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚³ãƒ¼ãƒ‰ãŒã‚ªãƒ³ãƒ‡ãƒãƒ³ãƒ‰ã§èª­ã¿è¾¼ã¾ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã§ã€èª­ã¿è¾¼ã¿ã®æœ€ä¸­ã«ã¯ä½•ã‚’è¡¨ç¤ºã™ã‚‹ã¹ãã‹ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ã€é…å»¶ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¾ãŸã¯ãã®è¦ªã®ã„ãšã‚Œã‹ã‚’ <a href="/reference/react/Suspense"><code>&#x3C;Suspense></code></a> ãƒã‚¦ãƒ³ãƒ€ãƒªã§ãƒ©ãƒƒãƒ—ã™ã‚‹ã“ã¨ã§è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">Suspense</span> fallback<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">Loading</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">}</span><span class="token operator">></span>
  <span class="token operator">&#x3C;</span>h2<span class="token operator">></span><span class="token maybe-class-name">Preview</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h2<span class="token operator">></span>
  <span class="token operator">&#x3C;</span><span class="token maybe-class-name">MarkdownPreview</span> <span class="token operator">/</span><span class="token operator">></span>
<span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Suspense</span><span class="token operator">></span></code></pre><p>ã“ã®ä¾‹ã§ã¯ã€<code>MarkdownPreview</code> ã®ã‚³ãƒ¼ãƒ‰ã¯ãƒ¬ãƒ³ãƒ€ãƒ¼ã—ã‚ˆã†ã¨ã™ã‚‹ã¾ã§èª­ã¿è¾¼ã¾ã‚Œã¾ã›ã‚“ã€‚ã‚‚ã— <code>MarkdownPreview</code> ãŒã¾ã èª­ã¿è¾¼ã¾ã‚Œã¦ã„ãªã„å ´åˆã€ãã®ä»£ã‚ã‚Šã« <code>Loading</code> ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚’ã‚ªãƒ³ã«ã—ã¦ã¿ã¦ãã ã•ã„ã€‚</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState<span class="token punctuation">,</span> <span class="token maybe-class-name">Suspense</span><span class="token punctuation">,</span> lazy <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">Loading</span></span> <span class="token keyword module">from</span> <span class="token string">'./Loading.js'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token maybe-class-name">MarkdownPreview</span> <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">delayForDemo</span><span class="token punctuation">(</span><span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'./MarkdownPreview.js'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MarkdownEditor</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>showPreview<span class="token punctuation">,</span> setShowPreview<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>markdown<span class="token punctuation">,</span> setMarkdown<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'Hello, **world**!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>textarea value<span class="token operator">=</span><span class="token punctuation">{</span>markdown<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token arrow operator">=></span> <span class="token function">setMarkdown</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>input type<span class="token operator">=</span><span class="token string">"checkbox"</span> checked<span class="token operator">=</span><span class="token punctuation">{</span>showPreview<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token arrow operator">=></span> <span class="token function">setShowPreview</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">checked</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
        <span class="token maybe-class-name">Show</span> preview
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>hr <span class="token operator">/</span><span class="token operator">></span>
      <span class="token punctuation">{</span>showPreview <span class="token operator">&#x26;&#x26;</span> <span class="token punctuation">(</span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Suspense</span> fallback<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">Loading</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">}</span><span class="token operator">></span>
          <span class="token operator">&#x3C;</span>h2<span class="token operator">></span><span class="token maybe-class-name">Preview</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h2<span class="token operator">></span>
          <span class="token operator">&#x3C;</span><span class="token maybe-class-name">MarkdownPreview</span> markdown<span class="token operator">=</span><span class="token punctuation">{</span>markdown<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Suspense</span><span class="token operator">></span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Add a fixed delay so you can see the loading state</span>
<span class="token keyword">function</span> <span class="token function">delayForDemo</span><span class="token punctuation">(</span><span class="token parameter">promise</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> promise<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Loading</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token operator">&#x3C;</span>i<span class="token operator">></span><span class="token maybe-class-name">Loading</span><span class="token spread operator">...</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>i<span class="token operator">></span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Remarkable</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'remarkable'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> md <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Remarkable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MarkdownPreview</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> markdown <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div
      className<span class="token operator">=</span><span class="token string">"content"</span>
      dangerouslySetInnerHTML<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token literal-property property">__html</span><span class="token operator">:</span> md<span class="token punctuation">.</span><span class="token method function property-access">render</span><span class="token punctuation">(</span>markdown<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"immer"</span><span class="token operator">:</span> <span class="token string">"1.7.3"</span><span class="token punctuation">,</span>
    <span class="token property">"react"</span><span class="token operator">:</span> <span class="token string">"latest"</span><span class="token punctuation">,</span>
    <span class="token property">"react-dom"</span><span class="token operator">:</span> <span class="token string">"latest"</span><span class="token punctuation">,</span>
    <span class="token property">"react-scripts"</span><span class="token operator">:</span> <span class="token string">"latest"</span><span class="token punctuation">,</span>
    <span class="token property">"remarkable"</span><span class="token operator">:</span> <span class="token string">"2.0.1"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"react-scripts start"</span><span class="token punctuation">,</span>
    <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"react-scripts build"</span><span class="token punctuation">,</span>
    <span class="token property">"test"</span><span class="token operator">:</span> <span class="token string">"react-scripts test --env=jsdom"</span><span class="token punctuation">,</span>
    <span class="token property">"eject"</span><span class="token operator">:</span> <span class="token string">"react-scripts eject"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">label</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">input<span class="token punctuation">,</span> textarea</span> <span class="token punctuation">{</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">min-height</span><span class="token punctuation">:</span> <span class="token number">200</span><span class="token unit">px</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p>ã“ã®ãƒ‡ãƒ¢ã¯äººç‚ºçš„ã«é…å»¶ã•ã›ã¦èª­ã¿è¾¼ã¾ã‚Œã¾ã™ã€‚ã‚‚ã†ä¸€åº¦ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚’ã‚ªãƒ•ã«ã—ã¦ã‹ã‚‰ã‚ªãƒ³ã«ã™ã‚‹ã¨ã€<code>Preview</code> ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ã¯è¡¨ç¤ºã•ã‚Œã¾ã›ã‚“ã€‚å†åº¦ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ã‚’è¡¨ç¤ºã™ã‚‹ã«ã¯ã€ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ã® "Reset" ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚<p><a href="/reference/react/Suspense">ã‚µã‚¹ãƒšãƒ³ã‚¹ã‚’ä½¿ã£ãŸãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ã®ç®¡ç†ã«ã¤ã„ã¦ã‚‚ã£ã¨å­¦ã¶</a></section></section><section class="level2"aria-labelledby="ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°-troubleshooting"><h2 id="ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°-troubleshooting">ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚° {/<em>troubleshooting</em>/}</h2><section class="level3"aria-labelledby="lazy-ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®-state-ãŒäºˆæœŸã›ãšãƒªã‚»ãƒƒãƒˆã•ã‚Œã‚‹-my-lazy-components-state-gets-reset-unexpectedly"><h3 id="lazy-ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®-state-ãŒäºˆæœŸã›ãšãƒªã‚»ãƒƒãƒˆã•ã‚Œã‚‹-my-lazy-components-state-gets-reset-unexpectedly"><code>lazy</code> ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã® state ãŒäºˆæœŸã›ãšãƒªã‚»ãƒƒãƒˆã•ã‚Œã‚‹ {/<em>my-lazy-components-state-gets-reset-unexpectedly</em>/}</h3><p><code>lazy</code> ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä»–ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®<em>å†…éƒ¨</em>ã§å®£è¨€ã—ãªã„ã§ãã ã•ã„ã€‚<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> lazy <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Editor</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ğŸ”´ Bad: This will cause all state to be reset on re-renders</span>
  <span class="token keyword">const</span> <span class="token maybe-class-name">MarkdownPreview</span> <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'./MarkdownPreview.js'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre><p>ä»£ã‚ã‚Šã«ã€å¸¸ã«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã§å®£è¨€ã—ã¦ãã ã•ã„ã€‚<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> lazy <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token comment">// âœ… Good: Declare lazy components outside of your components</span>
<span class="token keyword">const</span> <span class="token maybe-class-name">MarkdownPreview</span> <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'./MarkdownPreview.js'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Editor</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre><p><span style="float:footnote"><a href="../../index.html#toc">Go to TOC</a></span></section></section></inlinetoc></section>
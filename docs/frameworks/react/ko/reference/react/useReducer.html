<!doctype html><html lang="ko"><meta charset="utf-8"><title>useReducer</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="usereducer"><h1 id="usereducer">useReducer</h1><intro><p><code>useReducer</code>ëŠ” ì»´í¬ë„ŒíŠ¸ì— <a href="/learn/extracting-state-logic-into-a-reducer">reducer</a>ë¥¼ ì¶”ê°€í•˜ëŠ” React Hookì…ë‹ˆë‹¤.<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> initialArg<span class="token punctuation">,</span> init<span class="token operator">?</span><span class="token punctuation">)</span></code></pre></intro><inlinetoc><section class="level2"aria-labelledby="ë ˆí¼ëŸ°ìŠ¤-reference"><h2 id="ë ˆí¼ëŸ°ìŠ¤-reference">ë ˆí¼ëŸ°ìŠ¤ {/<em>reference</em>/}</h2><section class="level3"aria-labelledby="usereducerreducer-initialarg-init-usereducer"><h3 id="usereducerreducer-initialarg-init-usereducer"><code>useReducer(reducer, initialArg, init?)</code> {/<em>usereducer</em>/}</h3><p><code>useReducer</code>ë¥¼ ì»´í¬ë„ŒíŠ¸ì˜ ìµœìƒìœ„ì— í˜¸ì¶œí•˜ê³ , <a href="/learn/extracting-state-logic-into-a-reducer">reducer</a>ë¥¼ ì´ìš©í•´ stateë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useReducer <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyComponent</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">42</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span></code></pre><p><a href="#usage">ì•„ë˜ì—ì„œ ë” ë§ì€ ì˜ˆì‹œë¥¼ í™•ì¸í•˜ì„¸ìš”.</a><section class="level4"aria-labelledby="ë§¤ê°œë³€ìˆ˜-parameters"><h4 id="ë§¤ê°œë³€ìˆ˜-parameters">ë§¤ê°œë³€ìˆ˜ {/<em>parameters</em>/}</h4><ul><li><code>reducer</code>: stateê°€ ì–´ë–»ê²Œ ì—…ë°ì´íŠ¸ ë˜ëŠ”ì§€ ì§€ì •í•˜ëŠ” ë¦¬ë“€ì„œ í•¨ìˆ˜ì…ë‹ˆë‹¤. ë¦¬ë“€ì„œ í•¨ìˆ˜ëŠ” ë°˜ë“œì‹œ ìˆœìˆ˜ í•¨ìˆ˜ì—¬ì•¼ í•˜ë©°, stateì™€ actionì„ ì¸ìˆ˜ë¡œ ë°›ì•„ì•¼ í•˜ê³ , ë‹¤ìŒ stateë¥¼ ë°˜í™˜í•´ì•¼ í•©ë‹ˆë‹¤. stateì™€ actionì—ëŠ” ëª¨ë“  ë°ì´í„° íƒ€ì…ì´ í• ë‹¹ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<li><code>initialArg</code>: ì´ˆê¸° stateê°€ ê³„ì‚°ë˜ëŠ” ê°’ì…ë‹ˆë‹¤. ëª¨ë“  ë°ì´í„° íƒ€ì…ì´ í• ë‹¹ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ˆê¸° stateê°€ ì–´ë–»ê²Œ ê³„ì‚°ë˜ëŠ”ì§€ëŠ” ë‹¤ìŒ <code>init</code> ì¸ìˆ˜ì— ë”°ë¼ ë‹¬ë¼ì§‘ë‹ˆë‹¤.<li><strong>ì„ íƒì‚¬í•­</strong> <code>init</code>: ì´ˆê¸° stateë¥¼ ë°˜í™˜í•˜ëŠ” ì´ˆê¸°í™” í•¨ìˆ˜ì…ë‹ˆë‹¤. ì´ í•¨ìˆ˜ê°€ ì¸ìˆ˜ì— í• ë‹¹ë˜ì§€ ì•Šìœ¼ë©´ ì´ˆê¸° stateëŠ” <code>initialArg</code>ë¡œ ì„¤ì •ë©ë‹ˆë‹¤. í• ë‹¹ë˜ì—ˆë‹¤ë©´ ì´ˆê¸° stateëŠ” <code>init(initialArg)</code>ë¥¼ í˜¸ì¶œí•œ ê²°ê³¼ê°€ í• ë‹¹ë©ë‹ˆë‹¤.</ul></section><section class="level4"aria-labelledby="ë°˜í™˜ê°’-returns"><h4 id="ë°˜í™˜ê°’-returns">ë°˜í™˜ê°’ {/<em>returns</em>/}</h4><p><code>useReducer</code>ëŠ” 2ê°œì˜ ì—˜ë¦¬ë¨¼íŠ¸ë¡œ êµ¬ì„±ëœ ë°°ì—´ì„ ë°˜í™˜í•©ë‹ˆë‹¤.<ol><li>í˜„ì¬ state. ì²«ë²ˆì§¸ ë Œë”ë§ì—ì„œì˜ stateëŠ” <code>init(initialArg)</code> ë˜ëŠ” <code>initialArg</code>ë¡œ ì„¤ì •ë©ë‹ˆë‹¤ (<code>init</code>ì´ ì—†ì„ ê²½ìš° <code>initialArg</code>ë¡œ ì„¤ì •ë©ë‹ˆë‹¤).<li><a href="#dispatch"><code>dispatch</code> í•¨ìˆ˜</a>. <code>dispatch</code>ëŠ” stateë¥¼ ìƒˆë¡œìš´ ê°’ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ê³  ë¦¬ë Œë”ë§ì„ ì¼ìœ¼í‚µë‹ˆë‹¤.</ol></section><section class="level4"aria-labelledby="ì£¼ì˜-ì‚¬í•­-caveats"><h4 id="ì£¼ì˜-ì‚¬í•­-caveats">ì£¼ì˜ ì‚¬í•­ {/<em>caveats</em>/}</h4><ul><li><code>useReducer</code>ëŠ” Hookì´ë¯€ë¡œ <strong>ì»´í¬ë„ŒíŠ¸ì˜ ìµœìƒìœ„</strong> ë˜ëŠ” ì»¤ìŠ¤í…€ Hookì—ì„œë§Œ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë°˜ë³µë¬¸ì´ë‚˜ ì¡°ê±´ë¬¸ì—ì„œëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í•„ìš”í•œ ê²½ìš° ìƒˆë¡œìš´ ì»´í¬ë„ŒíŠ¸ë¥¼ ì¶”ì¶œí•˜ê³  í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ë¡œ stateë¥¼ ì˜®ê²¨ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<li>Strict Modeì—ì„œëŠ” <a href="#my-reducer-or-initializer-function-runs-twice">ìš°ì—°í•œ ë¹„ìˆœìˆ˜ì„±</a>ì„ ì°¾ì•„ë‚´ê¸° ìœ„í•´ reducerì™€ init í•¨ìˆ˜ë¥¼ ë‘ë²ˆ í˜¸ì¶œí•©ë‹ˆë‹¤. ê°œë°œ í™˜ê²½ì—ì„œë§Œ í•œì •ëœ ë™ì‘ì´ë©°, ë°°í¬ ëª¨ë“œì—ëŠ” ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠìŠµë‹ˆë‹¤. reducerì™€ init í•¨ìˆ˜ê°€ ìˆœìˆ˜ í•¨ìˆ˜ë¼ë©´(ê·¸ë˜ì•¼ë§Œ í•˜ë“¯ì´) ë¡œì§ì— ì–´ë– í•œ ì˜í–¥ë„ ë¯¸ì¹˜ì§€ ì•ŠìŠµë‹ˆë‹¤. í˜¸ì¶œ ì¤‘ í•˜ë‚˜ì˜ ê²°ê³¼ëŠ” ë¬´ì‹œí•©ë‹ˆë‹¤.</ul></section></section><section class="level3"aria-labelledby="dispatch-í•¨ìˆ˜-dispatch"><h3 id="dispatch-í•¨ìˆ˜-dispatch"><code>dispatch</code> í•¨ìˆ˜ {/<em>dispatch</em>/}</h3><p><code>useReducer</code>ì— ì˜í•´ ë°˜í™˜ë˜ëŠ” <code>dispatch</code> í•¨ìˆ˜ëŠ” stateë¥¼ ìƒˆë¡œìš´ ê°’ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ê³  ë¦¬ë Œë”ë§ì„ ì¼ìœ¼í‚µë‹ˆë‹¤. <code>dispatch</code>ì˜ ìœ ì¼í•œ ì¸ìˆ˜ëŠ” actionì…ë‹ˆë‹¤.<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">42</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'incremented_age'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span></code></pre><p>ReactëŠ” í˜„ì¬ <code>state</code>ì™€ <code>dispatch</code>ë¥¼ í†µí•´ ì „ë‹¬ëœ actionì„ ì œê³µë°›ì•„ í˜¸ì¶œëœ <code>reducer</code>ì˜ ë°˜í™˜ê°’ì„ í†µí•´ ë‹¤ìŒ stateê°’ì„ ì„¤ì •í•©ë‹ˆë‹¤.<section class="level4"aria-labelledby="ë§¤ê°œë³€ìˆ˜-dispatch-parameters"><h4 id="ë§¤ê°œë³€ìˆ˜-dispatch-parameters">ë§¤ê°œë³€ìˆ˜ {/<em>dispatch-parameters</em>/}</h4><ul><li><code>action</code>: ì‚¬ìš©ìì— ì˜í•´ ìˆ˜í–‰ëœ í™œë™ì…ë‹ˆë‹¤. ëª¨ë“  ë°ì´í„° íƒ€ì…ì´ í• ë‹¹ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì»¨ë²¤ì…˜ì— ì˜í•´ actionì€ ì¼ë°˜ì ìœ¼ë¡œ actionì„ ì •ì˜í•˜ëŠ” <code>type</code> í”„ë¡œí¼í‹°ì™€ ì¶”ê°€ì ì¸ ì •ë³´ë¥¼ í‘œí˜„í•˜ëŠ” ê¸°íƒ€ í”„ë¡œí¼í‹°ë¥¼ í¬í•¨í•œ ê°ì²´ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤.</ul></section><section class="level4"aria-labelledby="ë°˜í™˜ê°’-dispatch-returns"><h4 id="ë°˜í™˜ê°’-dispatch-returns">ë°˜í™˜ê°’ {/<em>dispatch-returns</em>/}</h4><p><code>dispatch</code> í•¨ìˆ˜ëŠ” ì–´ë–¤ ê°’ë„ ë°˜í™˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</section><section class="level4"aria-labelledby="ì£¼ì˜-ì‚¬í•­-setstate-caveats"><h4 id="ì£¼ì˜-ì‚¬í•­-setstate-caveats">ì£¼ì˜ ì‚¬í•­ {/<em>setstate-caveats</em>/}</h4><ul><li><p><code>dispatch</code> í•¨ìˆ˜ëŠ” <strong>ì˜¤ì§ <em>ë‹¤ìŒ</em> ë Œë”ë§ì— ì‚¬ìš©í•  state ë³€ìˆ˜ë§Œ ì—…ë°ì´íŠ¸ í•©ë‹ˆë‹¤.</strong> ë§Œì•½ <code>dispatch</code> í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œ ì§í›„ì— state ë³€ìˆ˜ë¥¼ ì½ëŠ”ë‹¤ë©´ í˜¸ì¶œ ì´ì „ì˜ <a href="#ive-dispatched-an-action-but-logging-gives-me-the-old-state-value">ìµœì‹ í™”ë˜ì§€ ì•Šì€ ê°’ì„ ì°¸ì¡°í•  ê²ƒì…ë‹ˆë‹¤.</a><li><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is"><code>Object.is</code></a> ë¹„êµë¥¼ í†µí•´ ìƒˆë¡­ê²Œ ì œê³µëœ ê°’ê³¼ í˜„ì¬ <code>state</code>ë¥¼ ë¹„êµí•œ ê°’ì´ ê°™ì„ ê²½ìš°, ReactëŠ” ì»´í¬ë„ŒíŠ¸ì™€ í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ì˜ ìì‹ ìš”ì†Œë“¤ì˜ ë¦¬ë Œë”ë§ì„ ê±´ë„ˆëœë‹ˆë‹¤. ì´ê²ƒì€ ìµœì í™”ì— ê´€ë ¨ëœ ë™ì‘ìœ¼ë¡œì¨ ê²°ê³¼ë¥¼ ë¬´ì‹œí•˜ê¸° ì „ì— ì»´í¬ë„ŒíŠ¸ê°€ í˜¸ì¶œë˜ì§€ë§Œ, í˜¸ì¶œëœ ê²°ê³¼ê°€ ì½”ë“œì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤.<li><p>ReactëŠ” <a href="/learn/queueing-a-series-of-state-updates">stateì˜ ì—…ë°ì´íŠ¸ë¥¼ batchí•©ë‹ˆë‹¤.</a> <strong>ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì˜ ëª¨ë“  ì½”ë“œê°€ ìˆ˜í–‰</strong>ë˜ê³  <code>set</code> í•¨ìˆ˜ê°€ ëª¨ë‘ í˜¸ì¶œëœ í›„ì— í™”ë©´ì„ ì—…ë°ì´íŠ¸ í•©ë‹ˆë‹¤. ì´ëŠ” í•˜ë‚˜ì˜ ì´ë²¤íŠ¸ì— ë¦¬ë Œë”ë§ì´ ì—¬ëŸ¬ë²ˆ ì¼ì–´ë‚˜ëŠ” ê²ƒì„ ë°©ì§€í•©ë‹ˆë‹¤. DOM ì ‘ê·¼ ë“± ì´ë¥¸ í™”ë©´ ì—…ë°ì´íŠ¸ë¥¼ ê°•ì œí•´ì•¼í•  íŠ¹ìˆ˜í•œ ìƒí™©ì´ ìˆì„ ê²½ìš° <a href="/reference/react-dom/flushSync"><code>flushSync</code></a>ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</ul></section></section></section><section class="level2"aria-labelledby="ì‚¬ìš©ë²•-usage"><h2 id="ì‚¬ìš©ë²•-usage">ì‚¬ìš©ë²• {/<em>usage</em>/}</h2><section class="level3"aria-labelledby="ì»´í¬ë„ŒíŠ¸ì—-reducer-ì¶”ê°€í•˜ê¸°-adding-a-reducer-to-a-component"><h3 id="ì»´í¬ë„ŒíŠ¸ì—-reducer-ì¶”ê°€í•˜ê¸°-adding-a-reducer-to-a-component">ì»´í¬ë„ŒíŠ¸ì— reducer ì¶”ê°€í•˜ê¸° {/<em>adding-a-reducer-to-a-component</em>/}</h3><p>stateë¥¼ <a href="/learn/extracting-state-logic-into-a-reducer">reducer</a>ë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ <code>useReducer</code>ë¥¼ ì»´í¬ë„ŒíŠ¸ì˜ ìµœìƒë‹¨ì—ì„œ í˜¸ì¶œí•©ë‹ˆë‹¤.<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useReducer <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyComponent</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">42</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span></code></pre><p><code>useReducer</code>ëŠ” ì •í™•íˆ 2ê°œì˜ í•­ëª©ì´ í¬í•¨ëœ ë°°ì—´ ë°˜í™˜í•©ë‹ˆë‹¤.<ol><li>state ë³€ìˆ˜ì˜<codestep step="{1}">í˜„ì¬ state</codestep>. ìµœì´ˆì—ëŠ” ì‚¬ìš©ìê°€ ì œê³µí•œ<codestep step="{3}">ì´ˆê¸° state</codestep>ë¡œ ì´ˆê¸°í™”ë©ë‹ˆë‹¤.<li><codestep step="{2}"><code>dispatch</code> í•¨ìˆ˜</codestep>. ìƒí˜¸ì‘ìš©ì— ëŒ€ì‘í•˜ì—¬ stateë¥¼ ë³€ê²½í•©ë‹ˆë‹¤.</ol><p>í™”ë©´ì„ ì—…ë°ì´íŠ¸í•˜ë ¤ë©´ ì‚¬ìš©ìê°€ ìˆ˜í–‰í•œ í™œë™ì„ ì˜ë¯¸í•˜ëŠ” <em>action</em> ê°ì²´ë¥¼ ì¸ìˆ˜ë¡œí•˜ì—¬ <code>dispatch</code> í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì„¸ìš”.<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'incremented_age'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>ReactëŠ” í˜„ì¬ stateì™€ actionì„<codestep step="{4}">reducer í•¨ìˆ˜</codestep>ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤. reducerëŠ” ë‹¤ìŒ stateë¥¼ ê³„ì‚°í•œ í›„ ë°˜í™˜í•©ë‹ˆë‹¤. ReactëŠ” ë‹¤ìŒ stateë¥¼ ì €ì¥í•œ ë’¤ì— ì»´í¬ë„ŒíŠ¸ì™€ í•¨ê»˜ ë Œë”ë§ í•˜ê³  UIë¥¼ ì—…ë°ì´íŠ¸ í•©ë‹ˆë‹¤.</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useReducer <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span><span class="token property-access">type</span> <span class="token operator">===</span> <span class="token string">'incremented_age'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">age</span><span class="token operator">:</span> state<span class="token punctuation">.</span><span class="token property-access">age</span> <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">throw</span> <span class="token known-class-name class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Unknown action.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Counter</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">42</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
        <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'incremented_age'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span>
        <span class="token maybe-class-name">Increment</span> age
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token maybe-class-name">Hello</span><span class="token operator">!</span> <span class="token maybe-class-name">You</span> are <span class="token punctuation">{</span>state<span class="token punctuation">.</span><span class="token property-access">age</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">button</span> <span class="token punctuation">{</span> <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span> <span class="token property">margin-top</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack><p><code>useReducer</code>ëŠ” <a href="/reference/react/useState"><code>useState</code></a>ì™€ ë§¤ìš° ìœ ì‚¬í•˜ì§€ë§Œ, state ì—…ë°ì´íŠ¸ ë¡œì§ì„ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì—ì„œ ì»´í¬ë„ŒíŠ¸ ì™¸ë¶€ì˜ ë‹¨ì¼í•¨ìˆ˜ë¡œ ë¶„ë¦¬í•  ìˆ˜ ìˆë‹¤ëŠ” ì°¨ì´ì ì´ ìˆìŠµë‹ˆë‹¤. ìì„¸í•œ ì‚¬í•­ì€ <a href="/learn/extracting-state-logic-into-a-reducer#comparing-usestate-and-usereducer"><code>useState</code>ì™€ <code>useReducer</code> ë¹„êµí•˜ê¸°</a>ë¥¼ ì½ì–´ë³´ì„¸ìš”.</section><section class="level3"aria-labelledby="reducer-í•¨ìˆ˜-ì‘ì„±í•˜ê¸°-writing-the-reducer-function"><h3 id="reducer-í•¨ìˆ˜-ì‘ì„±í•˜ê¸°-writing-the-reducer-function">reducer í•¨ìˆ˜ ì‘ì„±í•˜ê¸° {/<em>writing-the-reducer-function</em>/}</h3><p>reducer í•¨ìˆ˜ëŠ” ì•„ë˜ì™€ ê°™ì´ ì„ ì–¸í•©ë‹ˆë‹¤.<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre><p>ì´í›„ ë‹¤ìŒ stateë¥¼ ê³„ì‚°í•  ì½”ë“œë¥¼ ì‘ì„±í•˜ê³ , ê³„ì‚°ëœ stateë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ë³´í†µì€ ì»¨ë²¤ì…˜ì— ë”°ë¼ <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/switch"><code>switch</code> ë¬¸</a>ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. <code>switch</code>ëŠ” ê° <code>case</code>ë¥¼ ì´ìš©í•´ ë‹¤ìŒ stateë¥¼ ê³„ì‚°í•˜ê³  ë°˜í™˜í•©ë‹ˆë‹¤.<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'incremented_age'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> state<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">,</span>
        <span class="token literal-property property">age</span><span class="token operator">:</span> state<span class="token punctuation">.</span><span class="token property-access">age</span> <span class="token operator">+</span> <span class="token number">1</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">case</span> <span class="token string">'changed_name'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> action<span class="token punctuation">.</span><span class="token property-access">nextName</span><span class="token punctuation">,</span>
        <span class="token literal-property property">age</span><span class="token operator">:</span> state<span class="token punctuation">.</span><span class="token property-access">age</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">throw</span> <span class="token known-class-name class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Unknown action: '</span> <span class="token operator">+</span> action<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>Actionsì€ ë‹¤ì–‘í•œ í˜•íƒœê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì»¨ë²¤ì…˜ì— ë”°ë¼ ì•¡ì…˜ì´ ë¬´ì—‡ì¸ì§€ ì •ì˜í•˜ëŠ” <code>type</code> í”„ë¡œí¼í‹°ë¥¼ í¬í•¨í•œ ê°ì²´ë¡œ ì„ ì–¸í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì…ë‹ˆë‹¤. <code>type</code>ì€ reducerê°€ ë‹¤ìŒ stateë¥¼ ê³„ì‚°í•˜ëŠ”ë° í•„ìš”í•œ ìµœì†Œí•œì˜ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Form</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Taylor'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">42</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token keyword">function</span> <span class="token function">handleButtonClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'incremented_age'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">handleInputChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'changed_name'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">nextName</span><span class="token operator">:</span> e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span></code></pre><p>action type ì´ë¦„ì€ ì»´í¬ë„ŒíŠ¸ ë‚´ì—ì„œ ì§€ì—­ì ì…ë‹ˆë‹¤. <a href="/learn/extracting-state-logic-into-a-reducer#writing-reducers-well">ê° actionì€ ë‹¨ì¼ ìƒí˜¸ì‘ìš©ì„ ì„¤ëª…í•˜ë©°, ë°ì´í„°ì— ì—¬ëŸ¬ ë³€ê²½ ì‚¬í•­ì„ ì´ˆë˜í•˜ë”ë¼ë„ í•˜ë‚˜ì˜ ìƒí˜¸ì‘ìš©ë§Œì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</a> stateì˜ í˜•íƒœëŠ” ì„ì˜ì ì´ì§€ë§Œ, ì¼ë°˜ì ìœ¼ë¡œ ê°ì²´ë‚˜ ë°°ì—´ì¼ ê²ƒì…ë‹ˆë‹¤.<p>ìì„¸í•œ ë‚´ìš©ì€ <a href="/learn/extracting-state-logic-into-a-reducer">state ë¡œì§ì„ reducerë¡œ ì‘ì„±í•˜ê¸°</a>ë¥¼ ì½ì–´ë³´ì„¸ìš”.</p><pitfall><p>stateëŠ” ì½ê¸° ì „ìš©ì…ë‹ˆë‹¤. stateì˜ ê°ì²´ë‚˜ ë°°ì—´ì„ ë³€ê²½í•˜ì§€ ë§ˆì„¸ìš”!<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'incremented_age'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// ğŸš© Don't mutate an object in state like this:</span>
      state<span class="token punctuation">.</span><span class="token property-access">age</span> <span class="token operator">=</span> state<span class="token punctuation">.</span><span class="token property-access">age</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token keyword control-flow">return</span> state<span class="token punctuation">;</span>
    <span class="token punctuation">}</span></code></pre><p>ëŒ€ì‹  reducerì—ì„œ ìƒˆë¡œìš´ ê°ì²´ë¥¼ ë°˜í™˜í•˜ì„¸ìš”.<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'incremented_age'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// âœ… Instead, return a new object</span>
      <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
        <span class="token spread operator">...</span>state<span class="token punctuation">,</span>
        <span class="token literal-property property">age</span><span class="token operator">:</span> state<span class="token punctuation">.</span><span class="token property-access">age</span> <span class="token operator">+</span> <span class="token number">1</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span></code></pre><p>ìì„¸í•œ ë‚´ìš©ì„ ê³µë¶€í•˜ì‹œë ¤ë©´ <a href="/learn/updating-objects-in-state">ê°ì²´ State ì—…ë°ì´íŠ¸í•˜ê¸°</a>ì™€ <a href="/learn/updating-arrays-in-state">ë°°ì—´ State ì—…ë°ì´íŠ¸í•˜ê¸°</a>ë¥¼ ì½ì–´ë³´ì„¸ìš”.</p></pitfall><recipes titletext="ê¸°ë³¸ì ì¸ useReducer ì˜ˆì œ"titleid="examples-basic"><section class="level4"aria-labelledby="í¼-ê°ì²´-form-object"><h4 id="í¼-ê°ì²´-form-object">í¼ (ê°ì²´) {/<em>form-object</em>/}</h4><p>ì´ ì˜ˆì œì—ì„œëŠ” reducerë¥¼ ì´ìš©í•´ <code>name</code>ê³¼ <code>age</code> í•„ë“œë¥¼ ê°€ì§„ ê°ì²´ë¥¼ stateë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤.</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useReducer <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'incremented_age'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> state<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">,</span>
        <span class="token literal-property property">age</span><span class="token operator">:</span> state<span class="token punctuation">.</span><span class="token property-access">age</span> <span class="token operator">+</span> <span class="token number">1</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">case</span> <span class="token string">'changed_name'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> action<span class="token punctuation">.</span><span class="token property-access">nextName</span><span class="token punctuation">,</span>
        <span class="token literal-property property">age</span><span class="token operator">:</span> state<span class="token punctuation">.</span><span class="token property-access">age</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">throw</span> <span class="token known-class-name class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Unknown action: '</span> <span class="token operator">+</span> action<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Taylor'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">42</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Form</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> initialState<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">handleButtonClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'incremented_age'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">handleInputChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'changed_name'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">nextName</span><span class="token operator">:</span> e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token punctuation">}</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>input
        value<span class="token operator">=</span><span class="token punctuation">{</span>state<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span>
        onChange<span class="token operator">=</span><span class="token punctuation">{</span>handleInputChange<span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleButtonClick<span class="token punctuation">}</span><span class="token operator">></span>
        <span class="token maybe-class-name">Increment</span> age
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token maybe-class-name">Hello</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>state<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token punctuation">.</span> <span class="token property-access"><span class="token maybe-class-name">You</span></span> are <span class="token punctuation">{</span>state<span class="token punctuation">.</span><span class="token property-access">age</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">button</span> <span class="token punctuation">{</span> <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span> <span class="token property">margin-top</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack><solution></solution></section><section class="level4"aria-labelledby="íˆ¬ë‘-ë¦¬ìŠ¤íŠ¸-ë°°ì—´-todo-list-array"><h4 id="íˆ¬ë‘-ë¦¬ìŠ¤íŠ¸-ë°°ì—´-todo-list-array">íˆ¬ë‘ ë¦¬ìŠ¤íŠ¸ (ë°°ì—´) {/<em>todo-list-array</em>/}</h4><p>ì´ ì˜ˆì œì—ì„œëŠ” ë¦¬ë“€ì„œë¥¼ ì´ìš©í•´ í•  ì¼ ëª©ë¡ë“¤ì„ ë°°ì—´ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤. ë°°ì—´ì˜ ì—…ë°ì´íŠ¸ëŠ” <a href="/learn/updating-arrays-in-state">mutationì´ ì—†ì´</a> ì´ë£¨ì–´ì ¸ì•¼ í•©ë‹ˆë‹¤.</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useReducer <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">AddTask</span></span> <span class="token keyword module">from</span> <span class="token string">'./AddTask.js'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">TaskList</span></span> <span class="token keyword module">from</span> <span class="token string">'./TaskList.js'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">tasksReducer</span><span class="token punctuation">(</span><span class="token parameter">tasks<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'added'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> <span class="token punctuation">[</span><span class="token spread operator">...</span>tasks<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">text</span><span class="token operator">:</span> action<span class="token punctuation">.</span><span class="token property-access">text</span><span class="token punctuation">,</span>
        <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">case</span> <span class="token string">'changed'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> tasks<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">t</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token property-access">id</span> <span class="token operator">===</span> action<span class="token punctuation">.</span><span class="token property-access">task</span><span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword control-flow">return</span> action<span class="token punctuation">.</span><span class="token property-access">task</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
          <span class="token keyword control-flow">return</span> t<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">case</span> <span class="token string">'deleted'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> tasks<span class="token punctuation">.</span><span class="token method function property-access">filter</span><span class="token punctuation">(</span><span class="token parameter">t</span> <span class="token arrow operator">=></span> t<span class="token punctuation">.</span><span class="token property-access">id</span> <span class="token operator">!==</span> action<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword module">default</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">throw</span> <span class="token known-class-name class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Unknown action: '</span> <span class="token operator">+</span> action<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">TaskApp</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>tasks<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>
    tasksReducer<span class="token punctuation">,</span>
    initialTasks
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">handleAddTask</span><span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'added'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">text</span><span class="token operator">:</span> text<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">handleChangeTask</span><span class="token punctuation">(</span><span class="token parameter">task</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'changed'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">task</span><span class="token operator">:</span> task
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">handleDeleteTask</span><span class="token punctuation">(</span><span class="token parameter">taskId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'deleted'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Prague</span> itinerary<span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">AddTask</span>
        onAddTask<span class="token operator">=</span><span class="token punctuation">{</span>handleAddTask<span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">TaskList</span>
        tasks<span class="token operator">=</span><span class="token punctuation">{</span>tasks<span class="token punctuation">}</span>
        onChangeTask<span class="token operator">=</span><span class="token punctuation">{</span>handleChangeTask<span class="token punctuation">}</span>
        onDeleteTask<span class="token operator">=</span><span class="token punctuation">{</span>handleDeleteTask<span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> nextId <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> initialTasks <span class="token operator">=</span> <span class="token punctuation">[</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">AddTask</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> onAddTask <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>text<span class="token punctuation">,</span> setText<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>input
        placeholder<span class="token operator">=</span><span class="token string">"Add task"</span>
        value<span class="token operator">=</span><span class="token punctuation">{</span>text<span class="token punctuation">}</span>
        onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token arrow operator">=></span> <span class="token function">setText</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
        <span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">onAddTask</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token maybe-class-name">Add</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">TaskList</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>
  tasks<span class="token punctuation">,</span>
  onChangeTask<span class="token punctuation">,</span>
  onDeleteTask
<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>ul<span class="token operator">></span>
      <span class="token punctuation">{</span>tasks<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">task</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span>
        <span class="token operator">&#x3C;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>task<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span><span class="token operator">></span>
          <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Task</span>
            task<span class="token operator">=</span><span class="token punctuation">{</span>task<span class="token punctuation">}</span>
            onChange<span class="token operator">=</span><span class="token punctuation">{</span>onChangeTask<span class="token punctuation">}</span>
            onDelete<span class="token operator">=</span><span class="token punctuation">{</span>onDeleteTask<span class="token punctuation">}</span>
          <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Task</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> task<span class="token punctuation">,</span> onChange<span class="token punctuation">,</span> onDelete <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>isEditing<span class="token punctuation">,</span> setIsEditing<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> taskContent<span class="token punctuation">;</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>isEditing<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    taskContent <span class="token operator">=</span> <span class="token punctuation">(</span>
      <span class="token operator">&#x3C;</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span>input
          value<span class="token operator">=</span><span class="token punctuation">{</span>task<span class="token punctuation">.</span><span class="token property-access">text</span><span class="token punctuation">}</span>
          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
            <span class="token function">onChange</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              <span class="token spread operator">...</span>task<span class="token punctuation">,</span>
              <span class="token literal-property property">text</span><span class="token operator">:</span> e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">setIsEditing</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>
          <span class="token maybe-class-name">Save</span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
    taskContent <span class="token operator">=</span> <span class="token punctuation">(</span>
      <span class="token operator">&#x3C;</span><span class="token operator">></span>
        <span class="token punctuation">{</span>task<span class="token punctuation">.</span><span class="token property-access">text</span><span class="token punctuation">}</span>
        <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">setIsEditing</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>
          <span class="token maybe-class-name">Edit</span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>input
        type<span class="token operator">=</span><span class="token string">"checkbox"</span>
        checked<span class="token operator">=</span><span class="token punctuation">{</span>task<span class="token punctuation">.</span><span class="token property-access">done</span><span class="token punctuation">}</span>
        onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
          <span class="token function">onChange</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token spread operator">...</span>task<span class="token punctuation">,</span>
            <span class="token literal-property property">done</span><span class="token operator">:</span> e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">checked</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
      <span class="token punctuation">{</span>taskContent<span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">onDelete</span><span class="token punctuation">(</span>task<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>
        <span class="token maybe-class-name">Delete</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">button</span> <span class="token punctuation">{</span> <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">li</span> <span class="token punctuation">{</span> <span class="token property">list-style-type</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">ul<span class="token punctuation">,</span> li</span> <span class="token punctuation">{</span> <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack><solution></solution></section><section class="level4"aria-labelledby="immerë¥¼-ì´ìš©í•´-ì—…ë°ì´íŠ¸-ë¡œì§ì„-ë³´ë‹¤-ê°„ê²°í•˜ê²Œ-ì‘ì„±í•˜ê¸°-writing-concise-update-logic-with-immer"><h4 id="immerë¥¼-ì´ìš©í•´-ì—…ë°ì´íŠ¸-ë¡œì§ì„-ë³´ë‹¤-ê°„ê²°í•˜ê²Œ-ì‘ì„±í•˜ê¸°-writing-concise-update-logic-with-immer">Immerë¥¼ ì´ìš©í•´ ì—…ë°ì´íŠ¸ ë¡œì§ì„ ë³´ë‹¤ ê°„ê²°í•˜ê²Œ ì‘ì„±í•˜ê¸° {/<em>writing-concise-update-logic-with-immer</em>/}</h4><p>mutation ì—†ì´ ë°°ì—´ì´ë‚˜ ê°ì²´ë¥¼ ìˆ˜ì •í•˜ëŠ” ê²ƒì´ ì‹ ê²½ ì“°ì´ê³ , ë°˜ë³µë˜ëŠ” ì½”ë“œë¥¼ ì¤„ì´ê³  ì‹¶ìœ¼ì‹œë‹¤ë©´ <a href="https://github.com/immerjs/use-immer#useimmerreducer">Immer</a>ê°™ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ImmerëŠ” ì½”ë“œë¥¼ ê°„ê²°í•˜ê²Œ ì‘ì„±í•  ìˆ˜ ìˆê²Œ í•´ì£¼ë©°, mutationì´ ì¼ì–´ë‚˜ëŠ” ê²ƒ ì²˜ëŸ¼ ì½”ë“œë¥¼ ì‘ì„±í•˜ë”ë¼ë„ ë‚´ë¶€ ë™ì‘ì—ì„œëŠ” immutableí•œ ì—…ë°ì´íŠ¸ê°€ ì¼ì–´ë‚©ë‹ˆë‹¤.</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useImmerReducer <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'use-immer'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">AddTask</span></span> <span class="token keyword module">from</span> <span class="token string">'./AddTask.js'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">TaskList</span></span> <span class="token keyword module">from</span> <span class="token string">'./TaskList.js'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">tasksReducer</span><span class="token punctuation">(</span><span class="token parameter">draft<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'added'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      draft<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">text</span><span class="token operator">:</span> action<span class="token punctuation">.</span><span class="token property-access">text</span><span class="token punctuation">,</span>
        <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword control-flow">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">case</span> <span class="token string">'changed'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> index <span class="token operator">=</span> draft<span class="token punctuation">.</span><span class="token method function property-access">findIndex</span><span class="token punctuation">(</span><span class="token parameter">t</span> <span class="token arrow operator">=></span>
        t<span class="token punctuation">.</span><span class="token property-access">id</span> <span class="token operator">===</span> action<span class="token punctuation">.</span><span class="token property-access">task</span><span class="token punctuation">.</span><span class="token property-access">id</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
      draft<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> action<span class="token punctuation">.</span><span class="token property-access">task</span><span class="token punctuation">;</span>
      <span class="token keyword control-flow">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">case</span> <span class="token string">'deleted'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> draft<span class="token punctuation">.</span><span class="token method function property-access">filter</span><span class="token punctuation">(</span><span class="token parameter">t</span> <span class="token arrow operator">=></span> t<span class="token punctuation">.</span><span class="token property-access">id</span> <span class="token operator">!==</span> action<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword module">default</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">throw</span> <span class="token known-class-name class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Unknown action: '</span> <span class="token operator">+</span> action<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">TaskApp</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>tasks<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useImmerReducer</span><span class="token punctuation">(</span>
    tasksReducer<span class="token punctuation">,</span>
    initialTasks
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">handleAddTask</span><span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'added'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">text</span><span class="token operator">:</span> text<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">handleChangeTask</span><span class="token punctuation">(</span><span class="token parameter">task</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'changed'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">task</span><span class="token operator">:</span> task
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">handleDeleteTask</span><span class="token punctuation">(</span><span class="token parameter">taskId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'deleted'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Prague</span> itinerary<span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">AddTask</span>
        onAddTask<span class="token operator">=</span><span class="token punctuation">{</span>handleAddTask<span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">TaskList</span>
        tasks<span class="token operator">=</span><span class="token punctuation">{</span>tasks<span class="token punctuation">}</span>
        onChangeTask<span class="token operator">=</span><span class="token punctuation">{</span>handleChangeTask<span class="token punctuation">}</span>
        onDeleteTask<span class="token operator">=</span><span class="token punctuation">{</span>handleDeleteTask<span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> nextId <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> initialTasks <span class="token operator">=</span> <span class="token punctuation">[</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">AddTask</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> onAddTask <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>text<span class="token punctuation">,</span> setText<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>input
        placeholder<span class="token operator">=</span><span class="token string">"Add task"</span>
        value<span class="token operator">=</span><span class="token punctuation">{</span>text<span class="token punctuation">}</span>
        onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token arrow operator">=></span> <span class="token function">setText</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
        <span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">onAddTask</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token maybe-class-name">Add</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">TaskList</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>
  tasks<span class="token punctuation">,</span>
  onChangeTask<span class="token punctuation">,</span>
  onDeleteTask
<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>ul<span class="token operator">></span>
      <span class="token punctuation">{</span>tasks<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">task</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span>
        <span class="token operator">&#x3C;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>task<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span><span class="token operator">></span>
          <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Task</span>
            task<span class="token operator">=</span><span class="token punctuation">{</span>task<span class="token punctuation">}</span>
            onChange<span class="token operator">=</span><span class="token punctuation">{</span>onChangeTask<span class="token punctuation">}</span>
            onDelete<span class="token operator">=</span><span class="token punctuation">{</span>onDeleteTask<span class="token punctuation">}</span>
          <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Task</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> task<span class="token punctuation">,</span> onChange<span class="token punctuation">,</span> onDelete <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>isEditing<span class="token punctuation">,</span> setIsEditing<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> taskContent<span class="token punctuation">;</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>isEditing<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    taskContent <span class="token operator">=</span> <span class="token punctuation">(</span>
      <span class="token operator">&#x3C;</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span>input
          value<span class="token operator">=</span><span class="token punctuation">{</span>task<span class="token punctuation">.</span><span class="token property-access">text</span><span class="token punctuation">}</span>
          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
            <span class="token function">onChange</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              <span class="token spread operator">...</span>task<span class="token punctuation">,</span>
              <span class="token literal-property property">text</span><span class="token operator">:</span> e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">setIsEditing</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>
          <span class="token maybe-class-name">Save</span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
    taskContent <span class="token operator">=</span> <span class="token punctuation">(</span>
      <span class="token operator">&#x3C;</span><span class="token operator">></span>
        <span class="token punctuation">{</span>task<span class="token punctuation">.</span><span class="token property-access">text</span><span class="token punctuation">}</span>
        <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">setIsEditing</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>
          <span class="token maybe-class-name">Edit</span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>input
        type<span class="token operator">=</span><span class="token string">"checkbox"</span>
        checked<span class="token operator">=</span><span class="token punctuation">{</span>task<span class="token punctuation">.</span><span class="token property-access">done</span><span class="token punctuation">}</span>
        onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
          <span class="token function">onChange</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token spread operator">...</span>task<span class="token punctuation">,</span>
            <span class="token literal-property property">done</span><span class="token operator">:</span> e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">checked</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
      <span class="token punctuation">{</span>taskContent<span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">onDelete</span><span class="token punctuation">(</span>task<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>
        <span class="token maybe-class-name">Delete</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">button</span> <span class="token punctuation">{</span> <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">li</span> <span class="token punctuation">{</span> <span class="token property">list-style-type</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">ul<span class="token punctuation">,</span> li</span> <span class="token punctuation">{</span> <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"immer"</span><span class="token operator">:</span> <span class="token string">"1.7.3"</span><span class="token punctuation">,</span>
    <span class="token property">"react"</span><span class="token operator">:</span> <span class="token string">"latest"</span><span class="token punctuation">,</span>
    <span class="token property">"react-dom"</span><span class="token operator">:</span> <span class="token string">"latest"</span><span class="token punctuation">,</span>
    <span class="token property">"react-scripts"</span><span class="token operator">:</span> <span class="token string">"latest"</span><span class="token punctuation">,</span>
    <span class="token property">"use-immer"</span><span class="token operator">:</span> <span class="token string">"0.5.1"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"react-scripts start"</span><span class="token punctuation">,</span>
    <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"react-scripts build"</span><span class="token punctuation">,</span>
    <span class="token property">"test"</span><span class="token operator">:</span> <span class="token string">"react-scripts test --env=jsdom"</span><span class="token punctuation">,</span>
    <span class="token property">"eject"</span><span class="token operator">:</span> <span class="token string">"react-scripts eject"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></sandpack><solution></solution></section></recipes></section><section class="level3"aria-labelledby="ì´ˆê¸°-state-ì¬ìƒì„±-ë°©ì§€í•˜ê¸°-avoiding-recreating-the-initial-state"><h3 id="ì´ˆê¸°-state-ì¬ìƒì„±-ë°©ì§€í•˜ê¸°-avoiding-recreating-the-initial-state">ì´ˆê¸° state ì¬ìƒì„± ë°©ì§€í•˜ê¸° {/<em>avoiding-recreating-the-initial-state</em>/}</h3><p>ReactëŠ” ì´ˆê¸° stateë¥¼ ì €ì¥í•œ í›„, ë‹¤ìŒ ë Œë”ë§ì—ì„œëŠ” ì´ë¥¼ ë¬´ì‹œí•©ë‹ˆë‹¤.<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">createInitialState</span><span class="token punctuation">(</span><span class="token parameter">username</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">TodoList</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> username <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> <span class="token function">createInitialState</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span></code></pre><p><code>createInitialState(username)</code>ì˜ ë°˜í™˜ê°’ì´ ì´ˆê¸° ë Œë”ë§ì—ë§Œ ì‚¬ìš©ë˜ë”ë¼ë„ í•¨ìˆ˜ëŠ” ë§¤ ë Œë”ë§ë§ˆë‹¤ í˜¸ì¶œë  ê²ƒì…ë‹ˆë‹¤. í•¨ìˆ˜ê°€ í° ë°°ì—´ì´ë‚˜ ë¬´ê±°ìš´ ì—°ì‚°ì„ ë‹¤ë£° ê²½ìš°ì—ëŠ” ì„±ëŠ¥ìƒ ë‚­ë¹„ê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<p>ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ë°©ë²•ìœ¼ë¡œëŠ” <code>useReducer</code>ì˜ 3ë²ˆì§¸ ì¸ìˆ˜ì— <strong><em>ì´ˆê¸°í™” í•¨ìˆ˜</em> ë¥¼ ì „ë‹¬í•˜ëŠ” ë°©ë²•</strong>ì´ ìˆìŠµë‹ˆë‹¤.<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">createInitialState</span><span class="token punctuation">(</span><span class="token parameter">username</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">TodoList</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> username <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> username<span class="token punctuation">,</span> createInitialState<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span></code></pre><p><code>createInitialState()</code>ì²˜ëŸ¼ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì„œ ì „ë‹¬í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, <code>createInitialState</code> <em>í•¨ìˆ˜ ìì²´</em>ë¥¼ ì „ë‹¬í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ê¸°ì–µí•˜ì„¸ìš”. ì´ ë°©ë²•ì„ ì´ìš©í•˜ë©´ ì´ˆê¸°í™” ì´í›„ì— ì´ˆê¸° stateê°€ ë‹¤ì‹œ ìƒì„±ë˜ëŠ” ì¼ì€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.<p>ìœ„ì˜ ì˜ˆì œì—ì„œëŠ” <code>createInitialState</code> í•¨ìˆ˜ê°€ <code>username</code>ì„ ì¸ìˆ˜ë¡œ ë°›ìŠµë‹ˆë‹¤. ë§Œì•½ ì´ˆê¸°í™” í•¨ìˆ˜ê°€ ì´ˆê¸° stateë¥¼ ê³„ì‚°í•˜ëŠ” ê²ƒì— ì–´ë–¤ ì¸ìˆ˜ë„ í•„ìš”í•˜ì§€ ì•Šë‹¤ë©´, <code>useReducer</code>ì˜ ë‘ë²ˆì§¸ ì¸ìˆ˜ì— nullì„ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><recipes titletext="ì´ˆê¸°í™” í•¨ìˆ˜ë¥¼ ì „ë‹¬í•˜ëŠ” ê²ƒê³¼ ì´ˆê¸° stateë¥¼ ì§ì ‘ ì „ë‹¬í•˜ëŠ” ê²ƒì˜ ì°¨ì´ì "titleid="examples-initializer"><section class="level4"aria-labelledby="ì´ˆê¸°í™”-í•¨ìˆ˜-ì „ë‹¬-passing-the-initializer-function"><h4 id="ì´ˆê¸°í™”-í•¨ìˆ˜-ì „ë‹¬-passing-the-initializer-function">ì´ˆê¸°í™” í•¨ìˆ˜ ì „ë‹¬ {/<em>passing-the-initializer-function</em>/}</h4><p>ì´ ì˜ˆì œì—ì„œëŠ” ì´ˆê¸°í™” ë‹¨ê³„ì—ì„œë§Œ ë™ì‘í•˜ëŠ” í•¨ìˆ˜ì¸ <code>createInitialState</code>ë¥¼ ì´ˆê¸°í™” í•¨ìˆ˜ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤. ì´ í•¨ìˆ˜ëŠ” ì¸í’‹ì— ì…ë ¥ í•  ë•Œ ë°œìƒí•˜ëŠ” ë¦¬ë Œë”ë§ ìƒí™© ë“±ì—ì„œëŠ” í˜¸ì¶œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">TodoList</span></span> <span class="token keyword module">from</span> <span class="token string">'./TodoList.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span><span class="token maybe-class-name">TodoList</span> username<span class="token operator">=</span><span class="token string">"Taylor"</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useReducer <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">createInitialState</span><span class="token punctuation">(</span><span class="token parameter">username</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> initialTodos <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&#x3C;</span> <span class="token number">50</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    initialTodos<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">text</span><span class="token operator">:</span> username <span class="token operator">+</span> <span class="token string">"'s task #"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">draft</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    <span class="token literal-property property">todos</span><span class="token operator">:</span> initialTodos<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'changed_draft'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">draft</span><span class="token operator">:</span> action<span class="token punctuation">.</span><span class="token property-access">nextDraft</span><span class="token punctuation">,</span>
        <span class="token literal-property property">todos</span><span class="token operator">:</span> state<span class="token punctuation">.</span><span class="token property-access">todos</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">'added_todo'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">draft</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
        <span class="token literal-property property">todos</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
          <span class="token literal-property property">text</span><span class="token operator">:</span> state<span class="token punctuation">.</span><span class="token property-access">draft</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token spread operator">...</span>state<span class="token punctuation">.</span><span class="token property-access">todos</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">throw</span> <span class="token known-class-name class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Unknown action: '</span> <span class="token operator">+</span> action<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">TodoList</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> username <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>
    reducer<span class="token punctuation">,</span>
    username<span class="token punctuation">,</span>
    createInitialState
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>input
        value<span class="token operator">=</span><span class="token punctuation">{</span>state<span class="token punctuation">.</span><span class="token property-access">draft</span><span class="token punctuation">}</span>
        onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
          <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'changed_draft'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">nextDraft</span><span class="token operator">:</span> e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
        <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'added_todo'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token maybe-class-name">Add</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>ul<span class="token operator">></span>
        <span class="token punctuation">{</span>state<span class="token punctuation">.</span><span class="token property-access">todos</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span>
          <span class="token operator">&#x3C;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span><span class="token operator">></span>
            <span class="token punctuation">{</span>item<span class="token punctuation">.</span><span class="token property-access">text</span><span class="token punctuation">}</span>
          <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><solution></solution></section><section class="level4"aria-labelledby="ì´ˆê¸°-state-ì§ì ‘-ì „ë‹¬-passing-the-initial-state-directly"><h4 id="ì´ˆê¸°-state-ì§ì ‘-ì „ë‹¬-passing-the-initial-state-directly">ì´ˆê¸° state ì§ì ‘ ì „ë‹¬ {/<em>passing-the-initial-state-directly</em>/}</h4><p>ì´ ì˜ˆì œì—ì„œëŠ” ì´ˆê¸°í™” í•¨ìˆ˜ë¥¼ <strong>ì „ë‹¬í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ</strong>, <code>createInitialState</code> í•¨ìˆ˜ëŠ” ì¸í’‹ì— ì…ë ¥ì„ í• ë•Œ ë°œìƒí•˜ëŠ” ë¦¬ë Œë”ë§ì—ì„œë„ ë§¤ë²ˆ í˜¸ì¶œë©ë‹ˆë‹¤. ì´ ì½”ë“œëŠ” ë™ì‘ì—ëŠ” í° ì°¨ì´ê°€ ì—†ì„ ìˆ˜ ìˆì§€ë§Œ, íš¨ìœ¨ì„±ì´ ë–¨ì–´ì§‘ë‹ˆë‹¤.</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">TodoList</span></span> <span class="token keyword module">from</span> <span class="token string">'./TodoList.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span><span class="token maybe-class-name">TodoList</span> username<span class="token operator">=</span><span class="token string">"Taylor"</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useReducer <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">createInitialState</span><span class="token punctuation">(</span><span class="token parameter">username</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> initialTodos <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&#x3C;</span> <span class="token number">50</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    initialTodos<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">text</span><span class="token operator">:</span> username <span class="token operator">+</span> <span class="token string">"'s task #"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">draft</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    <span class="token literal-property property">todos</span><span class="token operator">:</span> initialTodos<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'changed_draft'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">draft</span><span class="token operator">:</span> action<span class="token punctuation">.</span><span class="token property-access">nextDraft</span><span class="token punctuation">,</span>
        <span class="token literal-property property">todos</span><span class="token operator">:</span> state<span class="token punctuation">.</span><span class="token property-access">todos</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">'added_todo'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">draft</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
        <span class="token literal-property property">todos</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
          <span class="token literal-property property">text</span><span class="token operator">:</span> state<span class="token punctuation">.</span><span class="token property-access">draft</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token spread operator">...</span>state<span class="token punctuation">.</span><span class="token property-access">todos</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">throw</span> <span class="token known-class-name class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Unknown action: '</span> <span class="token operator">+</span> action<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">TodoList</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> username <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>
    reducer<span class="token punctuation">,</span>
    <span class="token function">createInitialState</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>input
        value<span class="token operator">=</span><span class="token punctuation">{</span>state<span class="token punctuation">.</span><span class="token property-access">draft</span><span class="token punctuation">}</span>
        onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
          <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'changed_draft'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">nextDraft</span><span class="token operator">:</span> e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
        <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'added_todo'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token maybe-class-name">Add</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>ul<span class="token operator">></span>
        <span class="token punctuation">{</span>state<span class="token punctuation">.</span><span class="token property-access">todos</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span>
          <span class="token operator">&#x3C;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span><span class="token operator">></span>
            <span class="token punctuation">{</span>item<span class="token punctuation">.</span><span class="token property-access">text</span><span class="token punctuation">}</span>
          <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><solution></solution></section></recipes></section></section><section class="level2"aria-labelledby="íŠ¸ëŸ¬ë¸”-ìŠˆíŒ…-troubleshooting"><h2 id="íŠ¸ëŸ¬ë¸”-ìŠˆíŒ…-troubleshooting">íŠ¸ëŸ¬ë¸” ìŠˆíŒ… {/<em>troubleshooting</em>/}</h2><section class="level3"aria-labelledby="dispatchë¡œ-actionì„-í˜¸ì¶œí•´ë„-ì˜¤ë˜ëœ-state-ê°’ì´-ì¶œë ¥ë©ë‹ˆë‹¤-ive-dispatched-an-action-but-logging-gives-me-the-old-state-value"><h3 id="dispatchë¡œ-actionì„-í˜¸ì¶œí•´ë„-ì˜¤ë˜ëœ-state-ê°’ì´-ì¶œë ¥ë©ë‹ˆë‹¤-ive-dispatched-an-action-but-logging-gives-me-the-old-state-value">dispatchë¡œ actionì„ í˜¸ì¶œí•´ë„ ì˜¤ë˜ëœ state ê°’ì´ ì¶œë ¥ë©ë‹ˆë‹¤. {/<em>ive-dispatched-an-action-but-logging-gives-me-the-old-state-value</em>/}</h3><p><code>dispatch</code> í•¨ìˆ˜ì˜ í˜¸ì¶œì€ <strong>í˜„ì¬ ë™ì‘í•˜ê³  ìˆëŠ” ì½”ë“œì˜ stateë¥¼ ë³€ê²½í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</strong><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span><span class="token property-access">age</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 42</span>

  <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'incremented_age'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Request a re-render with 43</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span><span class="token property-access">age</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Still 42!</span>

  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span><span class="token property-access">age</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Also 42!</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>ì´ëŸ¬í•œ í˜„ìƒì€ <a href="/learn/state-as-a-snapshot">Stateê°€ ìŠ¤ëƒ…ìƒ·ìœ¼ë¡œì„œ</a> ì‚¬ìš©ë˜ê¸° ë•Œë¬¸ì— ì¼ì–´ë‚©ë‹ˆë‹¤. stateë¥¼ ì—…ë°ì´íŠ¸í•˜ë©´ ìƒˆë¡œìš´ stateë¥¼ ì´ìš©í•œ ë˜ ë‹¤ë¥¸ ë Œë”ë§ì´ ìš”ì²­ë˜ì§€ë§Œ, ì´ë¯¸ ì‹¤í–‰ì¤‘ì¸ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ë‚´ì˜ <code>state</code> ìë°”ìŠ¤í¬ë¦½íŠ¸ ë³€ìˆ˜ì—ëŠ” ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠìŠµë‹ˆë‹¤.<p>ë§Œì•½ ë‹¤ìŒ state ê°’ì„ ì•Œê³  ì‹¶ë‹¤ë©´, reducer í•¨ìˆ˜ë¥¼ ì§ì ‘ í˜¸ì¶œí•´ì„œ ë‹¤ìŒ ê°’ì„ ê³„ì‚°í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'incremented_age'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> nextState <span class="token operator">=</span> <span class="token function">reducer</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> action<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// { age: 42 }</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>nextState<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { age: 43 }</span></code></pre></section><section class="level3"aria-labelledby="dispatchë¡œ-actionì„-í˜¸ì¶œí•´ë„-í™”ë©´ì´-ì—…ë°ì´íŠ¸ë˜ì§€-ì•ŠìŠµë‹ˆë‹¤-ive-dispatched-an-action-but-the-screen-doesnt-update"><h3 id="dispatchë¡œ-actionì„-í˜¸ì¶œí•´ë„-í™”ë©´ì´-ì—…ë°ì´íŠ¸ë˜ì§€-ì•ŠìŠµë‹ˆë‹¤-ive-dispatched-an-action-but-the-screen-doesnt-update">dispatchë¡œ actionì„ í˜¸ì¶œí•´ë„ í™”ë©´ì´ ì—…ë°ì´íŠ¸ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. {/<em>ive-dispatched-an-action-but-the-screen-doesnt-update</em>/}</h3><p>ReactëŠ” <strong>ì´ì „ stateì™€ ë‹¤ìŒ stateë¥¼ ë¹„êµí–ˆì„ ë•Œ, ê°’ì´ ì¼ì¹˜í•œë‹¤ë©´ ì—…ë°ì´íŠ¸ê°€ ë¬´ì‹œë©ë‹ˆë‹¤.</strong> ë¹„êµëŠ” <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is"><code>Object.is</code></a>ë¥¼ í†µí•´ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. ì´ëŸ° í˜„ìƒì€ ë³´í†µ ê°ì²´ë‚˜ ë°°ì—´ì˜ stateë¥¼ ì§ì ‘ì ìœ¼ë¡œ ìˆ˜ì •í–ˆì„ ë•Œ ë°œìƒí•©ë‹ˆë‹¤.<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'incremented_age'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// ğŸš© Wrong: mutating existing object</span>
      state<span class="token punctuation">.</span><span class="token property-access">age</span><span class="token operator">++</span><span class="token punctuation">;</span>
      <span class="token keyword control-flow">return</span> state<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">case</span> <span class="token string">'changed_name'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// ğŸš© Wrong: mutating existing object</span>
      state<span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">=</span> action<span class="token punctuation">.</span><span class="token property-access">nextName</span><span class="token punctuation">;</span>
      <span class="token keyword control-flow">return</span> state<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>ReactëŠ” ê¸°ì¡´ì˜ <code>state</code> ê°ì²´ê°€ mutationëœ ìƒíƒœë¡œ ë°˜í™˜ëœë‹¤ë©´ ì—…ë°ì´íŠ¸ë¥¼ ë¬´ì‹œí•©ë‹ˆë‹¤. ì´ëŸ¬í•œ í˜„ìƒì„ ë°©ì§€í•˜ê¸° ìœ„í•´ì„œëŠ” ê°ì²´ë‚˜ ë°°ì—´ì„ mutationì‹œí‚¤ì§€ ì•Šê³  <a href="/learn/updating-objects-in-state">ê°ì²´ stateë¥¼ ë³€ê²½</a>í•˜ê±°ë‚˜ <a href="/learn/updating-arrays-in-state">ë°°ì—´ state</a>ë¥¼ ë³€ê²½í•´ì•¼ í•©ë‹ˆë‹¤.<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'incremented_age'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// âœ… Correct: creating a new object</span>
      <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
        <span class="token spread operator">...</span>state<span class="token punctuation">,</span>
        <span class="token literal-property property">age</span><span class="token operator">:</span> state<span class="token punctuation">.</span><span class="token property-access">age</span> <span class="token operator">+</span> <span class="token number">1</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">case</span> <span class="token string">'changed_name'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// âœ… Correct: creating a new object</span>
      <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
        <span class="token spread operator">...</span>state<span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> action<span class="token punctuation">.</span><span class="token property-access">nextName</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></section><section class="level3"aria-labelledby="reducerì˜-state-ì¼ë¶€ê°€-dispatchëœ-ì´í›„ì—-undefinedê°€-í• ë‹¹ë©ë‹ˆë‹¤-a-part-of-my-reducer-state-becomes-undefined-after-dispatching"><h3 id="reducerì˜-state-ì¼ë¶€ê°€-dispatchëœ-ì´í›„ì—-undefinedê°€-í• ë‹¹ë©ë‹ˆë‹¤-a-part-of-my-reducer-state-becomes-undefined-after-dispatching">reducerì˜ state ì¼ë¶€ê°€ dispatchëœ ì´í›„ì— undefinedê°€ í• ë‹¹ë©ë‹ˆë‹¤. {/<em>a-part-of-my-reducer-state-becomes-undefined-after-dispatching</em>/}</h3><p>ê°ê°ì˜ <code>case</code>ê°€ <strong>ìƒˆë¡œìš´ stateë¥¼ ë°˜í™˜í•  ë•Œ ê¸°ì¡´ì— ìˆë˜ í•„ë“œë¥¼ ëª¨ë‘ ë³µì‚¬í•˜ëŠ”ì§€</strong> í™•ì¸í•´ë³´ì„¸ìš”.<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'incremented_age'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
        <span class="token spread operator">...</span>state<span class="token punctuation">,</span> <span class="token comment">// Don't forget this!</span>
        <span class="token literal-property property">age</span><span class="token operator">:</span> state<span class="token punctuation">.</span><span class="token property-access">age</span> <span class="token operator">+</span> <span class="token number">1</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// ...</span></code></pre><p>ìœ„ì˜ ì½”ë“œì—ì„œëŠ” <code>...state</code>ê°€ ì—†ë‹¤ë©´ ë‹¤ìŒ stateëŠ” ì˜¤ë¡œì§€ <code>age</code> í•„ë“œë§Œ í¬í•¨í•˜ê±°ë‚˜, ì•„ë¬´ê²ƒë„ í¬í•¨í•˜ì§€ ì•Šì„ ê²ƒì…ë‹ˆë‹¤.</section><section class="level3"aria-labelledby="reducerì˜-ëª¨ë“ -stateê°€-dispatchê°€-ì´ë£¨ì–´-ì§„-í›„-undefinedê°€-í• ë‹¹ë©ë‹ˆë‹¤-my-entire-reducer-state-becomes-undefined-after-dispatching"><h3 id="reducerì˜-ëª¨ë“ -stateê°€-dispatchê°€-ì´ë£¨ì–´-ì§„-í›„-undefinedê°€-í• ë‹¹ë©ë‹ˆë‹¤-my-entire-reducer-state-becomes-undefined-after-dispatching">reducerì˜ ëª¨ë“  stateê°€ dispatchê°€ ì´ë£¨ì–´ ì§„ í›„ undefinedê°€ í• ë‹¹ë©ë‹ˆë‹¤. {/<em>my-entire-reducer-state-becomes-undefined-after-dispatching</em>/}</h3><p>stateì— ì˜ˆê¸°ì¹˜ ì•Šì€ <code>undefined</code>ê°€ í• ë‹¹ë˜ê³  ìˆë‹¤ë©´ case ì¤‘ í•˜ë‚˜ì— <code>return</code>ì´ ëˆ„ë½ë˜ì—ˆê±°ë‚˜ actionì˜ íƒ€ì…ì´ <code>case</code>ì™€ ì§ì§€ì–´ì§€ì§€ ì•Šì•˜ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ìœ ë¥¼ ì°¾ê¸° ìœ„í•´ switchë¬¸ ë°–ì—ì„œ ì—ëŸ¬ë¥¼ throw í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'incremented_age'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">case</span> <span class="token string">'edited_name'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">throw</span> <span class="token known-class-name class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Unknown action: '</span> <span class="token operator">+</span> action<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>ì´ ì™¸ì—ë„ ì‹¤ìˆ˜ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ê°™ì€ ì •ì  íƒ€ì… ì²´ì»¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</section><section class="level3"aria-labelledby="too-many-re-renders-ì˜¤ë¥˜ê°€-ë°œìƒí•©ë‹ˆë‹¤-im-getting-an-error-too-many-re-renders"><h3 id="too-many-re-renders-ì˜¤ë¥˜ê°€-ë°œìƒí•©ë‹ˆë‹¤-im-getting-an-error-too-many-re-renders">"Too many re-renders" ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤. {/<em>im-getting-an-error-too-many-re-renders</em>/}</h3><p><code>Too many re-renders. React limits the number of renders to prevent an infinite loop.</code>ë¼ëŠ” ì—ëŸ¬ ë©”ì„¸ì§€ë¥¼ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œëŠ” ë Œë”ë§ ê³¼ì •ì—ì„œ dispatchê°€ ì‹¤í–‰ë  ë•Œ ì´ëŸ¬í•œ ì¼ì´ ì¼ì–´ë‚©ë‹ˆë‹¤. ë Œë”ë§ì€ dispatchë¥¼ ì•¼ê¸°í•˜ê³ , dispatchëŠ” ë Œë”ë§ì„ ì•¼ê¸°í•˜ë¯€ë¡œ ë Œë”ë§ ë¬´í•œ ë£¨í”„ê°€ ì¼ì–´ë‚©ë‹ˆë‹¤. ì´ëŸ¬í•œ ìƒí™©ì€ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ì˜ëª» í˜¸ì¶œí•  ë•Œ ì¢…ì¢… ë°œìƒí•©ë‹ˆë‹¤.<pre class="language-js"><code class="language-js"><span class="token comment">// ğŸš© Wrong: calls the handler during render</span>
<span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token maybe-class-name">Click</span> me<span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>

<span class="token comment">// âœ… Correct: passes down the event handler</span>
<span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleClick<span class="token punctuation">}</span><span class="token operator">></span><span class="token maybe-class-name">Click</span> me<span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>

<span class="token comment">// âœ… Correct: passes down an inline function</span>
<span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">handleClick</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token maybe-class-name">Click</span> me<span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span></code></pre><p>ì˜¤ë¥˜ì˜ ì›ì¸ì„ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ëŠ” ì–´ëŠ <code>dispatch</code> í•¨ìˆ˜ì—ì„œ ì—ëŸ¬ê°€ ìƒì„±ë˜ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ ì½˜ì†”ì°½ì˜ ì˜¤ë¥˜ ì˜†ì— ìˆëŠ” í™”ì‚´í‘œë¥¼ í´ë¦­í•œ í›„ ìë°”ìŠ¤í¬ë¦½íŠ¸ ìŠ¤íƒì„ ì°¾ì•„ë³´ì„¸ìš”.</section><section class="level3"aria-labelledby="reducerì™€-ì´ˆê¸°í™”-í•¨ìˆ˜ê°€-ë‘ë²ˆ-í˜¸ì¶œë©ë‹ˆë‹¤-my-reducer-or-initializer-function-runs-twice"><h3 id="reducerì™€-ì´ˆê¸°í™”-í•¨ìˆ˜ê°€-ë‘ë²ˆ-í˜¸ì¶œë©ë‹ˆë‹¤-my-reducer-or-initializer-function-runs-twice">reducerì™€ ì´ˆê¸°í™” í•¨ìˆ˜ê°€ ë‘ë²ˆ í˜¸ì¶œë©ë‹ˆë‹¤. {/<em>my-reducer-or-initializer-function-runs-twice</em>/}</h3><p>ReactëŠ” <a href="/reference/react/StrictMode">ì—„ê²© ëª¨ë“œ</a>ì¼ ë•Œ reducerì™€ ì´ˆê¸°í™” í•¨ìˆ˜ë¥¼ ë‘ë²ˆì”© í˜¸ì¶œí•©ë‹ˆë‹¤. ì´ í˜„ìƒì€ ì½”ë“œ ì‹¤í–‰ì— ë¬¸ì œê°€ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.<p>ì´ëŸ¬í•œ í˜„ìƒì€ ì»´í¬ë„ŒíŠ¸ê°€ <a href="/learn/keeping-components-pure">ìˆœìˆ˜í•¨ìˆ˜ë¡œ ìœ ì§€ë  ìˆ˜ ìˆë„ë¡</a> ì˜¤ì§ ê°œë°œ í™˜ê²½ì—ì„œë§Œ ì¼ì–´ë‚˜ë©°, ë‘ê°œì˜ í˜¸ì¶œ ì¤‘ í•˜ë‚˜ëŠ” ë¬´ì‹œë©ë‹ˆë‹¤. ì»´í¬ë„ŒíŠ¸, ì´ˆê¸°í™” í•¨ìˆ˜, reducerê°€ ìˆœìˆ˜í•˜ë‹¤ë©´ ë¡œì§ì— ì•„ë¬´ëŸ° ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•Šì§€ë§Œ, ìˆœìˆ˜í•˜ì§€ ì•Šë‹¤ë©´ ì‹¤ìˆ˜ë¥¼ ì•Œì•„ì±Œ ìˆ˜ ìˆë„ë¡ ì•Œë ¤ì¤ë‹ˆë‹¤.<p>ì˜ˆì‹œë¡œ, ì•„ë˜ì˜ ìˆœìˆ˜í•˜ì§€ ì•Šì€ reducer í•¨ìˆ˜ëŠ” state ë°°ì—´ì— mutationì„ ì¼ìœ¼í‚¤ê³  ìˆìŠµë‹ˆë‹¤.<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'added_todo'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// ğŸš© Mistake: mutating state</span>
      <span class="token keyword control-flow">return</span> state<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>ReactëŠ” reducer í•¨ìˆ˜ë¥¼ ë‘ ë²ˆ í˜¸ì¶œí•˜ë¯€ë¡œ todoê°€ ë‘ ê°œ ì¶”ê°€ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆê³ , ì´ë¥¼ í†µí•´ reducer í•¨ìˆ˜ ì‘ì„±ì— ì‹¤ìˆ˜ê°€ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œì•„ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ì‹¤ìˆ˜ëŠ” <a href="/learn/updating-arrays-in-state#adding-to-an-array">ë°°ì—´ì„ mutation í•˜ì§€ ì•Šê³  êµì²´í•˜ëŠ” ë°©ë²•</a>ì„ í†µí•´ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'added_todo'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// âœ… Correct: replacing with new state</span>
      <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
        <span class="token spread operator">...</span>state<span class="token punctuation">,</span>
        <span class="token literal-property property">todos</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token spread operator">...</span>state<span class="token punctuation">.</span><span class="token property-access">todos</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>ì´ì œ reducer í•¨ìˆ˜ëŠ” ìˆœìˆ˜í•˜ë¯€ë¡œ, ì—¬ëŸ¬ë²ˆ í˜¸ì¶œë˜ì–´ë„ ê°™ì€ ê°’ì„ ë³´ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ReactëŠ” ìˆœìˆ˜ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ê°œë°œ í™˜ê²½ì—ì„œ ë‘ë²ˆì”© í˜¸ì¶œí•©ë‹ˆë‹¤. <strong>ì˜¤ë¡œì§€ ì»´í¬ë„ŒíŠ¸ì™€ ì´ˆê¸°í™” í•¨ìˆ˜, reducer í•¨ìˆ˜ë§Œ ìˆœìˆ˜í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤.</strong> ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ” ìˆœìˆ˜í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ” ë‘ ë²ˆì”© í˜¸ì¶œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.<p>ìì„¸í•œ ì‚¬í•­ì€ <a href="/learn/keeping-components-pure">ì»´í¬ë„ŒíŠ¸ë¥¼ ìˆœìˆ˜í•˜ê²Œ ìœ ì§€í•˜ê¸°</a>ë¥¼ ì½ì–´ë³´ì„¸ìš”. <span style="float:footnote"><a href="../../index.html#toc">Go to TOC</a></span></section></section></inlinetoc></section>
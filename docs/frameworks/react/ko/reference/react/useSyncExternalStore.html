<!doctype html><html lang="ko"><meta charset="utf-8"><title>useSyncExternalStore</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"type="text/css"href="../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="usesyncexternalstore"><h1 id="usesyncexternalstore">useSyncExternalStore</h1><intro><p><code>useSyncExternalStore</code>ëŠ” ì™¸ë¶€ storeë¥¼ êµ¬ë…í•  ìˆ˜ ìˆëŠ” React Hookì…ë‹ˆë‹¤.<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> snapshot <span class="token operator">=</span> <span class="token function">useSyncExternalStore</span><span class="token punctuation">(</span>subscribe<span class="token punctuation">,</span> getSnapshot<span class="token punctuation">,</span> getServerSnapshot<span class="token operator">?</span><span class="token punctuation">)</span></code></pre></intro><inlinetoc><section class="level2"aria-labelledby="ë ˆí¼ëŸ°ìŠ¤-reference"><h2 id="ë ˆí¼ëŸ°ìŠ¤-reference">ë ˆí¼ëŸ°ìŠ¤ {/<em>reference</em>/}</h2><section class="level3"aria-labelledby="usesyncexternalstoresubscribe-getsnapshot-getserversnapshot-usesyncexternalstore"><h3 id="usesyncexternalstoresubscribe-getsnapshot-getserversnapshot-usesyncexternalstore"><code>useSyncExternalStore(subscribe, getSnapshot, getServerSnapshot?)</code> {/<em>usesyncexternalstore</em>/}</h3><p>ì»´í¬ë„ŒíŠ¸ì˜ ìµœìƒìœ„ ë ˆë²¨ì—ì„œ <code>useSyncExternalStore</code>ë¥¼ í˜¸ì¶œí•˜ì—¬ ì™¸ë¶€ ë°ì´í„° ì €ì¥ì†Œì—ì„œ ê°’ì„ ì½ìŠµë‹ˆë‹¤.<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useSyncExternalStore <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> todosStore <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./todoStore.js'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">TodosApp</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> todos <span class="token operator">=</span> <span class="token function">useSyncExternalStore</span><span class="token punctuation">(</span>todosStore<span class="token punctuation">.</span><span class="token property-access">subscribe</span><span class="token punctuation">,</span> todosStore<span class="token punctuation">.</span><span class="token property-access">getSnapshot</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre><p>storeì— ìˆëŠ” ë°ì´í„°ì˜ ìŠ¤ëƒ…ìƒ·ì„ ë°˜í™˜í•©ë‹ˆë‹¤. ë‘ ê°œì˜ í•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬í•´ì•¼ í•©ë‹ˆë‹¤.<ol><li><code>subscribe</code> í•¨ìˆ˜ëŠ” storeë¥¼ êµ¬ë…í•˜ê³  êµ¬ë…ì„ ì·¨ì†Œí•˜ëŠ” í•¨ìˆ˜ë¥¼ ë°˜í™˜í•´ì•¼ í•©ë‹ˆë‹¤.<li><code>getSnapshot</code> í•¨ìˆ˜ëŠ” storeì—ì„œ ë°ì´í„°ì˜ ìŠ¤ëƒ…ìƒ·ì„ ì½ì–´ì•¼ í•©ë‹ˆë‹¤.</ol><p><a href="#usage">ì•„ë˜ ì˜ˆì‹œ ì°¸ì¡°</a><section class="level4"aria-labelledby="ë§¤ê°œë³€ìˆ˜-parameters"><h4 id="ë§¤ê°œë³€ìˆ˜-parameters">ë§¤ê°œë³€ìˆ˜ {/<em>parameters</em>/}</h4><ul><li><p><code>subscribe</code>: í•˜ë‚˜ì˜ <code>callback</code> ì¸ìˆ˜ë¥¼ ë°›ì•„ storeì— êµ¬ë…í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. storeê°€ ë³€ê²½ë  ë•Œ, ì œê³µëœ <code>callback</code>ì´ í˜¸ì¶œë˜ì–´ Reactê°€ <code>getSnapshot</code>ì„ ë‹¤ì‹œ í˜¸ì¶œí•˜ê³  (í•„ìš”í•œ ê²½ìš°) ì»´í¬ë„ŒíŠ¸ë¥¼ ë‹¤ì‹œ ë Œë”ë§í•˜ë„ë¡ í•´ì•¼ í•©ë‹ˆë‹¤. <code>subscribe</code> í•¨ìˆ˜ëŠ” êµ¬ë…ì„ ì •ë¦¬í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë°˜í™˜í•´ì•¼ í•©ë‹ˆë‹¤.<li><p><code>getSnapshot</code>: ì»´í¬ë„ŒíŠ¸ì— í•„ìš”í•œ store ë°ì´í„°ì˜ ìŠ¤ëƒ…ìƒ·ì„ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. storeê°€ ë³€ê²½ë˜ì§€ ì•Šì€ ìƒíƒœì—ì„œ <code>getSnapshot</code>ì„ ë°˜ë³µì ìœ¼ë¡œ í˜¸ì¶œí•˜ë©´ ë™ì¼í•œ ê°’ì„ ë°˜í™˜í•´ì•¼ í•©ë‹ˆë‹¤. ì €ì¥ì†Œê°€ ë³€ê²½ë˜ì–´ ë°˜í™˜ëœ ê°’ì´ ë‹¤ë¥´ë©´ (<a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Object/is"><code>Object.is</code></a>ì™€ ë¹„êµí•˜ì—¬) ReactëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë¦¬ë Œë”ë§í•©ë‹ˆë‹¤.<li><p><strong>optional</strong> <code>getServerSnapshot</code>: storeì— ìˆëŠ” ë°ì´í„°ì˜ ì´ˆê¸° ìŠ¤ëƒ…ìƒ·ì„ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. ì„œë²„ ë Œë”ë§ ë„ì¤‘ê³¼ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ ë Œë”ë§ ëœ ì½˜í…ì¸ ì˜ í•˜ì´ë“œë ˆì´ì…˜ ì¤‘ì—ë§Œ ì‚¬ìš©ë©ë‹ˆë‹¤. ì„œë²„ ìŠ¤ëƒ…ìƒ·ì€ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ ê°„ì— ë™ì¼í•´ì•¼ í•˜ë©° ì¼ë°˜ì ìœ¼ë¡œ ì§ë ¬í™”ë˜ì–´ ì„œë²„ì—ì„œ í´ë¼ì´ì–¸íŠ¸ë¡œ ì „ë‹¬ë©ë‹ˆë‹¤. ì´ í•¨ìˆ˜ê°€ ì œê³µë˜ì§€ ì•Šìœ¼ë©´ ì„œë²„ì—ì„œ ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•  ë•Œ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤.</ul></section><section class="level4"aria-labelledby="ë°˜í™˜ê°’-returns"><h4 id="ë°˜í™˜ê°’-returns">ë°˜í™˜ê°’ {/<em>returns</em>/}</h4><p>ë Œë”ë§ ë¡œì§ì— ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” storeì˜ í˜„ì¬ ìŠ¤ëƒ…ìƒ·ì…ë‹ˆë‹¤.</section><section class="level4"aria-labelledby="ì£¼ì˜-ì‚¬í•­-caveats"><h4 id="ì£¼ì˜-ì‚¬í•­-caveats">ì£¼ì˜ ì‚¬í•­ {/<em>caveats</em>/}</h4><ul><li><p><code>getSnapshot</code>ì´ ë°˜í™˜í•˜ëŠ” store ìŠ¤ëƒ…ìƒ·ì€ ë¶ˆë³€ì´ì–´ì•¼ í•©ë‹ˆë‹¤. ê¸°ë³¸ ìŠ¤í† ì–´ì— ë³€ê²½ ê°€ëŠ¥í•œ ë°ì´í„°ê°€ ìˆëŠ” ê²½ìš° ë°ì´í„°ê°€ ë³€ê²½ëœ ê²½ìš° ë³€ê²½ ë¶ˆê°€ëŠ¥í•œ ìƒˆ ìŠ¤ëƒ…ìƒ·ì„ ë°˜í™˜í•©ë‹ˆë‹¤. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ìºì‹œ ëœ ë§ˆì§€ë§‰ ìŠ¤ëƒ…ìƒ·ì„ ë°˜í™˜í•©ë‹ˆë‹¤.<li><p>ë¦¬ë Œë”ë§í•˜ëŠ” ë™ì•ˆ ë‹¤ë¥¸ <code>subscribe</code> í•¨ìˆ˜ê°€ ì „ë‹¬ë˜ë©´ ReactëŠ” ìƒˆë¡œ ì „ë‹¬ëœ <code>subscribe</code> í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì €ì¥ì†Œë¥¼ ë‹¤ì‹œ êµ¬ë…í•©ë‹ˆë‹¤. ì»´í¬ë„ŒíŠ¸ ì™¸ë¶€ì—ì„œ <code>subscribe</code> ë¥¼ ì„ ì–¸í•˜ë©´ ì´ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<li><p><a href="/reference/react/useTransition">non-blocking transition ì—…ë°ì´íŠ¸</a> ì¤‘ì— ìŠ¤í† ì–´ê°€ ë³€ê²½ë˜ë©´, ReactëŠ” í•´ë‹¹ ì—…ë°ì´íŠ¸ë¥¼ blockingìœ¼ë¡œ ìˆ˜í–‰í•˜ë„ë¡ ë˜ëŒì•„ê°‘ë‹ˆë‹¤. êµ¬ì²´ì ìœ¼ë¡œ, ëª¨ë“  Transition ì—…ë°ì´íŠ¸ì— ëŒ€í•´ ReactëŠ” DOMì— ë³€ê²½ ì‚¬í•­ì„ ì ìš©í•˜ê¸° ì§ì „ì— <code>getSnapshot</code>ì„ í•œ ë²ˆ ë” í˜¸ì¶œí•©ë‹ˆë‹¤. ì²˜ìŒ í˜¸ì¶œí–ˆì„ ë•Œì™€ ë‹¤ë¥¸ ê°’ì„ ë°˜í™˜í•˜ë©´, ReactëŠ” ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì—…ë°ì´íŠ¸ë¥¼ ì‹œì‘í•˜ê³ , ì´ë²ˆì—ëŠ” blocking ì—…ë°ì´íŠ¸ë¥¼ ì ìš©í•˜ì—¬ í™”ë©´ì˜ ëª¨ë“  ì»´í¬ë„ŒíŠ¸ê°€ ê°™ì€ ìŠ¤í† ì–´ ë²„ì „ì„ ë°˜ì˜í•˜ë„ë¡ í•©ë‹ˆë‹¤.<li><p><code>useSyncExternalStore</code>ê°€ ë°˜í™˜í•œ ìŠ¤í† ì–´ ê°’ì„ ê¸°ë°˜ìœ¼ë¡œ ë Œë”ë§ì„ <em>ì¼ì‹œ ì¤‘ë‹¨</em> í•˜ëŠ” ê²ƒì€ ê¶Œì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê·¸ ì´ìœ ëŠ” ì™¸ë¶€ ìŠ¤í† ì–´ì— ëŒ€í•œ ë³€í˜•ì„ <a href="/reference/react/useTransition">non-blocking transition ì—…ë°ì´íŠ¸</a>ë¡œ í‘œì‹œí•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì—, ê°€ì¥ ê°€ê¹Œìš´ <a href="/reference/react/Suspense"><code>Suspense</code> fallback</a>ì„ íŠ¸ë¦¬ê±°í•´ì„œ, í™”ë©´ì—ì„œ ë¡œë”© ìŠ¤í”¼ë„ˆë¡œ ëŒ€ì²´í•˜ì—¬, ì¼ë°˜ì ìœ¼ë¡œ UXê°€ ì¢‹ì§€ ì•Šê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.<p>ì˜ˆë¥¼ ë“¤ì–´, ë‹¤ìŒì€ ê¶Œì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token maybe-class-name">LazyProductDetailPage</span> <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'./ProductDetailPage.js'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">ShoppingApp</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> selectedProductId <span class="token operator">=</span> <span class="token function">useSyncExternalStore</span><span class="token punctuation">(</span><span class="token spread operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// âŒ `selectedProductId`ì— ì¢…ì†ëœ Promiseë¡œ `use`ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒ</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">use</span><span class="token punctuation">(</span><span class="token function">fetchItem</span><span class="token punctuation">(</span>selectedProductId<span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token comment">// âŒ `selectedProductId`ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì§€ì—° ì»´í¬ë„ŒíŠ¸ë¥¼ ì¡°ê±´ë¶€ë¡œ ë Œë”ë§í•˜ëŠ” ê²ƒ</span>
  <span class="token keyword control-flow">return</span> selectedProductId <span class="token operator">!=</span> <span class="token keyword null nil">null</span> <span class="token operator">?</span> <span class="token operator">&#x3C;</span><span class="token maybe-class-name">LazyProductDetailPage</span> <span class="token operator">/</span><span class="token operator">></span> <span class="token operator">:</span> <span class="token operator">&#x3C;</span><span class="token maybe-class-name">FeaturedProducts</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></ul></section></section></section><section class="level2"aria-labelledby="ì‚¬ìš©ë²•-usage"><h2 id="ì‚¬ìš©ë²•-usage">ì‚¬ìš©ë²• {/<em>usage</em>/}</h2><section class="level3"aria-labelledby="ì™¸ë¶€-store-êµ¬ë…-subscribing-to-an-external-store"><h3 id="ì™¸ë¶€-store-êµ¬ë…-subscribing-to-an-external-store">ì™¸ë¶€ store êµ¬ë… {/<em>subscribing-to-an-external-store</em>/}</h3><p>ëŒ€ë¶€ë¶„ì˜ React ì»´í¬ë„ŒíŠ¸ëŠ” <a href="/learn/passing-props-to-a-component">props</a>, <a href="/reference/react/useState">state</a>, ê·¸ë¦¬ê³  <a href="/reference/react/useContext">context</a>ì—ì„œë§Œ ë°ì´í„°ë¥¼ ì½ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ë•Œë¡œëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ì‹œê°„ì´ ì§€ë‚¨ì— ë”°ë¼ ë³€ê²½ë˜ëŠ” React ì™¸ë¶€ì˜ ì¼ë¶€ ì €ì¥ì†Œì—ì„œ ì¼ë¶€ ë°ì´í„°ë¥¼ ì½ì–´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒì´ í¬í•¨ë©ë‹ˆë‹¤.<ul><li>React ì™¸ë¶€ì— stateë¥¼ ë³´ê´€í•˜ëŠ” ì„œë“œíŒŒí‹° ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬.<li>ë³€ê²½ ê°€ëŠ¥í•œ ê°’ì„ ë…¸ì¶œí•˜ëŠ” ë¸Œë¼ìš°ì € APIì™€ ê·¸ ë³€ê²½ ì‚¬í•­ì„ êµ¬ë…í•˜ëŠ” ì´ë²¤íŠ¸.</ul><p>ì™¸ë¶€ ë°ì´í„° ì €ì¥ì†Œì—ì„œ ê°’ì„ ì½ìœ¼ë ¤ë©´ ì»´í¬ë„ŒíŠ¸ì˜ ìµœìƒìœ„ ë ˆë²¨ì—ì„œ <code>useSyncExternalStore</code>ë¥¼ í˜¸ì¶œí•˜ì„¸ìš”.<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useSyncExternalStore <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> todosStore <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./todoStore.js'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">TodosApp</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> todos <span class="token operator">=</span> <span class="token function">useSyncExternalStore</span><span class="token punctuation">(</span>todosStore<span class="token punctuation">.</span><span class="token property-access">subscribe</span><span class="token punctuation">,</span> todosStore<span class="token punctuation">.</span><span class="token property-access">getSnapshot</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre><p>storeì— ìˆëŠ” ë°ì´í„°ì˜<codestep step="{3}">snapshot</codestep>ì„ ë°˜í™˜í•©ë‹ˆë‹¤. ë‘ ê°œì˜ í•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬í•´ì•¼ í•©ë‹ˆë‹¤.<ol><li><codestep step="{1}"><code>subscribe</code> í•¨ìˆ˜</codestep>ëŠ” storeì— êµ¬ë…í•˜ê³  êµ¬ë…ì„ ì·¨ì†Œí•˜ëŠ” í•¨ìˆ˜ë¥¼ ë°˜í™˜í•´ì•¼ í•©ë‹ˆë‹¤.<li><codestep step="{2}"><code>getSnapshot</code> í•¨ìˆ˜</codestep>í•¨ìˆ˜ëŠ” storeì—ì„œ ë°ì´í„°ì˜ ìŠ¤ëƒ…ìƒ·ì„ ì½ì–´ì•¼ í•©ë‹ˆë‹¤.</ol><p>ReactëŠ” ì´ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ ì»´í¬ë„ŒíŠ¸ë¥¼ storeì— êµ¬ë…í•œ ìƒíƒœë¡œ ìœ ì§€í•˜ê³  ë³€ê²½ ì‚¬í•­ì´ ìˆì„ ë•Œ ë¦¬ë Œë”ë§í•©ë‹ˆë‹¤.<p>ì˜ˆë¥¼ ë“¤ì–´ ì•„ë˜ ìƒŒë“œë°•ìŠ¤ì—ì„œ <code>todosStore</code>ëŠ” React ì™¸ë¶€ì— ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ì™¸ë¶€ storeë¡œ êµ¬í˜„ë˜ì–´ ìˆìŠµë‹ˆë‹¤. <code>TodosApp</code>ì»´í¬ë„ŒíŠ¸ëŠ” <code>useSyncExternalStore</code> Hookìœ¼ë¡œ í•´ë‹¹ ì™¸ë¶€ storeì— ì—°ê²°í•©ë‹ˆë‹¤.</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useSyncExternalStore <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> todosStore <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./todoStore.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">TodosApp</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> todos <span class="token operator">=</span> <span class="token function">useSyncExternalStore</span><span class="token punctuation">(</span>todosStore<span class="token punctuation">.</span><span class="token property-access">subscribe</span><span class="token punctuation">,</span> todosStore<span class="token punctuation">.</span><span class="token property-access">getSnapshot</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> todosStore<span class="token punctuation">.</span><span class="token method function property-access">addTodo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token maybe-class-name">Add</span> todo<span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>hr <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>ul<span class="token operator">></span>
        <span class="token punctuation">{</span>todos<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">todo</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span>
          <span class="token operator">&#x3C;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>todo<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span>todo<span class="token punctuation">.</span><span class="token property-access">text</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token comment">// ì´ê²ƒì€ third-party storeì˜ ì˜ˆì‹œì…ë‹ˆë‹¤</span>
<span class="token comment">// í•´ë‹¹ storeë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° Reactì™€ í†µí•©í•  í•„ìš”ê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>

<span class="token comment">// ì•±ì´ Reactë¡œ ì™„ì „íˆ ë¹Œë“œëœ ê²½ìš°,</span>
<span class="token comment">// React stateë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤.</span>

<span class="token keyword">let</span> nextId <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> listeners <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword">const</span> todosStore <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">addTodo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">emitChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token parameter">listener</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    listeners <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token spread operator">...</span>listeners<span class="token punctuation">,</span> listener<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
      listeners <span class="token operator">=</span> listeners<span class="token punctuation">.</span><span class="token method function property-access">filter</span><span class="token punctuation">(</span><span class="token parameter">l</span> <span class="token arrow operator">=></span> l <span class="token operator">!==</span> listener<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">getSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> todos<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">emitChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> listener <span class="token keyword">of</span> listeners<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">listener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></sandpack><note><p>ê°€ëŠ¥í•˜ë©´ ë‚´ì¥ëœ React stateë¥¼ <a href="/reference/react/useState"><code>useState</code></a> ë° <a href="/reference/react/useReducer"><code>useReducer</code></a>ì™€ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. <code>useSyncExternalStore</code> APIëŠ” ê¸°ì¡´ ë¹„ React ì½”ë“œì™€ í†µí•©í•´ì•¼ í•  ë•Œ ì£¼ë¡œ ìœ ìš©í•©ë‹ˆë‹¤.</p></note></section><section class="level3"aria-labelledby="ë¸Œë¼ìš°ì €-api-êµ¬ë…-subscribing-to-a-browser-api"><h3 id="ë¸Œë¼ìš°ì €-api-êµ¬ë…-subscribing-to-a-browser-api">ë¸Œë¼ìš°ì € API êµ¬ë… {/<em>subscribing-to-a-browser-api</em>/}</h3><p><code>useSyncExternalStore</code>ë¥¼ ì¶”ê°€í•˜ëŠ” ë˜ ë‹¤ë¥¸ ì´ìœ ëŠ” ì‹œê°„ì´ ì§€ë‚¨ì— ë”°ë¼ ë³€ê²½ë˜ëŠ” ë¸Œë¼ìš°ì €ì— ë…¸ì¶œë˜ëŠ” ì¼ë¶€ ê°’ì„ êµ¬ë…í•˜ë ¤ëŠ” ê²½ìš°ì…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì»´í¬ë„ŒíŠ¸ì— ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì´ í™œì„±í™”ë˜ì–´ ìˆëŠ”ì§€ ì—¬ë¶€ë¥¼ í‘œì‹œí•˜ê³  ì‹¶ë‹¤ê³  ê°€ì •í•´ ë³´ê² ìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì €ëŠ” <a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator/onLine"><code>navigator.onLine</code>.</a>ì´ë¼ëŠ” ì†ì„±ì„ í†µí•´ ì´ ì •ë³´ë¥¼ ë…¸ì¶œí•©ë‹ˆë‹¤.<p>ì´ ê°’ì€ ì‹œê°„ì´ ì§€ë‚¨ì— ë”°ë¼ Reactê°€ ì•Œì§€ ëª»í•˜ëŠ” ì‚¬ì´ì— ë³€ê²½ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ <code>useSyncExternalStore</code>ë¡œ ê°’ì„ ì½ì–´ì•¼ í•©ë‹ˆë‹¤.<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useSyncExternalStore <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">ChatIndicator</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> isOnline <span class="token operator">=</span> <span class="token function">useSyncExternalStore</span><span class="token punctuation">(</span>subscribe<span class="token punctuation">,</span> getSnapshot<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre><p><code>getSnapshot</code> í•¨ìˆ˜ë¥¼ êµ¬í˜„í•˜ë ¤ë©´ ë¸Œë¼ìš°ì € APIì—ì„œ í˜„ì¬ ê°’ì„ ì½ìŠµë‹ˆë‹¤.<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">getSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token dom variable">navigator</span><span class="token punctuation">.</span><span class="token property-access">onLine</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>ë‹¤ìŒìœ¼ë¡œ <code>subscribe</code> í•¨ìˆ˜ë¥¼ êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ <code>navigator.onLine</code>ì´ ë³€ê²½ë˜ë©´ ë¸Œë¼ìš°ì €ëŠ” <code>window</code> ê°ì²´ì—ì„œ <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/online_event"><code>online</code></a> ë° <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/offline_event"><code>offline</code></a> ì´ë²¤íŠ¸ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. <code>callback</code> ì¸ìˆ˜ë¥¼ í•´ë‹¹ ì´ë²¤íŠ¸ì— êµ¬ë…í•œ ë‹¤ìŒ êµ¬ë…ì„ ì •ë¦¬í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë°˜í™˜í•´ì•¼ í•©ë‹ˆë‹¤.<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">'online'</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">'offline'</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token method function property-access">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'online'</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token method function property-access">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'offline'</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>ì´ì œ ReactëŠ” ì™¸ë¶€ <code>navigator.onLine</code> APIì—ì„œ ê°’ì„ ì½ëŠ” ë°©ë²•ê³¼ ê·¸ ë³€ê²½ ì‚¬í•­ì„ êµ¬ë…í•˜ëŠ” ë°©ë²•ì„ ì•Œê³  ìˆìŠµë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ì—ì„œ ë””ë°”ì´ìŠ¤ì˜ ì—°ê²°ì„ ëŠì–´ë³´ë©´ ì»´í¬ë„ŒíŠ¸ê°€ ì‘ë‹µìœ¼ë¡œ ë¦¬ë Œë”ë§ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useSyncExternalStore <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">ChatIndicator</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> isOnline <span class="token operator">=</span> <span class="token function">useSyncExternalStore</span><span class="token punctuation">(</span>subscribe<span class="token punctuation">,</span> getSnapshot<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token punctuation">{</span>isOnline <span class="token operator">?</span> <span class="token string">'âœ… Online'</span> <span class="token operator">:</span> <span class="token string">'âŒ Disconnected'</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token dom variable">navigator</span><span class="token punctuation">.</span><span class="token property-access">onLine</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">'online'</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">'offline'</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token method function property-access">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'online'</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token method function property-access">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'offline'</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack></section><section class="level3"aria-labelledby="custom-hookìœ¼ë¡œ-ë¡œì§-ì¶”ì¶œí•˜ê¸°-extracting-the-logic-to-a-custom-hook"><h3 id="custom-hookìœ¼ë¡œ-ë¡œì§-ì¶”ì¶œí•˜ê¸°-extracting-the-logic-to-a-custom-hook">custom Hookìœ¼ë¡œ ë¡œì§ ì¶”ì¶œí•˜ê¸° {/<em>extracting-the-logic-to-a-custom-hook</em>/}</h3><p>ì¼ë°˜ì ìœ¼ë¡œ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì§ì ‘ <code>useSyncExternalStore</code>ë¥¼ ì‘ì„±í•˜ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤. ëŒ€ì‹  ì¼ë°˜ì ìœ¼ë¡œ custom Hookì—ì„œ í˜¸ì¶œí•©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ì„œë¡œ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë™ì¼í•œ ì™¸ë¶€ ì €ì¥ì†Œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<p>ì˜ˆë¥¼ ë“¤ì–´ ì´ custom <code>useOnlineStatus</code> Hookì€ ë„¤íŠ¸ì›Œí¬ê°€ ì˜¨ë¼ì¸ ìƒíƒœì¸ì§€ ì—¬ë¶€ë¥¼ ì¶”ì í•©ë‹ˆë‹¤.<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useSyncExternalStore <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">useOnlineStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> isOnline <span class="token operator">=</span> <span class="token function">useSyncExternalStore</span><span class="token punctuation">(</span>subscribe<span class="token punctuation">,</span> getSnapshot<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> isOnline<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre><p>ì´ì œ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì—ì„œ ê¸°ë³¸ êµ¬í˜„ì„ ë°˜ë³µí•˜ì§€ ì•Šê³ ë„ <code>useOnlineStatus</code>ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useOnlineStatus <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./useOnlineStatus.js'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">StatusBar</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> isOnline <span class="token operator">=</span> <span class="token function">useOnlineStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token punctuation">{</span>isOnline <span class="token operator">?</span> <span class="token string">'âœ… Online'</span> <span class="token operator">:</span> <span class="token string">'âŒ Disconnected'</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">SaveButton</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> isOnline <span class="token operator">=</span> <span class="token function">useOnlineStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">handleSaveClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'âœ… Progress saved'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>button disabled<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">!</span>isOnline<span class="token punctuation">}</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleSaveClick<span class="token punctuation">}</span><span class="token operator">></span>
      <span class="token punctuation">{</span>isOnline <span class="token operator">?</span> <span class="token string">'Save progress'</span> <span class="token operator">:</span> <span class="token string">'Reconnecting...'</span><span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">SaveButton</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">StatusBar</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useSyncExternalStore <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">useOnlineStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> isOnline <span class="token operator">=</span> <span class="token function">useSyncExternalStore</span><span class="token punctuation">(</span>subscribe<span class="token punctuation">,</span> getSnapshot<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> isOnline<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token dom variable">navigator</span><span class="token punctuation">.</span><span class="token property-access">onLine</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">'online'</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">'offline'</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token method function property-access">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'online'</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token method function property-access">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'offline'</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack></section><section class="level3"aria-labelledby="ì„œë²„-ë Œë”ë§-ì§€ì›-ì¶”ê°€-adding-support-for-server-rendering"><h3 id="ì„œë²„-ë Œë”ë§-ì§€ì›-ì¶”ê°€-adding-support-for-server-rendering">ì„œë²„ ë Œë”ë§ ì§€ì› ì¶”ê°€ {/<em>adding-support-for-server-rendering</em>/}</h3><p>React ì•±ì´ <a href="/reference/react-dom/server">server rendering</a>ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° React ì»´í¬ë„ŒíŠ¸ëŠ” ë¸Œë¼ìš°ì € í™˜ê²½ ì™¸ë¶€ì—ì„œë„ ì‹¤í–‰ë˜ì–´ ì´ˆê¸° HTMLì„ ìƒì„±í•©ë‹ˆë‹¤. ì´ë¡œ ì¸í•´ ì™¸ë¶€ storeì— ì—°ê²°í•  ë•Œ ëª‡ ê°€ì§€ ë¬¸ì œê°€ ë°œìƒí•©ë‹ˆë‹¤.<ul><li>ë¸Œë¼ìš°ì € ì „ìš© APIì— ì—°ê²°í•˜ëŠ” ê²½ìš° ì„œë²„ì— í•´ë‹¹ APIê°€ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì‘ë™í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.<li>ì„œë“œ íŒŒí‹° ë°ì´í„° ì €ì¥ì†Œì— ì—°ê²°í•˜ëŠ” ê²½ìš° ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ê°„ì— ì¼ì¹˜í•˜ëŠ” ë°ì´í„°ê°€ í•„ìš”í•©ë‹ˆë‹¤.</ul><p>ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ë©´ <code>getServerSnapshot</code> í•¨ìˆ˜ë¥¼ <code>useSyncExternalStore</code>ì˜ ì„¸ ë²ˆì§¸ ì¸ìˆ˜ë¡œ ì „ë‹¬í•˜ì„¸ìš”.<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useSyncExternalStore <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">useOnlineStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> isOnline <span class="token operator">=</span> <span class="token function">useSyncExternalStore</span><span class="token punctuation">(</span>subscribe<span class="token punctuation">,</span> getSnapshot<span class="token punctuation">,</span> getServerSnapshot<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> isOnline<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token dom variable">navigator</span><span class="token punctuation">.</span><span class="token property-access">onLine</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getServerSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// ì„œë²„ì—ì„œ ìƒì„±ëœ HTMLì—ëŠ” í•­ìƒ "Online"ì„ í‘œì‹œí•©ë‹ˆë‹¤.</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre><p><code>getServerSnapshot</code> í•¨ìˆ˜ëŠ” <code>getSnapshot</code>ê³¼ ìœ ì‚¬í•˜ì§€ë§Œ ë‘ ê°€ì§€ ìƒí™©ì—ì„œë§Œ ì‹¤í–‰ë©ë‹ˆë‹¤.<ul><li>HTMLì„ ìƒì„±í•  ë•Œ ì„œë²„ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.<li><a href="/reference/react-dom/client/hydrateRoot">hydration</a> ì¤‘ ì¦‰ Reactê°€ ì„œë²„ HTMLì„ ê°€ì ¸ì™€ì„œ ì¸í„°ë™í‹°ë¸Œí•˜ê²Œ ë§Œë“¤ ë•Œ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.</ul><p>ì´ë¥¼ í†µí•´ ì•±ì´ ìƒí˜¸ì‘ìš©í•˜ê¸° ì „ì— ì‚¬ìš©ë  ì´ˆê¸° ìŠ¤ëƒ…ìƒ· ê°’ì„ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì„œë²„ ë Œë”ë§ì— ì˜ë¯¸ ìˆëŠ” ì´ˆê¸°ê°’ì´ ì—†ë‹¤ë©´ <a href="/reference/react/Suspense#providing-a-fallback-for-server-errors-and-client-only-content">ì»´í¬ë„ŒíŠ¸ê°€ í´ë¼ì´ì–¸íŠ¸ì—ì„œë§Œ ë Œë”ë§ë˜ë„ë¡ ê°•ì œ ì„¤ì •</a>í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><note><p><code>getServerSnapshot</code>ì´ ì´ˆê¸° í´ë¼ì´ì–¸íŠ¸ ë Œë”ë§ì—ì„œ ì„œë²„ì—ì„œ ë°˜í™˜í•œ ê²ƒê³¼ ë™ì¼í•œ ì •í™•í•œ ë°ì´í„°ë¥¼ ë°˜í™˜í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”. ì˜ˆë¥¼ ë“¤ì–´ <code>getServerSnapshot</code>ì´ ì„œë²„ì—ì„œ ë¯¸ë¦¬ ì±„ì›Œì§„ store ì½˜í…ì¸ ë¥¼ ë°˜í™˜í•œ ê²½ìš° ì´ ì½˜í…ì¸ ë¥¼ í´ë¼ì´ì–¸íŠ¸ë¡œ ì „ì†¡í•´ì•¼ í•©ë‹ˆë‹¤. ì´ë¥¼ ìˆ˜í–‰í•˜ëŠ” ì¼ë°˜ì ì¸ ë°©ë²• ì¤‘ í•˜ë‚˜ëŠ” ì„œë²„ ë Œë”ë§ ì¤‘ì— <code>window.MY_STORE_DATA</code>ì™€ ê°™ì€ ê¸€ë¡œë²Œì„ ì„¤ì •í•˜ëŠ” <code>&#x3C;script></code> íƒœê·¸ë¥¼ ìƒì„±í•œ ë‹¤ìŒ í´ë¼ì´ì–¸íŠ¸ì—ì„œ <code>getServerSnapshot</code>ì—ì„œ í•´ë‹¹ ê¸€ë¡œë²Œì„ ì½ì–´ì˜¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ì™¸ë¶€ ìŠ¤í† ì–´ì—ì„œ ì´ë¥¼ ìˆ˜í–‰í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ì§€ì¹¨ì„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤.</p></note></section></section><section class="level2"aria-labelledby="íŠ¸ëŸ¬ë¸”-ìŠˆíŒ…-troubleshooting"><h2 id="íŠ¸ëŸ¬ë¸”-ìŠˆíŒ…-troubleshooting">íŠ¸ëŸ¬ë¸” ìŠˆíŒ… {/<em>troubleshooting</em>/}</h2><section class="level3"aria-labelledby="ì˜¤ë¥˜ê°€-ë°œìƒí–ˆìŠµë‹ˆë‹¤-getsnapshotì˜-ê²°ê³¼ë¥¼-ìºì‹œí•´ì•¼-í•©ë‹ˆë‹¤-ì˜¤ë¥˜ê°€-ë°œìƒí–ˆìŠµë‹ˆë‹¤-getsnapshotì˜-ê²°ê³¼ë¥¼-ìºì‹œí•´ì•¼-í•©ë‹ˆë‹¤"><h3 id="ì˜¤ë¥˜ê°€-ë°œìƒí–ˆìŠµë‹ˆë‹¤-getsnapshotì˜-ê²°ê³¼ë¥¼-ìºì‹œí•´ì•¼-í•©ë‹ˆë‹¤-ì˜¤ë¥˜ê°€-ë°œìƒí–ˆìŠµë‹ˆë‹¤-getsnapshotì˜-ê²°ê³¼ë¥¼-ìºì‹œí•´ì•¼-í•©ë‹ˆë‹¤">ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: "<code>getSnapshot</code>ì˜ ê²°ê³¼ë¥¼ ìºì‹œí•´ì•¼ í•©ë‹ˆë‹¤.â€ {/<em>ì˜¤ë¥˜ê°€-ë°œìƒí–ˆìŠµë‹ˆë‹¤-getsnapshotì˜-ê²°ê³¼ë¥¼-ìºì‹œí•´ì•¼-í•©ë‹ˆë‹¤</em>/}</h3><p>ì´ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ <code>getSnapshot</code> í•¨ìˆ˜ê°€ í˜¸ì¶œë  ë•Œë§ˆë‹¤ ìƒˆ ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤.<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">getSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ğŸ”´ getSnapshotì—ì„œ í•­ìƒ ë‹¤ë¥¸ ê°ì²´ë¥¼ ë°˜í™˜í•˜ì§€ ë§ˆì„¸ìš”.</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">todos</span><span class="token operator">:</span> myStore<span class="token punctuation">.</span><span class="token property-access">todos</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>ReactëŠ” <code>getSnapshot</code> ë°˜í™˜ ê°’ì´ ì§€ë‚œë²ˆê³¼ ë‹¤ë¥´ë©´ ì»´í¬ë„ŒíŠ¸ë¥¼ ë¦¬ë Œë”ë§í•©ë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— í•­ìƒ ë‹¤ë¥¸ ê°’ì„ ë°˜í™˜í•˜ë©´ ë¬´í•œ ë£¨í”„ì— ë“¤ì–´ê°€ì„œ ì´ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤.<p>ì‹¤ì œë¡œ ë³€ê²½ëœ ì‚¬í•­ì´ ìˆëŠ” ê²½ìš°ì—ë§Œ <code>getSnapshot</code> ê°ì²´ê°€ ë‹¤ë¥¸ ê°ì²´ë¥¼ ë°˜í™˜í•´ì•¼ í•©ë‹ˆë‹¤. storeì— ë³€ê²½ ë¶ˆê°€ëŠ¥í•œ ë°ì´í„°ê°€ í¬í•¨ëœ ê²½ìš° í•´ë‹¹ ë°ì´í„°ë¥¼ ì§ì ‘ ë°˜í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">getSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// âœ… ë¶ˆë³€ ë°ì´í„°ë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>
  <span class="token keyword control-flow">return</span> myStore<span class="token punctuation">.</span><span class="token property-access">todos</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>store ë°ì´í„°ê°€ ë³€ê²½ ê°€ëŠ¥í•œ ê²½ìš° <code>getSnapshot</code> í•¨ìˆ˜ëŠ” í•´ë‹¹ ë°ì´í„°ì˜ ë³€ê²½ ë¶ˆê°€ëŠ¥í•œ ìŠ¤ëƒ…ìƒ·ì„ ë°˜í™˜í•´ì•¼ í•©ë‹ˆë‹¤. ì¦‰ ìƒˆ ê°ì²´ë¥¼ ìƒì„±í•´ì•¼ í•˜ì§€ë§Œ ë§¤ë²ˆ í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ì´ ì‘ì—…ì„ ìˆ˜í–‰í•´ì„œëŠ” ì•ˆ ë©ë‹ˆë‹¤. ëŒ€ì‹  ë§ˆì§€ë§‰ìœ¼ë¡œ ê³„ì‚°ëœ ìŠ¤ëƒ…ìƒ·ì„ ì €ì¥í•˜ê³  ì €ì¥ì†Œì˜ ë°ì´í„°ê°€ ë³€ê²½ë˜ì§€ ì•Šì€ ê²½ìš° ì§€ë‚œë²ˆê³¼ ë™ì¼í•œ ìŠ¤ëƒ…ìƒ·ì„ ë°˜í™˜í•´ì•¼ í•©ë‹ˆë‹¤. ë³€ê²½ ê°€ëŠ¥í•œ ë°ì´í„°ê°€ ë³€ê²½ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ë°©ë²•ì€ ë³€ê²½ ê°€ëŠ¥í•œ ì €ì¥ì†Œê°€ êµ¬í˜„ëœ ë°©ì‹ì— ë”°ë¼ ë‹¤ë¦…ë‹ˆë‹¤.</section><section class="level3"aria-labelledby="ë¦¬ë Œë”ë§í• -ë•Œë§ˆë‹¤-subscribe-í•¨ìˆ˜ê°€-í˜¸ì¶œë©ë‹ˆë‹¤-my-subscribe-function-gets-called-after-every-re-render"><h3 id="ë¦¬ë Œë”ë§í• -ë•Œë§ˆë‹¤-subscribe-í•¨ìˆ˜ê°€-í˜¸ì¶œë©ë‹ˆë‹¤-my-subscribe-function-gets-called-after-every-re-render">ë¦¬ë Œë”ë§í•  ë•Œë§ˆë‹¤ <code>subscribe</code> í•¨ìˆ˜ê°€ í˜¸ì¶œë©ë‹ˆë‹¤. {/<em>my-subscribe-function-gets-called-after-every-re-render</em>/}</h3><p>subscribe í•¨ìˆ˜ëŠ” ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì— ì •ì˜ë˜ë¯€ë¡œ ë¦¬ë Œë”ë§í•  ë•Œë§ˆë‹¤ ë‹¬ë¼ì§‘ë‹ˆë‹¤.<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">ChatIndicator</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> isOnline <span class="token operator">=</span> <span class="token function">useSyncExternalStore</span><span class="token punctuation">(</span>subscribe<span class="token punctuation">,</span> getSnapshot<span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment">// ğŸš©í•­ìƒ ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ ReactëŠ” ë Œë”ë§í•  ë•Œë§ˆë‹¤ ë‹¤ì‹œ êµ¬ë…í•©ë‹ˆë‹¤. </span>
  <span class="token keyword">function</span> <span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre><p>ë¦¬ë Œë”ë§ ì‚¬ì´ì— ë‹¤ë¥¸ <code>subscribe</code> í•¨ìˆ˜ë¥¼ ì „ë‹¬í•˜ë©´ Reactê°€ storeë¥¼ ë‹¤ì‹œ êµ¬ë…í•©ë‹ˆë‹¤. ì´ë¡œ ì¸í•´ ì„±ëŠ¥ ë¬¸ì œê°€ ë°œìƒí•˜ê³  store ì¬êµ¬ë…ì„ í”¼í•˜ê³  ì‹¶ë‹¤ë©´ <code>subscribe</code> í•¨ìˆ˜ë¥¼ ì™¸ë¶€ë¡œ ì´ë™í•˜ì„¸ìš”.<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">ChatIndicator</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> isOnline <span class="token operator">=</span> <span class="token function">useSyncExternalStore</span><span class="token punctuation">(</span>subscribe<span class="token punctuation">,</span> getSnapshot<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// âœ… í•­ìƒ ë™ì¼í•œ í•¨ìˆ˜ì´ë¯€ë¡œ ReactëŠ” ë‹¤ì‹œ êµ¬ë…í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.</span>
<span class="token keyword">function</span> <span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre><p>ë˜ëŠ” ì¼ë¶€ ì¸ìˆ˜ê°€ ë³€ê²½ë  ë•Œë§Œ ë‹¤ì‹œ êµ¬ë…í•˜ë„ë¡ <code>subscribe</code>ì„ <a href="/reference/react/useCallback"><code>useCallback</code></a>ìœ¼ë¡œ ë˜í•‘í•©ë‹ˆë‹¤.<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">ChatIndicator</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> userId <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> isOnline <span class="token operator">=</span> <span class="token function">useSyncExternalStore</span><span class="token punctuation">(</span>subscribe<span class="token punctuation">,</span> getSnapshot<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// âœ… userIdê°€ ë³€ê²½ë˜ì§€ ì•ŠëŠ” í•œ ë™ì¼í•œ í•¨ìˆ˜ì…ë‹ˆë‹¤.</span>
  <span class="token keyword">const</span> subscribe <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>userId<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre><p><span style="float:footnote"><a href="../../index.html#toc">Go to TOC</a></span></section></section></inlinetoc></section>
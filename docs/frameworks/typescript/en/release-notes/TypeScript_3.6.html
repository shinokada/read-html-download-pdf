<!doctype html><html lang="en"><meta charset="utf-8"><title>TypeScript 3.6</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="layout"content="docs"><meta name="permalink"content="/docs/handbook/release-notes/typescript-3-6.html"><meta name="oneline"content="TypeScript 3.6 Release Notes"><link rel="stylesheet"href="../../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><section id="stricter-generators"class="level2"><h2>Stricter Generators</h2><p>TypeScript 3.6 introduces stricter checking for iterators and generator functions. In earlier versions, users of generators had no way to differentiate whether a value was yielded or returned from a generator.<pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&#x3C;</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token keyword control-flow">yield</span> <span class="token number">100</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token string">"Finished!"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> iter <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> curr <span class="token operator">=</span> iter<span class="token punctuation">.</span><span class="token method function property-access">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>curr<span class="token punctuation">.</span><span class="token property-access">done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// TypeScript 3.5 and prior thought this was a 'string | number'.</span>
  <span class="token comment">// It should know it's 'string' since 'done' was 'true'!</span>
  curr<span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>Additionally, generators just assumed the type of <code>yield</code> was always <code>any</code>.<pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> x<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword control-flow">yield</span><span class="token punctuation">;</span>
  x<span class="token punctuation">.</span><span class="token method function property-access">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> iter <span class="token operator">=</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
iter<span class="token punctuation">.</span><span class="token method function property-access">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
iter<span class="token punctuation">.</span><span class="token method function property-access">next</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// oops! runtime error!</span></code></pre><p>In TypeScript 3.6, the checker now knows that the correct type for <code>curr.value</code> should be <code>string</code> in our first example, and will correctly error on our call to <code>next()</code> in our last example. This is thanks to some changes in the <code>Iterator</code> and <code>IteratorResult</code> type declarations to include a few new type parameters, and to a new type that TypeScript uses to represent generators called the <code>Generator</code> type.<p>The <code>Iterator</code> type now allows users to specify the yielded type, the returned type, and the type that <code>next</code> can accept.<pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">Iterator</span><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token maybe-class-name">TReturn</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token maybe-class-name">TNext</span> <span class="token operator">=</span> <span class="token keyword nil">undefined</span><span class="token operator">></span></span> <span class="token punctuation">{</span>
  <span class="token comment">// Takes either 0 or 1 arguments - doesn't accept 'undefined'</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token spread operator">...</span>args<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token maybe-class-name">TNext</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">IteratorResult</span><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token maybe-class-name">TReturn</span><span class="token operator">></span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span><span class="token operator">?</span><span class="token punctuation">(</span>value<span class="token operator">?</span><span class="token operator">:</span> <span class="token maybe-class-name">TReturn</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">IteratorResult</span><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token maybe-class-name">TReturn</span><span class="token operator">></span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">throw</span><span class="token operator">?</span><span class="token punctuation">(</span>e<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">IteratorResult</span><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token maybe-class-name">TReturn</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>Building on that work, the new <code>Generator</code> type is an <code>Iterator</code> that always has both the <code>return</code> and <code>throw</code> methods present, and is also iterable.<pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">Generator</span><span class="token operator">&#x3C;</span><span class="token constant">T</span> <span class="token operator">=</span> <span class="token builtin">unknown</span><span class="token punctuation">,</span> <span class="token maybe-class-name">TReturn</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token maybe-class-name">TNext</span> <span class="token operator">=</span> <span class="token builtin">unknown</span><span class="token operator">></span></span>
  <span class="token keyword">extends</span> <span class="token class-name"><span class="token maybe-class-name">Iterator</span><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token maybe-class-name">TReturn</span><span class="token punctuation">,</span> <span class="token maybe-class-name">TNext</span><span class="token operator">></span></span> <span class="token punctuation">{</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token spread operator">...</span>args<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token maybe-class-name">TNext</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">IteratorResult</span><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token maybe-class-name">TReturn</span><span class="token operator">></span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token maybe-class-name">TReturn</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">IteratorResult</span><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token maybe-class-name">TReturn</span><span class="token operator">></span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">throw</span><span class="token punctuation">(</span>e<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">IteratorResult</span><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token maybe-class-name">TReturn</span><span class="token operator">></span><span class="token punctuation">;</span>
  <span class="token punctuation">[</span><span class="token known-class-name class-name">Symbol</span><span class="token punctuation">.</span><span class="token property-access">iterator</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">Generator</span><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token maybe-class-name">TReturn</span><span class="token punctuation">,</span> <span class="token maybe-class-name">TNext</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>To allow differentiation between returned values and yielded values, TypeScript 3.6 converts the <code>IteratorResult</code> type to a discriminated union type:<pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">IteratorResult</span><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token maybe-class-name">TReturn</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token operator">></span></span> <span class="token operator">=</span>
  <span class="token operator">|</span> <span class="token maybe-class-name">IteratorYieldResult</span><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token operator">></span>
  <span class="token operator">|</span> <span class="token maybe-class-name">IteratorReturnResult</span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">TReturn</span><span class="token operator">></span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">IteratorYieldResult</span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">TYield</span><span class="token operator">></span></span> <span class="token punctuation">{</span>
  done<span class="token operator">?</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  value<span class="token operator">:</span> <span class="token maybe-class-name">TYield</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">IteratorReturnResult</span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">TReturn</span><span class="token operator">></span></span> <span class="token punctuation">{</span>
  done<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  value<span class="token operator">:</span> <span class="token maybe-class-name">TReturn</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>In short, what this means is that you'll be able to appropriately narrow down values from iterators when dealing with them directly.<p>To correctly represent the types that can be passed in to a generator from calls to <code>next()</code>, TypeScript 3.6 also infers certain uses of <code>yield</code> within the body of a generator function.<pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> x<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token keyword control-flow">yield</span><span class="token punctuation">;</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token method function property-access">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
x<span class="token punctuation">.</span><span class="token method function property-access">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// first call to 'next' is always ignored</span>
x<span class="token punctuation">.</span><span class="token method function property-access">next</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error! 'number' is not assignable to 'string'</span></code></pre><p>If you'd prefer to be explicit, you can also enforce the type of values that can be returned, yielded, and evaluated from <code>yield</code> expressions using an explicit return type. Below, <code>next()</code> can only be called with <code>boolean</code>s, and depending on the value of <code>done</code>, <code>value</code> is either a <code>string</code> or a <code>number</code>.<pre class="language-ts"><code class="language-ts"><span class="token doc-comment comment">/**
 * - yields numbers
 * - returns strings
 * - can be passed in booleans
 */</span>
<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">Generator</span><span class="token operator">&#x3C;</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">boolean</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token keyword control-flow">yield</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">return</span> <span class="token string">"done!"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> iter <span class="token operator">=</span> <span class="token function">counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> curr <span class="token operator">=</span> iter<span class="token punctuation">.</span><span class="token method function property-access">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>curr<span class="token punctuation">.</span><span class="token property-access">done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>curr<span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  curr <span class="token operator">=</span> iter<span class="token punctuation">.</span><span class="token method function property-access">next</span><span class="token punctuation">(</span>curr<span class="token punctuation">.</span><span class="token property-access">value</span> <span class="token operator">===</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>curr<span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">.</span><span class="token method function property-access">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// prints:</span>
<span class="token comment">//</span>
<span class="token comment">// 0</span>
<span class="token comment">// 1</span>
<span class="token comment">// 2</span>
<span class="token comment">// 3</span>
<span class="token comment">// 4</span>
<span class="token comment">// 5</span>
<span class="token comment">// DONE!</span></code></pre><p>For more details on the change, <a href="https://github.com/Microsoft/TypeScript/issues/2983">see the pull request here</a>.</section><section id="more-accurate-array-spread"class="level2"><h2>More Accurate Array Spread</h2><p>In pre-ES2015 targets, the most faithful emit for constructs like <code>for</code>/<code>of</code> loops and array spreads can be a bit heavy. For this reason, TypeScript uses a simpler emit by default that only supports array types, and supports iterating on other types using the <a href="/tsconfig#downlevelIteration"><code>downlevelIteration</code></a> flag. The looser default without <a href="/tsconfig#downlevelIteration"><code>downlevelIteration</code></a> works fairly well; however, there were some common cases where the transformation of array spreads had observable differences. For example, the following array containing a spread<pre class="language-ts"><code class="language-ts"><span class="token punctuation">[</span><span class="token spread operator">...</span><span class="token known-class-name class-name">Array</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><p>can be rewritten as the following array literal<pre class="language-js"><code class="language-js"><span class="token punctuation">[</span><span class="token keyword nil">undefined</span><span class="token punctuation">,</span> <span class="token keyword nil">undefined</span><span class="token punctuation">,</span> <span class="token keyword nil">undefined</span><span class="token punctuation">,</span> <span class="token keyword nil">undefined</span><span class="token punctuation">,</span> <span class="token keyword nil">undefined</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><p>However, TypeScript would instead transform the original code into this code:<pre class="language-ts"><code class="language-ts"><span class="token known-class-name class-name">Array</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>which is slightly different. <code>Array(5)</code> produces an array with a length of 5, but with no defined property slots.<p>TypeScript 3.6 introduces a new <code>__spreadArrays</code> helper to accurately model what happens in ECMAScript 2015 in older targets outside of <a href="/tsconfig#downlevelIteration"><code>downlevelIteration</code></a>. <code>__spreadArrays</code> is also available in <a href="https://github.com/Microsoft/tslib/">tslib</a>.<p>For more information, <a href="https://github.com/microsoft/TypeScript/pull/31166">see the relevant pull request</a>.</section><section id="improved-ux-around-promises"class="level2"><h2>Improved UX Around Promises</h2><p>TypeScript 3.6 introduces some improvements for when <code>Promise</code>s are mis-handled.<p>For example, it's often very common to forget to <code>.then()</code> or <code>await</code> the contents of a <code>Promise</code> before passing it to another function. TypeScript's error messages are now specialized, and inform the user that perhaps they should consider using the <code>await</code> keyword.<pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">User</span></span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token dom variable">location</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">getUserData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token known-class-name class-name">Promise</span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">User</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">displayUser</span><span class="token punctuation">(</span>user<span class="token operator">:</span> <span class="token maybe-class-name">User</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">displayUser</span><span class="token punctuation">(</span><span class="token function">getUserData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//              ~~~~~~~~~~~~~</span>
  <span class="token comment">// Argument of type 'Promise&#x3C;User>' is not assignable to parameter of type 'User'.</span>
  <span class="token comment">//   ...</span>
  <span class="token comment">// Did you forget to use 'await'?</span>
<span class="token punctuation">}</span></code></pre><p>It's also common to try to access a method before <code>await</code>-ing or <code>.then()</code>-ing a <code>Promise</code>. This is another example, among many others, where we're able to do better.<pre class="language-ts"><code class="language-ts"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getCuteAnimals</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">"https://reddit.com/r/aww.json"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//   ~~~~</span>
  <span class="token comment">// Property 'json' does not exist on type 'Promise&#x3C;Response>'.</span>
  <span class="token comment">//</span>
  <span class="token comment">// Did you forget to use 'await'?</span>
<span class="token punctuation">}</span></code></pre><p>For more details, <a href="https://github.com/microsoft/TypeScript/issues/30646">see the originating issue</a>, as well as the pull requests that link back to it.</section><section id="better-unicode-support-for-identifiers"class="level2"><h2>Better Unicode Support for Identifiers</h2><p>TypeScript 3.6 contains better support for Unicode characters in identifiers when emitting to ES2015 and later targets.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> ùì±ùìÆùìµùìµùì∏ <span class="token operator">=</span> <span class="token string">"world"</span><span class="token punctuation">;</span> <span class="token comment">// previously disallowed, now allowed in '--target es2015'</span></code></pre></section><section id="importmeta-support-in-systemjs"class="level2"><h2><code>import.meta</code> Support in SystemJS</h2><p>TypeScript 3.6 supports transforming <code>import.meta</code> to <code>context.meta</code> when your <code>module</code> target is set to <code>system</code>.<pre class="language-ts"><code class="language-ts"><span class="token comment">// This module:</span>

<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token keyword module">import</span><span class="token punctuation">.</span><span class="token property-access">meta</span><span class="token punctuation">.</span><span class="token property-access">url</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// gets turned into the following:</span>

<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token method function property-access">register</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>exports<span class="token punctuation">,</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
    setters<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token function-variable function">execute</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token property-access">meta</span><span class="token punctuation">.</span><span class="token property-access">url</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section id="get-and-set-accessors-are-allowed-in-ambient-contexts"class="level2"><h2><code>get</code> and <code>set</code> Accessors Are Allowed in Ambient Contexts</h2><p>In previous versions of TypeScript, the language didn't allow <code>get</code> and <code>set</code> accessors in ambient contexts (like in <code>declare</code>-d classes, or in <code>.d.ts</code> files in general). The rationale was that accessors weren't distinct from properties as far as writing and reading to these properties; however, <a href="https://github.com/tc39/proposal-class-fields/issues/248">because ECMAScript's class fields proposal may have differing behavior from in existing versions of TypeScript</a>, we realized we needed a way to communicate this different behavior to provide appropriate errors in subclasses.<p>As a result, users can write getters and setters in ambient contexts in TypeScript 3.6.<pre class="language-ts"><code class="language-ts"><span class="token keyword">declare</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">Foo</span></span> <span class="token punctuation">{</span>
  <span class="token comment">// Allowed in 3.6+.</span>
  <span class="token keyword">get</span> <span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token keyword">set</span> <span class="token function">x</span><span class="token punctuation">(</span>val<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>In TypeScript 3.7, the compiler itself will take advantage of this feature so that generated <code>.d.ts</code> files will also emit <code>get</code>/<code>set</code> accessors.</section><section id="ambient-classes-and-functions-can-merge"class="level2"><h2>Ambient Classes and Functions Can Merge</h2><p>In previous versions of TypeScript, it was an error to merge classes and functions under any circumstances. Now, ambient classes and functions (classes/functions with the <code>declare</code> modifier, or in <code>.d.ts</code> files) can merge. This means that now you can write the following:<pre class="language-ts"><code class="language-ts"><span class="token keyword module">export</span> <span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Point2D</span></span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">Point2D</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token keyword">declare</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">Point2D</span></span> <span class="token punctuation">{</span>
  x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>instead of needing to use<pre class="language-ts"><code class="language-ts"><span class="token keyword module">export</span> <span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">Point2D</span></span> <span class="token punctuation">{</span>
  x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword module">export</span> <span class="token keyword">declare</span> <span class="token keyword">var</span> <span class="token maybe-class-name">Point2D</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">Point2D</span><span class="token punctuation">;</span>
  <span class="token keyword">new</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">Point2D</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>One advantage of this is that the callable constructor pattern can be easily expressed while also allowing namespaces to merge with these declarations (since <code>var</code> declarations can't merge with <code>namespace</code>s).<p>In TypeScript 3.7, the compiler will take advantage of this feature so that <code>.d.ts</code> files generated from <code>.js</code> files can appropriately capture both the callability and constructability of a class-like function.<p>For more details, <a href="https://github.com/microsoft/TypeScript/pull/32584">see the original PR on GitHub</a>.</section><section id="apis-to-support---build-and---incremental"class="level2"><h2>APIs to Support <code>--build</code> and <code>--incremental</code></h2><p>TypeScript 3.0 introduced support for referencing other and building them incrementally using the <code>--build</code> flag. Additionally, TypeScript 3.4 introduced the <a href="/tsconfig#incremental"><code>incremental</code></a> flag for saving information about previous compilations to only rebuild certain files. These flags were incredibly useful for structuring projects more flexibly and speeding builds up. Unfortunately, using these flags didn't work with 3rd party build tools like Gulp and Webpack. TypeScript 3.6 now exposes two sets of APIs to operate on project references and incremental program building.<p>For creating <a href="/tsconfig#incremental"><code>incremental</code></a> builds, users can leverage the <code>createIncrementalProgram</code> and <code>createIncrementalCompilerHost</code> APIs. Users can also re-hydrate old program instances from <code>.tsbuildinfo</code> files generated by this API using the newly exposed <code>readBuilderProgram</code> function, which is only meant to be used as for creating new programs (i.e. you can't modify the returned instance - it's only meant to be used for the <code>oldProgram</code> parameter in other <code>create*Program</code> functions).<p>For leveraging project references, a new <code>createSolutionBuilder</code> function has been exposed, which returns an instance of the new type <code>SolutionBuilder</code>.<p>For more details on these APIs, you can <a href="https://github.com/microsoft/TypeScript/pull/31432">see the original pull request</a>.</section><section id="semicolon-aware-code-edits"class="level2"><h2>Semicolon-Aware Code Edits</h2><p>Editors like Visual Studio and Visual Studio Code can automatically apply quick fixes, refactorings, and other transformations like automatically importing values from other modules. These transformations are powered by TypeScript, and older versions of TypeScript unconditionally added semicolons to the end of every statement; unfortunately, this disagreed with many users' style guidelines, and many users were displeased with the editor inserting semicolons.<p>TypeScript is now smart enough to detect whether your file uses semicolons when applying these sorts of edits. If your file generally lacks semicolons, TypeScript won't add one.<p>For more details, <a href="https://github.com/microsoft/TypeScript/pull/31801">see the corresponding pull request</a>.</section><section id="smarter-auto-import-syntax"class="level2"><h2>Smarter Auto-Import Syntax</h2><p>JavaScript has a lot of different module syntaxes or conventions: the one in the ECMAScript standard, the one Node already supports (CommonJS), AMD, System.js, and more! For the most part, TypeScript would default to auto-importing using ECMAScript module syntax, which was often inappropriate in certain TypeScript projects with different compiler settings, or in Node projects with plain JavaScript and <code>require</code> calls.<p>TypeScript 3.6 is now a bit smarter about looking at your existing imports before deciding on how to auto-import other modules. You can <a href="https://github.com/microsoft/TypeScript/pull/32684">see more details in the original pull request here</a>.</section><section id="new-typescript-playground"class="level2"><h2>New TypeScript Playground</h2><p>The TypeScript playground has received a much-needed refresh with handy new functionality! The new playground is largely a fork of <a href="https://github.com/agentcooper">Artem Tyurin</a>'s <a href="https://github.com/agentcooper/typescript-play">TypeScript playground</a> which community members have been using more and more. We owe Artem a big thanks for helping out here!<p>The new playground now supports many new options including:<ul><li>The <a href="/tsconfig#target"><code>target</code></a> option (allowing users to switch out of <code>es5</code> to <code>es3</code>, <code>es2015</code>, <code>esnext</code>, etc.)<li>All the strictness flags (including just <a href="/tsconfig#strict"><code>strict</code></a>)<li>Support for plain JavaScript files (using <code>allowJS</code> and optionally <a href="/tsconfig#checkJs"><code>checkJs</code></a>)</ul><p>These options also persist when sharing links to playground samples, allowing users to more reliably share examples without having to tell the recipient "oh, don't forget to turn on the <a href="/tsconfig#noImplicitAny"><code>noImplicitAny</code></a> option!".<p>In the near future, we're going to be refreshing the playground samples, adding JSX support, and polishing automatic type acquisition, meaning that you'll be able to see the same experience on the playground as you'd get in your personal editor.<p>As we improve the playground and the website, <a href="https://github.com/microsoft/TypeScript-Website/">we welcome feedback and pull requests on GitHub</a>! <span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section>